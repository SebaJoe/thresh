import{z as Yo,A as Mm,B as bS,o as Ft,c as zt,a as ot,t as Ut,F as _i,r as ps,k as Re,f as er,b as Ae,d as fn,j as Rf,C as Df,L as Lg,D as Zl,E as mi,G as wS,H as xS,I as ES,J as AS,K as SS,M as Qh,s as kS,h as CS}from"./index-47b4b43f.js";var Xl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Xl.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",h="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,v="__lodash_placeholder__",b=1,k=2,S=4,Q=1,Z=2,tt=1,ut=2,rt=4,yt=8,wt=16,Vt=32,_t=64,Yt=128,we=256,Ue=512,se=30,Oe="...",pr=800,gr=16,vt=1,ke=2,ne=3,on=1/0,ir=9007199254740991,Ha=17976931348623157e292,Ds=0/0,_r=4294967295,Ga=_r-1,fu=_r>>>1,Ai=[["ary",Yt],["bind",tt],["bindKey",ut],["curry",yt],["curryRight",wt],["flip",Ue],["partial",Vt],["partialRight",_t],["rearg",we]],pn="[object Arguments]",Jr="[object Array]",du="[object AsyncFunction]",Si="[object Boolean]",Mt="[object Date]",Os="[object DOMException]",gn="[object Error]",Rr="[object Function]",Zi="[object GeneratorFunction]",pe="[object Map]",ki="[object Number]",Dn="[object Null]",an="[object Object]",_n="[object Promise]",Ze="[object Proxy]",Xi="[object RegExp]",sr="[object Set]",ti="[object String]",Ji="[object Symbol]",Wa="[object Undefined]",ei="[object WeakMap]",ln="[object WeakSet]",ts="[object ArrayBuffer]",Me="[object DataView]",Ro="[object Float32Array]",Dr="[object Float64Array]",en="[object Int8Array]",ni="[object Int16Array]",ri="[object Int32Array]",Ci="[object Uint8Array]",es="[object Uint8ClampedArray]",ii="[object Uint16Array]",Bn="[object Uint32Array]",ns=/\b__p \+= '';/g,Ps=/\b(__p \+=) '' \+/g,Ti=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ii=/&(?:amp|lt|gt|quot|#39);/g,Ms=/[&<>"']/g,Do=RegExp(Ii.source),ja=RegExp(Ms.source),Ls=/<%-([\s\S]+?)%>/g,je=/<%([\s\S]+?)%>/g,ze=/<%=([\s\S]+?)%>/g,Ri=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Ka=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ns=/[\\^$.*+?()[\]{}|]/g,Ya=RegExp(Ns.source),Ke=/^\s+/,bt=/\s/,Qa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Za=/\{\n\/\* \[wrapped with (.+)\] \*/,pu=/,? & /,Di=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Un=/[()=,{}\[\]\/\s]/,Fs=/\\(\\)?/g,Vs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Oo=/\w*$/,$s=/^[-+]0x[0-9a-f]+$/i,qs=/^0b[01]+$/i,zn=/^\[object .+?Constructor\]$/,u=/^0o[0-7]+$/i,g=/^(?:0|[1-9]\d*)$/,_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,m=/($^)/,x=/['\n\r\u2028\u2029\\]/g,A="\\ud800-\\udfff",z="\\u0300-\\u036f",N="\\ufe20-\\ufe2f",U="\\u20d0-\\u20ff",C=z+N+U,P="\\u2700-\\u27bf",Y="a-z\\xdf-\\xf6\\xf8-\\xff",R="\\xac\\xb1\\xd7\\xf7",D="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",O="\\u2000-\\u206f",q=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",K="A-Z\\xc0-\\xd6\\xd8-\\xde",et="\\ufe0e\\ufe0f",lt=R+D+O+q,it="['’]",j="["+A+"]",L="["+lt+"]",V="["+C+"]",F="\\d+",mt="["+P+"]",xt="["+Y+"]",pt="[^"+A+lt+F+P+Y+K+"]",T="\\ud83c[\\udffb-\\udfff]",J="(?:"+V+"|"+T+")",ct="[^"+A+"]",Ct="(?:\\ud83c[\\udde6-\\uddff]){2}",It="[\\ud800-\\udbff][\\udc00-\\udfff]",gt="["+K+"]",W="\\u200d",$t="(?:"+xt+"|"+pt+")",ve="(?:"+gt+"|"+pt+")",Dt="(?:"+it+"(?:d|ll|m|re|s|t|ve))?",jt="(?:"+it+"(?:D|LL|M|RE|S|T|VE))?",Ce=J+"?",Te="["+et+"]?",ye="(?:"+W+"(?:"+[ct,Ct,It].join("|")+")"+Te+Ce+")*",cn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Oi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Kt=Te+Ce+ye,Rt="(?:"+[mt,Ct,It].join("|")+")"+Kt,St="(?:"+[ct+V+"?",V,Ct,It,j].join("|")+")",Qt=RegExp(it,"g"),kt=RegExp(V,"g"),te=RegExp(T+"(?="+T+")|"+St+Kt,"g"),$e=RegExp([gt+"?"+xt+"+"+Dt+"(?="+[L,gt,"$"].join("|")+")",ve+"+"+jt+"(?="+[L,gt+$t,"$"].join("|")+")",gt+"?"+$t+"+"+Dt,gt+"+"+jt,Oi,cn,F,Rt].join("|"),"g"),xe=RegExp("["+W+A+C+et+"]"),Hn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Or=-1,qt={};qt[Ro]=qt[Dr]=qt[en]=qt[ni]=qt[ri]=qt[Ci]=qt[es]=qt[ii]=qt[Bn]=!0,qt[pn]=qt[Jr]=qt[ts]=qt[Si]=qt[Me]=qt[Mt]=qt[gn]=qt[Rr]=qt[pe]=qt[ki]=qt[an]=qt[Xi]=qt[sr]=qt[ti]=qt[ei]=!1;var G={};G[pn]=G[Jr]=G[ts]=G[Me]=G[Si]=G[Mt]=G[Ro]=G[Dr]=G[en]=G[ni]=G[ri]=G[pe]=G[ki]=G[an]=G[Xi]=G[sr]=G[ti]=G[Ji]=G[Ci]=G[es]=G[ii]=G[Bn]=!0,G[gn]=G[Rr]=G[ei]=!1;var Bt={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ge={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ne={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mr=parseFloat,Po=parseInt,Bs=typeof Yo=="object"&&Yo&&Yo.Object===Object&&Yo,si=typeof self=="object"&&self&&self.Object===Object&&self,He=Bs||si||Function("return this")(),gu=t&&!t.nodeType&&t,rs=gu&&!0&&e&&!e.nodeType&&e,Id=rs&&rs.exports===gu,_u=Id&&Bs.process,vr=function(){try{var B=rs&&rs.require&&rs.require("util").types;return B||_u&&_u.binding&&_u.binding("util")}catch{}}(),Rd=vr&&vr.isArrayBuffer,Dd=vr&&vr.isDate,Od=vr&&vr.isMap,Pd=vr&&vr.isRegExp,Md=vr&&vr.isSet,Ld=vr&&vr.isTypedArray;function or(B,nt,X){switch(X.length){case 0:return B.call(nt);case 1:return B.call(nt,X[0]);case 2:return B.call(nt,X[0],X[1]);case 3:return B.call(nt,X[0],X[1],X[2])}return B.apply(nt,X)}function zy(B,nt,X,Tt){for(var Jt=-1,_e=B==null?0:B.length;++Jt<_e;){var un=B[Jt];nt(Tt,un,X(un),B)}return Tt}function yr(B,nt){for(var X=-1,Tt=B==null?0:B.length;++X<Tt&&nt(B[X],X,B)!==!1;);return B}function Hy(B,nt){for(var X=B==null?0:B.length;X--&&nt(B[X],X,B)!==!1;);return B}function Nd(B,nt){for(var X=-1,Tt=B==null?0:B.length;++X<Tt;)if(!nt(B[X],X,B))return!1;return!0}function Pi(B,nt){for(var X=-1,Tt=B==null?0:B.length,Jt=0,_e=[];++X<Tt;){var un=B[X];nt(un,X,B)&&(_e[Jt++]=un)}return _e}function Xa(B,nt){var X=B==null?0:B.length;return!!X&&Us(B,nt,0)>-1}function mu(B,nt,X){for(var Tt=-1,Jt=B==null?0:B.length;++Tt<Jt;)if(X(nt,B[Tt]))return!0;return!1}function qe(B,nt){for(var X=-1,Tt=B==null?0:B.length,Jt=Array(Tt);++X<Tt;)Jt[X]=nt(B[X],X,B);return Jt}function Mi(B,nt){for(var X=-1,Tt=nt.length,Jt=B.length;++X<Tt;)B[Jt+X]=nt[X];return B}function vu(B,nt,X,Tt){var Jt=-1,_e=B==null?0:B.length;for(Tt&&_e&&(X=B[++Jt]);++Jt<_e;)X=nt(X,B[Jt],Jt,B);return X}function Gy(B,nt,X,Tt){var Jt=B==null?0:B.length;for(Tt&&Jt&&(X=B[--Jt]);Jt--;)X=nt(X,B[Jt],Jt,B);return X}function yu(B,nt){for(var X=-1,Tt=B==null?0:B.length;++X<Tt;)if(nt(B[X],X,B))return!0;return!1}var Wy=bu("length");function jy(B){return B.split("")}function Ky(B){return B.match(Di)||[]}function Fd(B,nt,X){var Tt;return X(B,function(Jt,_e,un){if(nt(Jt,_e,un))return Tt=_e,!1}),Tt}function Ja(B,nt,X,Tt){for(var Jt=B.length,_e=X+(Tt?1:-1);Tt?_e--:++_e<Jt;)if(nt(B[_e],_e,B))return _e;return-1}function Us(B,nt,X){return nt===nt?o1(B,nt,X):Ja(B,Vd,X)}function Yy(B,nt,X,Tt){for(var Jt=X-1,_e=B.length;++Jt<_e;)if(Tt(B[Jt],nt))return Jt;return-1}function Vd(B){return B!==B}function $d(B,nt){var X=B==null?0:B.length;return X?xu(B,nt)/X:Ds}function bu(B){return function(nt){return nt==null?n:nt[B]}}function wu(B){return function(nt){return B==null?n:B[nt]}}function qd(B,nt,X,Tt,Jt){return Jt(B,function(_e,un,De){X=Tt?(Tt=!1,_e):nt(X,_e,un,De)}),X}function Qy(B,nt){var X=B.length;for(B.sort(nt);X--;)B[X]=B[X].value;return B}function xu(B,nt){for(var X,Tt=-1,Jt=B.length;++Tt<Jt;){var _e=nt(B[Tt]);_e!==n&&(X=X===n?_e:X+_e)}return X}function Eu(B,nt){for(var X=-1,Tt=Array(B);++X<B;)Tt[X]=nt(X);return Tt}function Zy(B,nt){return qe(nt,function(X){return[X,B[X]]})}function Bd(B){return B&&B.slice(0,Gd(B)+1).replace(Ke,"")}function ar(B){return function(nt){return B(nt)}}function Au(B,nt){return qe(nt,function(X){return B[X]})}function Mo(B,nt){return B.has(nt)}function Ud(B,nt){for(var X=-1,Tt=B.length;++X<Tt&&Us(nt,B[X],0)>-1;);return X}function zd(B,nt){for(var X=B.length;X--&&Us(nt,B[X],0)>-1;);return X}function Xy(B,nt){for(var X=B.length,Tt=0;X--;)B[X]===nt&&++Tt;return Tt}var Jy=wu(Bt),t1=wu(Ie);function e1(B){return"\\"+Ne[B]}function n1(B,nt){return B==null?n:B[nt]}function zs(B){return xe.test(B)}function r1(B){return Hn.test(B)}function i1(B){for(var nt,X=[];!(nt=B.next()).done;)X.push(nt.value);return X}function Su(B){var nt=-1,X=Array(B.size);return B.forEach(function(Tt,Jt){X[++nt]=[Jt,Tt]}),X}function Hd(B,nt){return function(X){return B(nt(X))}}function Li(B,nt){for(var X=-1,Tt=B.length,Jt=0,_e=[];++X<Tt;){var un=B[X];(un===nt||un===v)&&(B[X]=v,_e[Jt++]=X)}return _e}function tl(B){var nt=-1,X=Array(B.size);return B.forEach(function(Tt){X[++nt]=Tt}),X}function s1(B){var nt=-1,X=Array(B.size);return B.forEach(function(Tt){X[++nt]=[Tt,Tt]}),X}function o1(B,nt,X){for(var Tt=X-1,Jt=B.length;++Tt<Jt;)if(B[Tt]===nt)return Tt;return-1}function a1(B,nt,X){for(var Tt=X+1;Tt--;)if(B[Tt]===nt)return Tt;return Tt}function Hs(B){return zs(B)?c1(B):Wy(B)}function Pr(B){return zs(B)?u1(B):jy(B)}function Gd(B){for(var nt=B.length;nt--&&bt.test(B.charAt(nt)););return nt}var l1=wu(ge);function c1(B){for(var nt=te.lastIndex=0;te.test(B);)++nt;return nt}function u1(B){return B.match(te)||[]}function h1(B){return B.match($e)||[]}var f1=function B(nt){nt=nt==null?He:Gs.defaults(He.Object(),nt,Gs.pick(He,Gn));var X=nt.Array,Tt=nt.Date,Jt=nt.Error,_e=nt.Function,un=nt.Math,De=nt.Object,ku=nt.RegExp,d1=nt.String,br=nt.TypeError,el=X.prototype,p1=_e.prototype,Ws=De.prototype,nl=nt["__core-js_shared__"],rl=p1.toString,Ee=Ws.hasOwnProperty,g1=0,Wd=function(){var s=/[^.]+$/.exec(nl&&nl.keys&&nl.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),il=Ws.toString,_1=rl.call(De),m1=He._,v1=ku("^"+rl.call(Ee).replace(Ns,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sl=Id?nt.Buffer:n,Ni=nt.Symbol,ol=nt.Uint8Array,jd=sl?sl.allocUnsafe:n,al=Hd(De.getPrototypeOf,De),Kd=De.create,Yd=Ws.propertyIsEnumerable,ll=el.splice,Qd=Ni?Ni.isConcatSpreadable:n,Lo=Ni?Ni.iterator:n,is=Ni?Ni.toStringTag:n,cl=function(){try{var s=cs(De,"defineProperty");return s({},"",{}),s}catch{}}(),y1=nt.clearTimeout!==He.clearTimeout&&nt.clearTimeout,b1=Tt&&Tt.now!==He.Date.now&&Tt.now,w1=nt.setTimeout!==He.setTimeout&&nt.setTimeout,ul=un.ceil,hl=un.floor,Cu=De.getOwnPropertySymbols,x1=sl?sl.isBuffer:n,Zd=nt.isFinite,E1=el.join,A1=Hd(De.keys,De),hn=un.max,On=un.min,S1=Tt.now,k1=nt.parseInt,Xd=un.random,C1=el.reverse,Tu=cs(nt,"DataView"),No=cs(nt,"Map"),Iu=cs(nt,"Promise"),js=cs(nt,"Set"),Fo=cs(nt,"WeakMap"),Vo=cs(De,"create"),fl=Fo&&new Fo,Ks={},T1=us(Tu),I1=us(No),R1=us(Iu),D1=us(js),O1=us(Fo),dl=Ni?Ni.prototype:n,$o=dl?dl.valueOf:n,Jd=dl?dl.toString:n;function w(s){if(Ye(s)&&!ee(s)&&!(s instanceof ce)){if(s instanceof wr)return s;if(Ee.call(s,"__wrapped__"))return tg(s)}return new wr(s)}var Ys=function(){function s(){}return function(a){if(!Ge(a))return{};if(Kd)return Kd(a);s.prototype=a;var c=new s;return s.prototype=n,c}}();function pl(){}function wr(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=n}w.templateSettings={escape:Ls,evaluate:je,interpolate:ze,variable:"",imports:{_:w}},w.prototype=pl.prototype,w.prototype.constructor=w,wr.prototype=Ys(pl.prototype),wr.prototype.constructor=wr;function ce(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_r,this.__views__=[]}function P1(){var s=new ce(this.__wrapped__);return s.__actions__=Zn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Zn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Zn(this.__views__),s}function M1(){if(this.__filtered__){var s=new ce(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function L1(){var s=this.__wrapped__.value(),a=this.__dir__,c=ee(s),p=a<0,y=c?s.length:0,E=jb(0,y,this.__views__),I=E.start,M=E.end,H=M-I,st=p?M:I-1,at=this.__iteratees__,ht=at.length,Et=0,Ot=On(H,this.__takeCount__);if(!c||!p&&y==H&&Ot==H)return Ep(s,this.__actions__);var Gt=[];t:for(;H--&&Et<Ot;){st+=a;for(var ie=-1,Wt=s[st];++ie<ht;){var le=at[ie],ue=le.iteratee,ur=le.type,Kn=ue(Wt);if(ur==ke)Wt=Kn;else if(!Kn){if(ur==vt)continue t;break t}}Gt[Et++]=Wt}return Gt}ce.prototype=Ys(pl.prototype),ce.prototype.constructor=ce;function ss(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var p=s[a];this.set(p[0],p[1])}}function N1(){this.__data__=Vo?Vo(null):{},this.size=0}function F1(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function V1(s){var a=this.__data__;if(Vo){var c=a[s];return c===f?n:c}return Ee.call(a,s)?a[s]:n}function $1(s){var a=this.__data__;return Vo?a[s]!==n:Ee.call(a,s)}function q1(s,a){var c=this.__data__;return this.size+=this.has(s)?0:1,c[s]=Vo&&a===n?f:a,this}ss.prototype.clear=N1,ss.prototype.delete=F1,ss.prototype.get=V1,ss.prototype.has=$1,ss.prototype.set=q1;function oi(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var p=s[a];this.set(p[0],p[1])}}function B1(){this.__data__=[],this.size=0}function U1(s){var a=this.__data__,c=gl(a,s);if(c<0)return!1;var p=a.length-1;return c==p?a.pop():ll.call(a,c,1),--this.size,!0}function z1(s){var a=this.__data__,c=gl(a,s);return c<0?n:a[c][1]}function H1(s){return gl(this.__data__,s)>-1}function G1(s,a){var c=this.__data__,p=gl(c,s);return p<0?(++this.size,c.push([s,a])):c[p][1]=a,this}oi.prototype.clear=B1,oi.prototype.delete=U1,oi.prototype.get=z1,oi.prototype.has=H1,oi.prototype.set=G1;function ai(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var p=s[a];this.set(p[0],p[1])}}function W1(){this.size=0,this.__data__={hash:new ss,map:new(No||oi),string:new ss}}function j1(s){var a=Cl(this,s).delete(s);return this.size-=a?1:0,a}function K1(s){return Cl(this,s).get(s)}function Y1(s){return Cl(this,s).has(s)}function Q1(s,a){var c=Cl(this,s),p=c.size;return c.set(s,a),this.size+=c.size==p?0:1,this}ai.prototype.clear=W1,ai.prototype.delete=j1,ai.prototype.get=K1,ai.prototype.has=Y1,ai.prototype.set=Q1;function os(s){var a=-1,c=s==null?0:s.length;for(this.__data__=new ai;++a<c;)this.add(s[a])}function Z1(s){return this.__data__.set(s,f),this}function X1(s){return this.__data__.has(s)}os.prototype.add=os.prototype.push=Z1,os.prototype.has=X1;function Mr(s){var a=this.__data__=new oi(s);this.size=a.size}function J1(){this.__data__=new oi,this.size=0}function tb(s){var a=this.__data__,c=a.delete(s);return this.size=a.size,c}function eb(s){return this.__data__.get(s)}function nb(s){return this.__data__.has(s)}function rb(s,a){var c=this.__data__;if(c instanceof oi){var p=c.__data__;if(!No||p.length<i-1)return p.push([s,a]),this.size=++c.size,this;c=this.__data__=new ai(p)}return c.set(s,a),this.size=c.size,this}Mr.prototype.clear=J1,Mr.prototype.delete=tb,Mr.prototype.get=eb,Mr.prototype.has=nb,Mr.prototype.set=rb;function tp(s,a){var c=ee(s),p=!c&&hs(s),y=!c&&!p&&Bi(s),E=!c&&!p&&!y&&Js(s),I=c||p||y||E,M=I?Eu(s.length,d1):[],H=M.length;for(var st in s)(a||Ee.call(s,st))&&!(I&&(st=="length"||y&&(st=="offset"||st=="parent")||E&&(st=="buffer"||st=="byteLength"||st=="byteOffset")||hi(st,H)))&&M.push(st);return M}function ep(s){var a=s.length;return a?s[qu(0,a-1)]:n}function ib(s,a){return Tl(Zn(s),as(a,0,s.length))}function sb(s){return Tl(Zn(s))}function Ru(s,a,c){(c!==n&&!Lr(s[a],c)||c===n&&!(a in s))&&li(s,a,c)}function qo(s,a,c){var p=s[a];(!(Ee.call(s,a)&&Lr(p,c))||c===n&&!(a in s))&&li(s,a,c)}function gl(s,a){for(var c=s.length;c--;)if(Lr(s[c][0],a))return c;return-1}function ob(s,a,c,p){return Fi(s,function(y,E,I){a(p,y,c(y),I)}),p}function np(s,a){return s&&zr(a,mn(a),s)}function ab(s,a){return s&&zr(a,Jn(a),s)}function li(s,a,c){a=="__proto__"&&cl?cl(s,a,{configurable:!0,enumerable:!0,value:c,writable:!0}):s[a]=c}function Du(s,a){for(var c=-1,p=a.length,y=X(p),E=s==null;++c<p;)y[c]=E?n:hh(s,a[c]);return y}function as(s,a,c){return s===s&&(c!==n&&(s=s<=c?s:c),a!==n&&(s=s>=a?s:a)),s}function xr(s,a,c,p,y,E){var I,M=a&b,H=a&k,st=a&S;if(c&&(I=y?c(s,p,y,E):c(s)),I!==n)return I;if(!Ge(s))return s;var at=ee(s);if(at){if(I=Yb(s),!M)return Zn(s,I)}else{var ht=Pn(s),Et=ht==Rr||ht==Zi;if(Bi(s))return kp(s,M);if(ht==an||ht==pn||Et&&!y){if(I=H||Et?{}:Gp(s),!M)return H?Vb(s,ab(I,s)):Fb(s,np(I,s))}else{if(!G[ht])return y?s:{};I=Qb(s,ht,M)}}E||(E=new Mr);var Ot=E.get(s);if(Ot)return Ot;E.set(s,I),bg(s)?s.forEach(function(Wt){I.add(xr(Wt,a,c,Wt,s,E))}):vg(s)&&s.forEach(function(Wt,le){I.set(le,xr(Wt,a,c,le,s,E))});var Gt=st?H?Zu:Qu:H?Jn:mn,ie=at?n:Gt(s);return yr(ie||s,function(Wt,le){ie&&(le=Wt,Wt=s[le]),qo(I,le,xr(Wt,a,c,le,s,E))}),I}function lb(s){var a=mn(s);return function(c){return rp(c,s,a)}}function rp(s,a,c){var p=c.length;if(s==null)return!p;for(s=De(s);p--;){var y=c[p],E=a[y],I=s[y];if(I===n&&!(y in s)||!E(I))return!1}return!0}function ip(s,a,c){if(typeof s!="function")throw new br(l);return jo(function(){s.apply(n,c)},a)}function Bo(s,a,c,p){var y=-1,E=Xa,I=!0,M=s.length,H=[],st=a.length;if(!M)return H;c&&(a=qe(a,ar(c))),p?(E=mu,I=!1):a.length>=i&&(E=Mo,I=!1,a=new os(a));t:for(;++y<M;){var at=s[y],ht=c==null?at:c(at);if(at=p||at!==0?at:0,I&&ht===ht){for(var Et=st;Et--;)if(a[Et]===ht)continue t;H.push(at)}else E(a,ht,p)||H.push(at)}return H}var Fi=Dp(Ur),sp=Dp(Pu,!0);function cb(s,a){var c=!0;return Fi(s,function(p,y,E){return c=!!a(p,y,E),c}),c}function _l(s,a,c){for(var p=-1,y=s.length;++p<y;){var E=s[p],I=a(E);if(I!=null&&(M===n?I===I&&!cr(I):c(I,M)))var M=I,H=E}return H}function ub(s,a,c,p){var y=s.length;for(c=re(c),c<0&&(c=-c>y?0:y+c),p=p===n||p>y?y:re(p),p<0&&(p+=y),p=c>p?0:xg(p);c<p;)s[c++]=a;return s}function op(s,a){var c=[];return Fi(s,function(p,y,E){a(p,y,E)&&c.push(p)}),c}function An(s,a,c,p,y){var E=-1,I=s.length;for(c||(c=Xb),y||(y=[]);++E<I;){var M=s[E];a>0&&c(M)?a>1?An(M,a-1,c,p,y):Mi(y,M):p||(y[y.length]=M)}return y}var Ou=Op(),ap=Op(!0);function Ur(s,a){return s&&Ou(s,a,mn)}function Pu(s,a){return s&&ap(s,a,mn)}function ml(s,a){return Pi(a,function(c){return fi(s[c])})}function ls(s,a){a=$i(a,s);for(var c=0,p=a.length;s!=null&&c<p;)s=s[Hr(a[c++])];return c&&c==p?s:n}function lp(s,a,c){var p=a(s);return ee(s)?p:Mi(p,c(s))}function Wn(s){return s==null?s===n?Wa:Dn:is&&is in De(s)?Wb(s):sw(s)}function Mu(s,a){return s>a}function hb(s,a){return s!=null&&Ee.call(s,a)}function fb(s,a){return s!=null&&a in De(s)}function db(s,a,c){return s>=On(a,c)&&s<hn(a,c)}function Lu(s,a,c){for(var p=c?mu:Xa,y=s[0].length,E=s.length,I=E,M=X(E),H=1/0,st=[];I--;){var at=s[I];I&&a&&(at=qe(at,ar(a))),H=On(at.length,H),M[I]=!c&&(a||y>=120&&at.length>=120)?new os(I&&at):n}at=s[0];var ht=-1,Et=M[0];t:for(;++ht<y&&st.length<H;){var Ot=at[ht],Gt=a?a(Ot):Ot;if(Ot=c||Ot!==0?Ot:0,!(Et?Mo(Et,Gt):p(st,Gt,c))){for(I=E;--I;){var ie=M[I];if(!(ie?Mo(ie,Gt):p(s[I],Gt,c)))continue t}Et&&Et.push(Gt),st.push(Ot)}}return st}function pb(s,a,c,p){return Ur(s,function(y,E,I){a(p,c(y),E,I)}),p}function Uo(s,a,c){a=$i(a,s),s=Yp(s,a);var p=s==null?s:s[Hr(Ar(a))];return p==null?n:or(p,s,c)}function cp(s){return Ye(s)&&Wn(s)==pn}function gb(s){return Ye(s)&&Wn(s)==ts}function _b(s){return Ye(s)&&Wn(s)==Mt}function zo(s,a,c,p,y){return s===a?!0:s==null||a==null||!Ye(s)&&!Ye(a)?s!==s&&a!==a:mb(s,a,c,p,zo,y)}function mb(s,a,c,p,y,E){var I=ee(s),M=ee(a),H=I?Jr:Pn(s),st=M?Jr:Pn(a);H=H==pn?an:H,st=st==pn?an:st;var at=H==an,ht=st==an,Et=H==st;if(Et&&Bi(s)){if(!Bi(a))return!1;I=!0,at=!1}if(Et&&!at)return E||(E=new Mr),I||Js(s)?Up(s,a,c,p,y,E):Hb(s,a,H,c,p,y,E);if(!(c&Q)){var Ot=at&&Ee.call(s,"__wrapped__"),Gt=ht&&Ee.call(a,"__wrapped__");if(Ot||Gt){var ie=Ot?s.value():s,Wt=Gt?a.value():a;return E||(E=new Mr),y(ie,Wt,c,p,E)}}return Et?(E||(E=new Mr),Gb(s,a,c,p,y,E)):!1}function vb(s){return Ye(s)&&Pn(s)==pe}function Nu(s,a,c,p){var y=c.length,E=y,I=!p;if(s==null)return!E;for(s=De(s);y--;){var M=c[y];if(I&&M[2]?M[1]!==s[M[0]]:!(M[0]in s))return!1}for(;++y<E;){M=c[y];var H=M[0],st=s[H],at=M[1];if(I&&M[2]){if(st===n&&!(H in s))return!1}else{var ht=new Mr;if(p)var Et=p(st,at,H,s,a,ht);if(!(Et===n?zo(at,st,Q|Z,p,ht):Et))return!1}}return!0}function up(s){if(!Ge(s)||tw(s))return!1;var a=fi(s)?v1:zn;return a.test(us(s))}function yb(s){return Ye(s)&&Wn(s)==Xi}function bb(s){return Ye(s)&&Pn(s)==sr}function wb(s){return Ye(s)&&Ml(s.length)&&!!qt[Wn(s)]}function hp(s){return typeof s=="function"?s:s==null?tr:typeof s=="object"?ee(s)?pp(s[0],s[1]):dp(s):Pg(s)}function Fu(s){if(!Wo(s))return A1(s);var a=[];for(var c in De(s))Ee.call(s,c)&&c!="constructor"&&a.push(c);return a}function xb(s){if(!Ge(s))return iw(s);var a=Wo(s),c=[];for(var p in s)p=="constructor"&&(a||!Ee.call(s,p))||c.push(p);return c}function Vu(s,a){return s<a}function fp(s,a){var c=-1,p=Xn(s)?X(s.length):[];return Fi(s,function(y,E,I){p[++c]=a(y,E,I)}),p}function dp(s){var a=Ju(s);return a.length==1&&a[0][2]?jp(a[0][0],a[0][1]):function(c){return c===s||Nu(c,s,a)}}function pp(s,a){return eh(s)&&Wp(a)?jp(Hr(s),a):function(c){var p=hh(c,s);return p===n&&p===a?fh(c,s):zo(a,p,Q|Z)}}function vl(s,a,c,p,y){s!==a&&Ou(a,function(E,I){if(y||(y=new Mr),Ge(E))Eb(s,a,I,c,vl,p,y);else{var M=p?p(rh(s,I),E,I+"",s,a,y):n;M===n&&(M=E),Ru(s,I,M)}},Jn)}function Eb(s,a,c,p,y,E,I){var M=rh(s,c),H=rh(a,c),st=I.get(H);if(st){Ru(s,c,st);return}var at=E?E(M,H,c+"",s,a,I):n,ht=at===n;if(ht){var Et=ee(H),Ot=!Et&&Bi(H),Gt=!Et&&!Ot&&Js(H);at=H,Et||Ot||Gt?ee(M)?at=M:Xe(M)?at=Zn(M):Ot?(ht=!1,at=kp(H,!0)):Gt?(ht=!1,at=Cp(H,!0)):at=[]:Ko(H)||hs(H)?(at=M,hs(M)?at=Eg(M):(!Ge(M)||fi(M))&&(at=Gp(H))):ht=!1}ht&&(I.set(H,at),y(at,H,p,E,I),I.delete(H)),Ru(s,c,at)}function gp(s,a){var c=s.length;if(c)return a+=a<0?c:0,hi(a,c)?s[a]:n}function _p(s,a,c){a.length?a=qe(a,function(E){return ee(E)?function(I){return ls(I,E.length===1?E[0]:E)}:E}):a=[tr];var p=-1;a=qe(a,ar(Ht()));var y=fp(s,function(E,I,M){var H=qe(a,function(st){return st(E)});return{criteria:H,index:++p,value:E}});return Qy(y,function(E,I){return Nb(E,I,c)})}function Ab(s,a){return mp(s,a,function(c,p){return fh(s,p)})}function mp(s,a,c){for(var p=-1,y=a.length,E={};++p<y;){var I=a[p],M=ls(s,I);c(M,I)&&Ho(E,$i(I,s),M)}return E}function Sb(s){return function(a){return ls(a,s)}}function $u(s,a,c,p){var y=p?Yy:Us,E=-1,I=a.length,M=s;for(s===a&&(a=Zn(a)),c&&(M=qe(s,ar(c)));++E<I;)for(var H=0,st=a[E],at=c?c(st):st;(H=y(M,at,H,p))>-1;)M!==s&&ll.call(M,H,1),ll.call(s,H,1);return s}function vp(s,a){for(var c=s?a.length:0,p=c-1;c--;){var y=a[c];if(c==p||y!==E){var E=y;hi(y)?ll.call(s,y,1):zu(s,y)}}return s}function qu(s,a){return s+hl(Xd()*(a-s+1))}function kb(s,a,c,p){for(var y=-1,E=hn(ul((a-s)/(c||1)),0),I=X(E);E--;)I[p?E:++y]=s,s+=c;return I}function Bu(s,a){var c="";if(!s||a<1||a>ir)return c;do a%2&&(c+=s),a=hl(a/2),a&&(s+=s);while(a);return c}function oe(s,a){return ih(Kp(s,a,tr),s+"")}function Cb(s){return ep(to(s))}function Tb(s,a){var c=to(s);return Tl(c,as(a,0,c.length))}function Ho(s,a,c,p){if(!Ge(s))return s;a=$i(a,s);for(var y=-1,E=a.length,I=E-1,M=s;M!=null&&++y<E;){var H=Hr(a[y]),st=c;if(H==="__proto__"||H==="constructor"||H==="prototype")return s;if(y!=I){var at=M[H];st=p?p(at,H,M):n,st===n&&(st=Ge(at)?at:hi(a[y+1])?[]:{})}qo(M,H,st),M=M[H]}return s}var yp=fl?function(s,a){return fl.set(s,a),s}:tr,Ib=cl?function(s,a){return cl(s,"toString",{configurable:!0,enumerable:!1,value:ph(a),writable:!0})}:tr;function Rb(s){return Tl(to(s))}function Er(s,a,c){var p=-1,y=s.length;a<0&&(a=-a>y?0:y+a),c=c>y?y:c,c<0&&(c+=y),y=a>c?0:c-a>>>0,a>>>=0;for(var E=X(y);++p<y;)E[p]=s[p+a];return E}function Db(s,a){var c;return Fi(s,function(p,y,E){return c=a(p,y,E),!c}),!!c}function yl(s,a,c){var p=0,y=s==null?p:s.length;if(typeof a=="number"&&a===a&&y<=fu){for(;p<y;){var E=p+y>>>1,I=s[E];I!==null&&!cr(I)&&(c?I<=a:I<a)?p=E+1:y=E}return y}return Uu(s,a,tr,c)}function Uu(s,a,c,p){var y=0,E=s==null?0:s.length;if(E===0)return 0;a=c(a);for(var I=a!==a,M=a===null,H=cr(a),st=a===n;y<E;){var at=hl((y+E)/2),ht=c(s[at]),Et=ht!==n,Ot=ht===null,Gt=ht===ht,ie=cr(ht);if(I)var Wt=p||Gt;else st?Wt=Gt&&(p||Et):M?Wt=Gt&&Et&&(p||!Ot):H?Wt=Gt&&Et&&!Ot&&(p||!ie):Ot||ie?Wt=!1:Wt=p?ht<=a:ht<a;Wt?y=at+1:E=at}return On(E,Ga)}function bp(s,a){for(var c=-1,p=s.length,y=0,E=[];++c<p;){var I=s[c],M=a?a(I):I;if(!c||!Lr(M,H)){var H=M;E[y++]=I===0?0:I}}return E}function wp(s){return typeof s=="number"?s:cr(s)?Ds:+s}function lr(s){if(typeof s=="string")return s;if(ee(s))return qe(s,lr)+"";if(cr(s))return Jd?Jd.call(s):"";var a=s+"";return a=="0"&&1/s==-on?"-0":a}function Vi(s,a,c){var p=-1,y=Xa,E=s.length,I=!0,M=[],H=M;if(c)I=!1,y=mu;else if(E>=i){var st=a?null:Ub(s);if(st)return tl(st);I=!1,y=Mo,H=new os}else H=a?[]:M;t:for(;++p<E;){var at=s[p],ht=a?a(at):at;if(at=c||at!==0?at:0,I&&ht===ht){for(var Et=H.length;Et--;)if(H[Et]===ht)continue t;a&&H.push(ht),M.push(at)}else y(H,ht,c)||(H!==M&&H.push(ht),M.push(at))}return M}function zu(s,a){return a=$i(a,s),s=Yp(s,a),s==null||delete s[Hr(Ar(a))]}function xp(s,a,c,p){return Ho(s,a,c(ls(s,a)),p)}function bl(s,a,c,p){for(var y=s.length,E=p?y:-1;(p?E--:++E<y)&&a(s[E],E,s););return c?Er(s,p?0:E,p?E+1:y):Er(s,p?E+1:0,p?y:E)}function Ep(s,a){var c=s;return c instanceof ce&&(c=c.value()),vu(a,function(p,y){return y.func.apply(y.thisArg,Mi([p],y.args))},c)}function Hu(s,a,c){var p=s.length;if(p<2)return p?Vi(s[0]):[];for(var y=-1,E=X(p);++y<p;)for(var I=s[y],M=-1;++M<p;)M!=y&&(E[y]=Bo(E[y]||I,s[M],a,c));return Vi(An(E,1),a,c)}function Ap(s,a,c){for(var p=-1,y=s.length,E=a.length,I={};++p<y;){var M=p<E?a[p]:n;c(I,s[p],M)}return I}function Gu(s){return Xe(s)?s:[]}function Wu(s){return typeof s=="function"?s:tr}function $i(s,a){return ee(s)?s:eh(s,a)?[s]:Jp(be(s))}var Ob=oe;function qi(s,a,c){var p=s.length;return c=c===n?p:c,!a&&c>=p?s:Er(s,a,c)}var Sp=y1||function(s){return He.clearTimeout(s)};function kp(s,a){if(a)return s.slice();var c=s.length,p=jd?jd(c):new s.constructor(c);return s.copy(p),p}function ju(s){var a=new s.constructor(s.byteLength);return new ol(a).set(new ol(s)),a}function Pb(s,a){var c=a?ju(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.byteLength)}function Mb(s){var a=new s.constructor(s.source,Oo.exec(s));return a.lastIndex=s.lastIndex,a}function Lb(s){return $o?De($o.call(s)):{}}function Cp(s,a){var c=a?ju(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.length)}function Tp(s,a){if(s!==a){var c=s!==n,p=s===null,y=s===s,E=cr(s),I=a!==n,M=a===null,H=a===a,st=cr(a);if(!M&&!st&&!E&&s>a||E&&I&&H&&!M&&!st||p&&I&&H||!c&&H||!y)return 1;if(!p&&!E&&!st&&s<a||st&&c&&y&&!p&&!E||M&&c&&y||!I&&y||!H)return-1}return 0}function Nb(s,a,c){for(var p=-1,y=s.criteria,E=a.criteria,I=y.length,M=c.length;++p<I;){var H=Tp(y[p],E[p]);if(H){if(p>=M)return H;var st=c[p];return H*(st=="desc"?-1:1)}}return s.index-a.index}function Ip(s,a,c,p){for(var y=-1,E=s.length,I=c.length,M=-1,H=a.length,st=hn(E-I,0),at=X(H+st),ht=!p;++M<H;)at[M]=a[M];for(;++y<I;)(ht||y<E)&&(at[c[y]]=s[y]);for(;st--;)at[M++]=s[y++];return at}function Rp(s,a,c,p){for(var y=-1,E=s.length,I=-1,M=c.length,H=-1,st=a.length,at=hn(E-M,0),ht=X(at+st),Et=!p;++y<at;)ht[y]=s[y];for(var Ot=y;++H<st;)ht[Ot+H]=a[H];for(;++I<M;)(Et||y<E)&&(ht[Ot+c[I]]=s[y++]);return ht}function Zn(s,a){var c=-1,p=s.length;for(a||(a=X(p));++c<p;)a[c]=s[c];return a}function zr(s,a,c,p){var y=!c;c||(c={});for(var E=-1,I=a.length;++E<I;){var M=a[E],H=p?p(c[M],s[M],M,c,s):n;H===n&&(H=s[M]),y?li(c,M,H):qo(c,M,H)}return c}function Fb(s,a){return zr(s,th(s),a)}function Vb(s,a){return zr(s,zp(s),a)}function wl(s,a){return function(c,p){var y=ee(c)?zy:ob,E=a?a():{};return y(c,s,Ht(p,2),E)}}function Qs(s){return oe(function(a,c){var p=-1,y=c.length,E=y>1?c[y-1]:n,I=y>2?c[2]:n;for(E=s.length>3&&typeof E=="function"?(y--,E):n,I&&jn(c[0],c[1],I)&&(E=y<3?n:E,y=1),a=De(a);++p<y;){var M=c[p];M&&s(a,M,p,E)}return a})}function Dp(s,a){return function(c,p){if(c==null)return c;if(!Xn(c))return s(c,p);for(var y=c.length,E=a?y:-1,I=De(c);(a?E--:++E<y)&&p(I[E],E,I)!==!1;);return c}}function Op(s){return function(a,c,p){for(var y=-1,E=De(a),I=p(a),M=I.length;M--;){var H=I[s?M:++y];if(c(E[H],H,E)===!1)break}return a}}function $b(s,a,c){var p=a&tt,y=Go(s);function E(){var I=this&&this!==He&&this instanceof E?y:s;return I.apply(p?c:this,arguments)}return E}function Pp(s){return function(a){a=be(a);var c=zs(a)?Pr(a):n,p=c?c[0]:a.charAt(0),y=c?qi(c,1).join(""):a.slice(1);return p[s]()+y}}function Zs(s){return function(a){return vu(Dg(Rg(a).replace(Qt,"")),s,"")}}function Go(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var c=Ys(s.prototype),p=s.apply(c,a);return Ge(p)?p:c}}function qb(s,a,c){var p=Go(s);function y(){for(var E=arguments.length,I=X(E),M=E,H=Xs(y);M--;)I[M]=arguments[M];var st=E<3&&I[0]!==H&&I[E-1]!==H?[]:Li(I,H);if(E-=st.length,E<c)return Vp(s,a,xl,y.placeholder,n,I,st,n,n,c-E);var at=this&&this!==He&&this instanceof y?p:s;return or(at,this,I)}return y}function Mp(s){return function(a,c,p){var y=De(a);if(!Xn(a)){var E=Ht(c,3);a=mn(a),c=function(M){return E(y[M],M,y)}}var I=s(a,c,p);return I>-1?y[E?a[I]:I]:n}}function Lp(s){return ui(function(a){var c=a.length,p=c,y=wr.prototype.thru;for(s&&a.reverse();p--;){var E=a[p];if(typeof E!="function")throw new br(l);if(y&&!I&&kl(E)=="wrapper")var I=new wr([],!0)}for(p=I?p:c;++p<c;){E=a[p];var M=kl(E),H=M=="wrapper"?Xu(E):n;H&&nh(H[0])&&H[1]==(Yt|yt|Vt|we)&&!H[4].length&&H[9]==1?I=I[kl(H[0])].apply(I,H[3]):I=E.length==1&&nh(E)?I[M]():I.thru(E)}return function(){var st=arguments,at=st[0];if(I&&st.length==1&&ee(at))return I.plant(at).value();for(var ht=0,Et=c?a[ht].apply(this,st):at;++ht<c;)Et=a[ht].call(this,Et);return Et}})}function xl(s,a,c,p,y,E,I,M,H,st){var at=a&Yt,ht=a&tt,Et=a&ut,Ot=a&(yt|wt),Gt=a&Ue,ie=Et?n:Go(s);function Wt(){for(var le=arguments.length,ue=X(le),ur=le;ur--;)ue[ur]=arguments[ur];if(Ot)var Kn=Xs(Wt),hr=Xy(ue,Kn);if(p&&(ue=Ip(ue,p,y,Ot)),E&&(ue=Rp(ue,E,I,Ot)),le-=hr,Ot&&le<st){var Je=Li(ue,Kn);return Vp(s,a,xl,Wt.placeholder,c,ue,Je,M,H,st-le)}var Nr=ht?c:this,pi=Et?Nr[s]:s;return le=ue.length,M?ue=ow(ue,M):Gt&&le>1&&ue.reverse(),at&&H<le&&(ue.length=H),this&&this!==He&&this instanceof Wt&&(pi=ie||Go(pi)),pi.apply(Nr,ue)}return Wt}function Np(s,a){return function(c,p){return pb(c,s,a(p),{})}}function El(s,a){return function(c,p){var y;if(c===n&&p===n)return a;if(c!==n&&(y=c),p!==n){if(y===n)return p;typeof c=="string"||typeof p=="string"?(c=lr(c),p=lr(p)):(c=wp(c),p=wp(p)),y=s(c,p)}return y}}function Ku(s){return ui(function(a){return a=qe(a,ar(Ht())),oe(function(c){var p=this;return s(a,function(y){return or(y,p,c)})})})}function Al(s,a){a=a===n?" ":lr(a);var c=a.length;if(c<2)return c?Bu(a,s):a;var p=Bu(a,ul(s/Hs(a)));return zs(a)?qi(Pr(p),0,s).join(""):p.slice(0,s)}function Bb(s,a,c,p){var y=a&tt,E=Go(s);function I(){for(var M=-1,H=arguments.length,st=-1,at=p.length,ht=X(at+H),Et=this&&this!==He&&this instanceof I?E:s;++st<at;)ht[st]=p[st];for(;H--;)ht[st++]=arguments[++M];return or(Et,y?c:this,ht)}return I}function Fp(s){return function(a,c,p){return p&&typeof p!="number"&&jn(a,c,p)&&(c=p=n),a=di(a),c===n?(c=a,a=0):c=di(c),p=p===n?a<c?1:-1:di(p),kb(a,c,p,s)}}function Sl(s){return function(a,c){return typeof a=="string"&&typeof c=="string"||(a=Sr(a),c=Sr(c)),s(a,c)}}function Vp(s,a,c,p,y,E,I,M,H,st){var at=a&yt,ht=at?I:n,Et=at?n:I,Ot=at?E:n,Gt=at?n:E;a|=at?Vt:_t,a&=~(at?_t:Vt),a&rt||(a&=~(tt|ut));var ie=[s,a,y,Ot,ht,Gt,Et,M,H,st],Wt=c.apply(n,ie);return nh(s)&&Qp(Wt,ie),Wt.placeholder=p,Zp(Wt,s,a)}function Yu(s){var a=un[s];return function(c,p){if(c=Sr(c),p=p==null?0:On(re(p),292),p&&Zd(c)){var y=(be(c)+"e").split("e"),E=a(y[0]+"e"+(+y[1]+p));return y=(be(E)+"e").split("e"),+(y[0]+"e"+(+y[1]-p))}return a(c)}}var Ub=js&&1/tl(new js([,-0]))[1]==on?function(s){return new js(s)}:mh;function $p(s){return function(a){var c=Pn(a);return c==pe?Su(a):c==sr?s1(a):Zy(a,s(a))}}function ci(s,a,c,p,y,E,I,M){var H=a&ut;if(!H&&typeof s!="function")throw new br(l);var st=p?p.length:0;if(st||(a&=~(Vt|_t),p=y=n),I=I===n?I:hn(re(I),0),M=M===n?M:re(M),st-=y?y.length:0,a&_t){var at=p,ht=y;p=y=n}var Et=H?n:Xu(s),Ot=[s,a,c,p,y,at,ht,E,I,M];if(Et&&rw(Ot,Et),s=Ot[0],a=Ot[1],c=Ot[2],p=Ot[3],y=Ot[4],M=Ot[9]=Ot[9]===n?H?0:s.length:hn(Ot[9]-st,0),!M&&a&(yt|wt)&&(a&=~(yt|wt)),!a||a==tt)var Gt=$b(s,a,c);else a==yt||a==wt?Gt=qb(s,a,M):(a==Vt||a==(tt|Vt))&&!y.length?Gt=Bb(s,a,c,p):Gt=xl.apply(n,Ot);var ie=Et?yp:Qp;return Zp(ie(Gt,Ot),s,a)}function qp(s,a,c,p){return s===n||Lr(s,Ws[c])&&!Ee.call(p,c)?a:s}function Bp(s,a,c,p,y,E){return Ge(s)&&Ge(a)&&(E.set(a,s),vl(s,a,n,Bp,E),E.delete(a)),s}function zb(s){return Ko(s)?n:s}function Up(s,a,c,p,y,E){var I=c&Q,M=s.length,H=a.length;if(M!=H&&!(I&&H>M))return!1;var st=E.get(s),at=E.get(a);if(st&&at)return st==a&&at==s;var ht=-1,Et=!0,Ot=c&Z?new os:n;for(E.set(s,a),E.set(a,s);++ht<M;){var Gt=s[ht],ie=a[ht];if(p)var Wt=I?p(ie,Gt,ht,a,s,E):p(Gt,ie,ht,s,a,E);if(Wt!==n){if(Wt)continue;Et=!1;break}if(Ot){if(!yu(a,function(le,ue){if(!Mo(Ot,ue)&&(Gt===le||y(Gt,le,c,p,E)))return Ot.push(ue)})){Et=!1;break}}else if(!(Gt===ie||y(Gt,ie,c,p,E))){Et=!1;break}}return E.delete(s),E.delete(a),Et}function Hb(s,a,c,p,y,E,I){switch(c){case Me:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case ts:return!(s.byteLength!=a.byteLength||!E(new ol(s),new ol(a)));case Si:case Mt:case ki:return Lr(+s,+a);case gn:return s.name==a.name&&s.message==a.message;case Xi:case ti:return s==a+"";case pe:var M=Su;case sr:var H=p&Q;if(M||(M=tl),s.size!=a.size&&!H)return!1;var st=I.get(s);if(st)return st==a;p|=Z,I.set(s,a);var at=Up(M(s),M(a),p,y,E,I);return I.delete(s),at;case Ji:if($o)return $o.call(s)==$o.call(a)}return!1}function Gb(s,a,c,p,y,E){var I=c&Q,M=Qu(s),H=M.length,st=Qu(a),at=st.length;if(H!=at&&!I)return!1;for(var ht=H;ht--;){var Et=M[ht];if(!(I?Et in a:Ee.call(a,Et)))return!1}var Ot=E.get(s),Gt=E.get(a);if(Ot&&Gt)return Ot==a&&Gt==s;var ie=!0;E.set(s,a),E.set(a,s);for(var Wt=I;++ht<H;){Et=M[ht];var le=s[Et],ue=a[Et];if(p)var ur=I?p(ue,le,Et,a,s,E):p(le,ue,Et,s,a,E);if(!(ur===n?le===ue||y(le,ue,c,p,E):ur)){ie=!1;break}Wt||(Wt=Et=="constructor")}if(ie&&!Wt){var Kn=s.constructor,hr=a.constructor;Kn!=hr&&"constructor"in s&&"constructor"in a&&!(typeof Kn=="function"&&Kn instanceof Kn&&typeof hr=="function"&&hr instanceof hr)&&(ie=!1)}return E.delete(s),E.delete(a),ie}function ui(s){return ih(Kp(s,n,rg),s+"")}function Qu(s){return lp(s,mn,th)}function Zu(s){return lp(s,Jn,zp)}var Xu=fl?function(s){return fl.get(s)}:mh;function kl(s){for(var a=s.name+"",c=Ks[a],p=Ee.call(Ks,a)?c.length:0;p--;){var y=c[p],E=y.func;if(E==null||E==s)return y.name}return a}function Xs(s){var a=Ee.call(w,"placeholder")?w:s;return a.placeholder}function Ht(){var s=w.iteratee||gh;return s=s===gh?hp:s,arguments.length?s(arguments[0],arguments[1]):s}function Cl(s,a){var c=s.__data__;return Jb(a)?c[typeof a=="string"?"string":"hash"]:c.map}function Ju(s){for(var a=mn(s),c=a.length;c--;){var p=a[c],y=s[p];a[c]=[p,y,Wp(y)]}return a}function cs(s,a){var c=n1(s,a);return up(c)?c:n}function Wb(s){var a=Ee.call(s,is),c=s[is];try{s[is]=n;var p=!0}catch{}var y=il.call(s);return p&&(a?s[is]=c:delete s[is]),y}var th=Cu?function(s){return s==null?[]:(s=De(s),Pi(Cu(s),function(a){return Yd.call(s,a)}))}:vh,zp=Cu?function(s){for(var a=[];s;)Mi(a,th(s)),s=al(s);return a}:vh,Pn=Wn;(Tu&&Pn(new Tu(new ArrayBuffer(1)))!=Me||No&&Pn(new No)!=pe||Iu&&Pn(Iu.resolve())!=_n||js&&Pn(new js)!=sr||Fo&&Pn(new Fo)!=ei)&&(Pn=function(s){var a=Wn(s),c=a==an?s.constructor:n,p=c?us(c):"";if(p)switch(p){case T1:return Me;case I1:return pe;case R1:return _n;case D1:return sr;case O1:return ei}return a});function jb(s,a,c){for(var p=-1,y=c.length;++p<y;){var E=c[p],I=E.size;switch(E.type){case"drop":s+=I;break;case"dropRight":a-=I;break;case"take":a=On(a,s+I);break;case"takeRight":s=hn(s,a-I);break}}return{start:s,end:a}}function Kb(s){var a=s.match(Za);return a?a[1].split(pu):[]}function Hp(s,a,c){a=$i(a,s);for(var p=-1,y=a.length,E=!1;++p<y;){var I=Hr(a[p]);if(!(E=s!=null&&c(s,I)))break;s=s[I]}return E||++p!=y?E:(y=s==null?0:s.length,!!y&&Ml(y)&&hi(I,y)&&(ee(s)||hs(s)))}function Yb(s){var a=s.length,c=new s.constructor(a);return a&&typeof s[0]=="string"&&Ee.call(s,"index")&&(c.index=s.index,c.input=s.input),c}function Gp(s){return typeof s.constructor=="function"&&!Wo(s)?Ys(al(s)):{}}function Qb(s,a,c){var p=s.constructor;switch(a){case ts:return ju(s);case Si:case Mt:return new p(+s);case Me:return Pb(s,c);case Ro:case Dr:case en:case ni:case ri:case Ci:case es:case ii:case Bn:return Cp(s,c);case pe:return new p;case ki:case ti:return new p(s);case Xi:return Mb(s);case sr:return new p;case Ji:return Lb(s)}}function Zb(s,a){var c=a.length;if(!c)return s;var p=c-1;return a[p]=(c>1?"& ":"")+a[p],a=a.join(c>2?", ":" "),s.replace(Qa,`{
/* [wrapped with `+a+`] */
`)}function Xb(s){return ee(s)||hs(s)||!!(Qd&&s&&s[Qd])}function hi(s,a){var c=typeof s;return a=a??ir,!!a&&(c=="number"||c!="symbol"&&g.test(s))&&s>-1&&s%1==0&&s<a}function jn(s,a,c){if(!Ge(c))return!1;var p=typeof a;return(p=="number"?Xn(c)&&hi(a,c.length):p=="string"&&a in c)?Lr(c[a],s):!1}function eh(s,a){if(ee(s))return!1;var c=typeof s;return c=="number"||c=="symbol"||c=="boolean"||s==null||cr(s)?!0:Le.test(s)||!Ri.test(s)||a!=null&&s in De(a)}function Jb(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function nh(s){var a=kl(s),c=w[a];if(typeof c!="function"||!(a in ce.prototype))return!1;if(s===c)return!0;var p=Xu(c);return!!p&&s===p[0]}function tw(s){return!!Wd&&Wd in s}var ew=nl?fi:yh;function Wo(s){var a=s&&s.constructor,c=typeof a=="function"&&a.prototype||Ws;return s===c}function Wp(s){return s===s&&!Ge(s)}function jp(s,a){return function(c){return c==null?!1:c[s]===a&&(a!==n||s in De(c))}}function nw(s){var a=Ol(s,function(p){return c.size===d&&c.clear(),p}),c=a.cache;return a}function rw(s,a){var c=s[1],p=a[1],y=c|p,E=y<(tt|ut|Yt),I=p==Yt&&c==yt||p==Yt&&c==we&&s[7].length<=a[8]||p==(Yt|we)&&a[7].length<=a[8]&&c==yt;if(!(E||I))return s;p&tt&&(s[2]=a[2],y|=c&tt?0:rt);var M=a[3];if(M){var H=s[3];s[3]=H?Ip(H,M,a[4]):M,s[4]=H?Li(s[3],v):a[4]}return M=a[5],M&&(H=s[5],s[5]=H?Rp(H,M,a[6]):M,s[6]=H?Li(s[5],v):a[6]),M=a[7],M&&(s[7]=M),p&Yt&&(s[8]=s[8]==null?a[8]:On(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=y,s}function iw(s){var a=[];if(s!=null)for(var c in De(s))a.push(c);return a}function sw(s){return il.call(s)}function Kp(s,a,c){return a=hn(a===n?s.length-1:a,0),function(){for(var p=arguments,y=-1,E=hn(p.length-a,0),I=X(E);++y<E;)I[y]=p[a+y];y=-1;for(var M=X(a+1);++y<a;)M[y]=p[y];return M[a]=c(I),or(s,this,M)}}function Yp(s,a){return a.length<2?s:ls(s,Er(a,0,-1))}function ow(s,a){for(var c=s.length,p=On(a.length,c),y=Zn(s);p--;){var E=a[p];s[p]=hi(E,c)?y[E]:n}return s}function rh(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var Qp=Xp(yp),jo=w1||function(s,a){return He.setTimeout(s,a)},ih=Xp(Ib);function Zp(s,a,c){var p=a+"";return ih(s,Zb(p,aw(Kb(p),c)))}function Xp(s){var a=0,c=0;return function(){var p=S1(),y=gr-(p-c);if(c=p,y>0){if(++a>=pr)return arguments[0]}else a=0;return s.apply(n,arguments)}}function Tl(s,a){var c=-1,p=s.length,y=p-1;for(a=a===n?p:a;++c<a;){var E=qu(c,y),I=s[E];s[E]=s[c],s[c]=I}return s.length=a,s}var Jp=nw(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(Ka,function(c,p,y,E){a.push(y?E.replace(Fs,"$1"):p||c)}),a});function Hr(s){if(typeof s=="string"||cr(s))return s;var a=s+"";return a=="0"&&1/s==-on?"-0":a}function us(s){if(s!=null){try{return rl.call(s)}catch{}try{return s+""}catch{}}return""}function aw(s,a){return yr(Ai,function(c){var p="_."+c[0];a&c[1]&&!Xa(s,p)&&s.push(p)}),s.sort()}function tg(s){if(s instanceof ce)return s.clone();var a=new wr(s.__wrapped__,s.__chain__);return a.__actions__=Zn(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function lw(s,a,c){(c?jn(s,a,c):a===n)?a=1:a=hn(re(a),0);var p=s==null?0:s.length;if(!p||a<1)return[];for(var y=0,E=0,I=X(ul(p/a));y<p;)I[E++]=Er(s,y,y+=a);return I}function cw(s){for(var a=-1,c=s==null?0:s.length,p=0,y=[];++a<c;){var E=s[a];E&&(y[p++]=E)}return y}function uw(){var s=arguments.length;if(!s)return[];for(var a=X(s-1),c=arguments[0],p=s;p--;)a[p-1]=arguments[p];return Mi(ee(c)?Zn(c):[c],An(a,1))}var hw=oe(function(s,a){return Xe(s)?Bo(s,An(a,1,Xe,!0)):[]}),fw=oe(function(s,a){var c=Ar(a);return Xe(c)&&(c=n),Xe(s)?Bo(s,An(a,1,Xe,!0),Ht(c,2)):[]}),dw=oe(function(s,a){var c=Ar(a);return Xe(c)&&(c=n),Xe(s)?Bo(s,An(a,1,Xe,!0),n,c):[]});function pw(s,a,c){var p=s==null?0:s.length;return p?(a=c||a===n?1:re(a),Er(s,a<0?0:a,p)):[]}function gw(s,a,c){var p=s==null?0:s.length;return p?(a=c||a===n?1:re(a),a=p-a,Er(s,0,a<0?0:a)):[]}function _w(s,a){return s&&s.length?bl(s,Ht(a,3),!0,!0):[]}function mw(s,a){return s&&s.length?bl(s,Ht(a,3),!0):[]}function vw(s,a,c,p){var y=s==null?0:s.length;return y?(c&&typeof c!="number"&&jn(s,a,c)&&(c=0,p=y),ub(s,a,c,p)):[]}function eg(s,a,c){var p=s==null?0:s.length;if(!p)return-1;var y=c==null?0:re(c);return y<0&&(y=hn(p+y,0)),Ja(s,Ht(a,3),y)}function ng(s,a,c){var p=s==null?0:s.length;if(!p)return-1;var y=p-1;return c!==n&&(y=re(c),y=c<0?hn(p+y,0):On(y,p-1)),Ja(s,Ht(a,3),y,!0)}function rg(s){var a=s==null?0:s.length;return a?An(s,1):[]}function yw(s){var a=s==null?0:s.length;return a?An(s,on):[]}function bw(s,a){var c=s==null?0:s.length;return c?(a=a===n?1:re(a),An(s,a)):[]}function ww(s){for(var a=-1,c=s==null?0:s.length,p={};++a<c;){var y=s[a];p[y[0]]=y[1]}return p}function ig(s){return s&&s.length?s[0]:n}function xw(s,a,c){var p=s==null?0:s.length;if(!p)return-1;var y=c==null?0:re(c);return y<0&&(y=hn(p+y,0)),Us(s,a,y)}function Ew(s){var a=s==null?0:s.length;return a?Er(s,0,-1):[]}var Aw=oe(function(s){var a=qe(s,Gu);return a.length&&a[0]===s[0]?Lu(a):[]}),Sw=oe(function(s){var a=Ar(s),c=qe(s,Gu);return a===Ar(c)?a=n:c.pop(),c.length&&c[0]===s[0]?Lu(c,Ht(a,2)):[]}),kw=oe(function(s){var a=Ar(s),c=qe(s,Gu);return a=typeof a=="function"?a:n,a&&c.pop(),c.length&&c[0]===s[0]?Lu(c,n,a):[]});function Cw(s,a){return s==null?"":E1.call(s,a)}function Ar(s){var a=s==null?0:s.length;return a?s[a-1]:n}function Tw(s,a,c){var p=s==null?0:s.length;if(!p)return-1;var y=p;return c!==n&&(y=re(c),y=y<0?hn(p+y,0):On(y,p-1)),a===a?a1(s,a,y):Ja(s,Vd,y,!0)}function Iw(s,a){return s&&s.length?gp(s,re(a)):n}var Rw=oe(sg);function sg(s,a){return s&&s.length&&a&&a.length?$u(s,a):s}function Dw(s,a,c){return s&&s.length&&a&&a.length?$u(s,a,Ht(c,2)):s}function Ow(s,a,c){return s&&s.length&&a&&a.length?$u(s,a,n,c):s}var Pw=ui(function(s,a){var c=s==null?0:s.length,p=Du(s,a);return vp(s,qe(a,function(y){return hi(y,c)?+y:y}).sort(Tp)),p});function Mw(s,a){var c=[];if(!(s&&s.length))return c;var p=-1,y=[],E=s.length;for(a=Ht(a,3);++p<E;){var I=s[p];a(I,p,s)&&(c.push(I),y.push(p))}return vp(s,y),c}function sh(s){return s==null?s:C1.call(s)}function Lw(s,a,c){var p=s==null?0:s.length;return p?(c&&typeof c!="number"&&jn(s,a,c)?(a=0,c=p):(a=a==null?0:re(a),c=c===n?p:re(c)),Er(s,a,c)):[]}function Nw(s,a){return yl(s,a)}function Fw(s,a,c){return Uu(s,a,Ht(c,2))}function Vw(s,a){var c=s==null?0:s.length;if(c){var p=yl(s,a);if(p<c&&Lr(s[p],a))return p}return-1}function $w(s,a){return yl(s,a,!0)}function qw(s,a,c){return Uu(s,a,Ht(c,2),!0)}function Bw(s,a){var c=s==null?0:s.length;if(c){var p=yl(s,a,!0)-1;if(Lr(s[p],a))return p}return-1}function Uw(s){return s&&s.length?bp(s):[]}function zw(s,a){return s&&s.length?bp(s,Ht(a,2)):[]}function Hw(s){var a=s==null?0:s.length;return a?Er(s,1,a):[]}function Gw(s,a,c){return s&&s.length?(a=c||a===n?1:re(a),Er(s,0,a<0?0:a)):[]}function Ww(s,a,c){var p=s==null?0:s.length;return p?(a=c||a===n?1:re(a),a=p-a,Er(s,a<0?0:a,p)):[]}function jw(s,a){return s&&s.length?bl(s,Ht(a,3),!1,!0):[]}function Kw(s,a){return s&&s.length?bl(s,Ht(a,3)):[]}var Yw=oe(function(s){return Vi(An(s,1,Xe,!0))}),Qw=oe(function(s){var a=Ar(s);return Xe(a)&&(a=n),Vi(An(s,1,Xe,!0),Ht(a,2))}),Zw=oe(function(s){var a=Ar(s);return a=typeof a=="function"?a:n,Vi(An(s,1,Xe,!0),n,a)});function Xw(s){return s&&s.length?Vi(s):[]}function Jw(s,a){return s&&s.length?Vi(s,Ht(a,2)):[]}function tx(s,a){return a=typeof a=="function"?a:n,s&&s.length?Vi(s,n,a):[]}function oh(s){if(!(s&&s.length))return[];var a=0;return s=Pi(s,function(c){if(Xe(c))return a=hn(c.length,a),!0}),Eu(a,function(c){return qe(s,bu(c))})}function og(s,a){if(!(s&&s.length))return[];var c=oh(s);return a==null?c:qe(c,function(p){return or(a,n,p)})}var ex=oe(function(s,a){return Xe(s)?Bo(s,a):[]}),nx=oe(function(s){return Hu(Pi(s,Xe))}),rx=oe(function(s){var a=Ar(s);return Xe(a)&&(a=n),Hu(Pi(s,Xe),Ht(a,2))}),ix=oe(function(s){var a=Ar(s);return a=typeof a=="function"?a:n,Hu(Pi(s,Xe),n,a)}),sx=oe(oh);function ox(s,a){return Ap(s||[],a||[],qo)}function ax(s,a){return Ap(s||[],a||[],Ho)}var lx=oe(function(s){var a=s.length,c=a>1?s[a-1]:n;return c=typeof c=="function"?(s.pop(),c):n,og(s,c)});function ag(s){var a=w(s);return a.__chain__=!0,a}function cx(s,a){return a(s),s}function Il(s,a){return a(s)}var ux=ui(function(s){var a=s.length,c=a?s[0]:0,p=this.__wrapped__,y=function(E){return Du(E,s)};return a>1||this.__actions__.length||!(p instanceof ce)||!hi(c)?this.thru(y):(p=p.slice(c,+c+(a?1:0)),p.__actions__.push({func:Il,args:[y],thisArg:n}),new wr(p,this.__chain__).thru(function(E){return a&&!E.length&&E.push(n),E}))});function hx(){return ag(this)}function fx(){return new wr(this.value(),this.__chain__)}function dx(){this.__values__===n&&(this.__values__=wg(this.value()));var s=this.__index__>=this.__values__.length,a=s?n:this.__values__[this.__index__++];return{done:s,value:a}}function px(){return this}function gx(s){for(var a,c=this;c instanceof pl;){var p=tg(c);p.__index__=0,p.__values__=n,a?y.__wrapped__=p:a=p;var y=p;c=c.__wrapped__}return y.__wrapped__=s,a}function _x(){var s=this.__wrapped__;if(s instanceof ce){var a=s;return this.__actions__.length&&(a=new ce(this)),a=a.reverse(),a.__actions__.push({func:Il,args:[sh],thisArg:n}),new wr(a,this.__chain__)}return this.thru(sh)}function mx(){return Ep(this.__wrapped__,this.__actions__)}var vx=wl(function(s,a,c){Ee.call(s,c)?++s[c]:li(s,c,1)});function yx(s,a,c){var p=ee(s)?Nd:cb;return c&&jn(s,a,c)&&(a=n),p(s,Ht(a,3))}function bx(s,a){var c=ee(s)?Pi:op;return c(s,Ht(a,3))}var wx=Mp(eg),xx=Mp(ng);function Ex(s,a){return An(Rl(s,a),1)}function Ax(s,a){return An(Rl(s,a),on)}function Sx(s,a,c){return c=c===n?1:re(c),An(Rl(s,a),c)}function lg(s,a){var c=ee(s)?yr:Fi;return c(s,Ht(a,3))}function cg(s,a){var c=ee(s)?Hy:sp;return c(s,Ht(a,3))}var kx=wl(function(s,a,c){Ee.call(s,c)?s[c].push(a):li(s,c,[a])});function Cx(s,a,c,p){s=Xn(s)?s:to(s),c=c&&!p?re(c):0;var y=s.length;return c<0&&(c=hn(y+c,0)),Ll(s)?c<=y&&s.indexOf(a,c)>-1:!!y&&Us(s,a,c)>-1}var Tx=oe(function(s,a,c){var p=-1,y=typeof a=="function",E=Xn(s)?X(s.length):[];return Fi(s,function(I){E[++p]=y?or(a,I,c):Uo(I,a,c)}),E}),Ix=wl(function(s,a,c){li(s,c,a)});function Rl(s,a){var c=ee(s)?qe:fp;return c(s,Ht(a,3))}function Rx(s,a,c,p){return s==null?[]:(ee(a)||(a=a==null?[]:[a]),c=p?n:c,ee(c)||(c=c==null?[]:[c]),_p(s,a,c))}var Dx=wl(function(s,a,c){s[c?0:1].push(a)},function(){return[[],[]]});function Ox(s,a,c){var p=ee(s)?vu:qd,y=arguments.length<3;return p(s,Ht(a,4),c,y,Fi)}function Px(s,a,c){var p=ee(s)?Gy:qd,y=arguments.length<3;return p(s,Ht(a,4),c,y,sp)}function Mx(s,a){var c=ee(s)?Pi:op;return c(s,Pl(Ht(a,3)))}function Lx(s){var a=ee(s)?ep:Cb;return a(s)}function Nx(s,a,c){(c?jn(s,a,c):a===n)?a=1:a=re(a);var p=ee(s)?ib:Tb;return p(s,a)}function Fx(s){var a=ee(s)?sb:Rb;return a(s)}function Vx(s){if(s==null)return 0;if(Xn(s))return Ll(s)?Hs(s):s.length;var a=Pn(s);return a==pe||a==sr?s.size:Fu(s).length}function $x(s,a,c){var p=ee(s)?yu:Db;return c&&jn(s,a,c)&&(a=n),p(s,Ht(a,3))}var qx=oe(function(s,a){if(s==null)return[];var c=a.length;return c>1&&jn(s,a[0],a[1])?a=[]:c>2&&jn(a[0],a[1],a[2])&&(a=[a[0]]),_p(s,An(a,1),[])}),Dl=b1||function(){return He.Date.now()};function Bx(s,a){if(typeof a!="function")throw new br(l);return s=re(s),function(){if(--s<1)return a.apply(this,arguments)}}function ug(s,a,c){return a=c?n:a,a=s&&a==null?s.length:a,ci(s,Yt,n,n,n,n,a)}function hg(s,a){var c;if(typeof a!="function")throw new br(l);return s=re(s),function(){return--s>0&&(c=a.apply(this,arguments)),s<=1&&(a=n),c}}var ah=oe(function(s,a,c){var p=tt;if(c.length){var y=Li(c,Xs(ah));p|=Vt}return ci(s,p,a,c,y)}),fg=oe(function(s,a,c){var p=tt|ut;if(c.length){var y=Li(c,Xs(fg));p|=Vt}return ci(a,p,s,c,y)});function dg(s,a,c){a=c?n:a;var p=ci(s,yt,n,n,n,n,n,a);return p.placeholder=dg.placeholder,p}function pg(s,a,c){a=c?n:a;var p=ci(s,wt,n,n,n,n,n,a);return p.placeholder=pg.placeholder,p}function gg(s,a,c){var p,y,E,I,M,H,st=0,at=!1,ht=!1,Et=!0;if(typeof s!="function")throw new br(l);a=Sr(a)||0,Ge(c)&&(at=!!c.leading,ht="maxWait"in c,E=ht?hn(Sr(c.maxWait)||0,a):E,Et="trailing"in c?!!c.trailing:Et);function Ot(Je){var Nr=p,pi=y;return p=y=n,st=Je,I=s.apply(pi,Nr),I}function Gt(Je){return st=Je,M=jo(le,a),at?Ot(Je):I}function ie(Je){var Nr=Je-H,pi=Je-st,Mg=a-Nr;return ht?On(Mg,E-pi):Mg}function Wt(Je){var Nr=Je-H,pi=Je-st;return H===n||Nr>=a||Nr<0||ht&&pi>=E}function le(){var Je=Dl();if(Wt(Je))return ue(Je);M=jo(le,ie(Je))}function ue(Je){return M=n,Et&&p?Ot(Je):(p=y=n,I)}function ur(){M!==n&&Sp(M),st=0,p=H=y=M=n}function Kn(){return M===n?I:ue(Dl())}function hr(){var Je=Dl(),Nr=Wt(Je);if(p=arguments,y=this,H=Je,Nr){if(M===n)return Gt(H);if(ht)return Sp(M),M=jo(le,a),Ot(H)}return M===n&&(M=jo(le,a)),I}return hr.cancel=ur,hr.flush=Kn,hr}var Ux=oe(function(s,a){return ip(s,1,a)}),zx=oe(function(s,a,c){return ip(s,Sr(a)||0,c)});function Hx(s){return ci(s,Ue)}function Ol(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new br(l);var c=function(){var p=arguments,y=a?a.apply(this,p):p[0],E=c.cache;if(E.has(y))return E.get(y);var I=s.apply(this,p);return c.cache=E.set(y,I)||E,I};return c.cache=new(Ol.Cache||ai),c}Ol.Cache=ai;function Pl(s){if(typeof s!="function")throw new br(l);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function Gx(s){return hg(2,s)}var Wx=Ob(function(s,a){a=a.length==1&&ee(a[0])?qe(a[0],ar(Ht())):qe(An(a,1),ar(Ht()));var c=a.length;return oe(function(p){for(var y=-1,E=On(p.length,c);++y<E;)p[y]=a[y].call(this,p[y]);return or(s,this,p)})}),lh=oe(function(s,a){var c=Li(a,Xs(lh));return ci(s,Vt,n,a,c)}),_g=oe(function(s,a){var c=Li(a,Xs(_g));return ci(s,_t,n,a,c)}),jx=ui(function(s,a){return ci(s,we,n,n,n,a)});function Kx(s,a){if(typeof s!="function")throw new br(l);return a=a===n?a:re(a),oe(s,a)}function Yx(s,a){if(typeof s!="function")throw new br(l);return a=a==null?0:hn(re(a),0),oe(function(c){var p=c[a],y=qi(c,0,a);return p&&Mi(y,p),or(s,this,y)})}function Qx(s,a,c){var p=!0,y=!0;if(typeof s!="function")throw new br(l);return Ge(c)&&(p="leading"in c?!!c.leading:p,y="trailing"in c?!!c.trailing:y),gg(s,a,{leading:p,maxWait:a,trailing:y})}function Zx(s){return ug(s,1)}function Xx(s,a){return lh(Wu(a),s)}function Jx(){if(!arguments.length)return[];var s=arguments[0];return ee(s)?s:[s]}function tE(s){return xr(s,S)}function eE(s,a){return a=typeof a=="function"?a:n,xr(s,S,a)}function nE(s){return xr(s,b|S)}function rE(s,a){return a=typeof a=="function"?a:n,xr(s,b|S,a)}function iE(s,a){return a==null||rp(s,a,mn(a))}function Lr(s,a){return s===a||s!==s&&a!==a}var sE=Sl(Mu),oE=Sl(function(s,a){return s>=a}),hs=cp(function(){return arguments}())?cp:function(s){return Ye(s)&&Ee.call(s,"callee")&&!Yd.call(s,"callee")},ee=X.isArray,aE=Rd?ar(Rd):gb;function Xn(s){return s!=null&&Ml(s.length)&&!fi(s)}function Xe(s){return Ye(s)&&Xn(s)}function lE(s){return s===!0||s===!1||Ye(s)&&Wn(s)==Si}var Bi=x1||yh,cE=Dd?ar(Dd):_b;function uE(s){return Ye(s)&&s.nodeType===1&&!Ko(s)}function hE(s){if(s==null)return!0;if(Xn(s)&&(ee(s)||typeof s=="string"||typeof s.splice=="function"||Bi(s)||Js(s)||hs(s)))return!s.length;var a=Pn(s);if(a==pe||a==sr)return!s.size;if(Wo(s))return!Fu(s).length;for(var c in s)if(Ee.call(s,c))return!1;return!0}function fE(s,a){return zo(s,a)}function dE(s,a,c){c=typeof c=="function"?c:n;var p=c?c(s,a):n;return p===n?zo(s,a,n,c):!!p}function ch(s){if(!Ye(s))return!1;var a=Wn(s);return a==gn||a==Os||typeof s.message=="string"&&typeof s.name=="string"&&!Ko(s)}function pE(s){return typeof s=="number"&&Zd(s)}function fi(s){if(!Ge(s))return!1;var a=Wn(s);return a==Rr||a==Zi||a==du||a==Ze}function mg(s){return typeof s=="number"&&s==re(s)}function Ml(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=ir}function Ge(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function Ye(s){return s!=null&&typeof s=="object"}var vg=Od?ar(Od):vb;function gE(s,a){return s===a||Nu(s,a,Ju(a))}function _E(s,a,c){return c=typeof c=="function"?c:n,Nu(s,a,Ju(a),c)}function mE(s){return yg(s)&&s!=+s}function vE(s){if(ew(s))throw new Jt(o);return up(s)}function yE(s){return s===null}function bE(s){return s==null}function yg(s){return typeof s=="number"||Ye(s)&&Wn(s)==ki}function Ko(s){if(!Ye(s)||Wn(s)!=an)return!1;var a=al(s);if(a===null)return!0;var c=Ee.call(a,"constructor")&&a.constructor;return typeof c=="function"&&c instanceof c&&rl.call(c)==_1}var uh=Pd?ar(Pd):yb;function wE(s){return mg(s)&&s>=-ir&&s<=ir}var bg=Md?ar(Md):bb;function Ll(s){return typeof s=="string"||!ee(s)&&Ye(s)&&Wn(s)==ti}function cr(s){return typeof s=="symbol"||Ye(s)&&Wn(s)==Ji}var Js=Ld?ar(Ld):wb;function xE(s){return s===n}function EE(s){return Ye(s)&&Pn(s)==ei}function AE(s){return Ye(s)&&Wn(s)==ln}var SE=Sl(Vu),kE=Sl(function(s,a){return s<=a});function wg(s){if(!s)return[];if(Xn(s))return Ll(s)?Pr(s):Zn(s);if(Lo&&s[Lo])return i1(s[Lo]());var a=Pn(s),c=a==pe?Su:a==sr?tl:to;return c(s)}function di(s){if(!s)return s===0?s:0;if(s=Sr(s),s===on||s===-on){var a=s<0?-1:1;return a*Ha}return s===s?s:0}function re(s){var a=di(s),c=a%1;return a===a?c?a-c:a:0}function xg(s){return s?as(re(s),0,_r):0}function Sr(s){if(typeof s=="number")return s;if(cr(s))return Ds;if(Ge(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=Ge(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=Bd(s);var c=qs.test(s);return c||u.test(s)?Po(s.slice(2),c?2:8):$s.test(s)?Ds:+s}function Eg(s){return zr(s,Jn(s))}function CE(s){return s?as(re(s),-ir,ir):s===0?s:0}function be(s){return s==null?"":lr(s)}var TE=Qs(function(s,a){if(Wo(a)||Xn(a)){zr(a,mn(a),s);return}for(var c in a)Ee.call(a,c)&&qo(s,c,a[c])}),Ag=Qs(function(s,a){zr(a,Jn(a),s)}),Nl=Qs(function(s,a,c,p){zr(a,Jn(a),s,p)}),IE=Qs(function(s,a,c,p){zr(a,mn(a),s,p)}),RE=ui(Du);function DE(s,a){var c=Ys(s);return a==null?c:np(c,a)}var OE=oe(function(s,a){s=De(s);var c=-1,p=a.length,y=p>2?a[2]:n;for(y&&jn(a[0],a[1],y)&&(p=1);++c<p;)for(var E=a[c],I=Jn(E),M=-1,H=I.length;++M<H;){var st=I[M],at=s[st];(at===n||Lr(at,Ws[st])&&!Ee.call(s,st))&&(s[st]=E[st])}return s}),PE=oe(function(s){return s.push(n,Bp),or(Sg,n,s)});function ME(s,a){return Fd(s,Ht(a,3),Ur)}function LE(s,a){return Fd(s,Ht(a,3),Pu)}function NE(s,a){return s==null?s:Ou(s,Ht(a,3),Jn)}function FE(s,a){return s==null?s:ap(s,Ht(a,3),Jn)}function VE(s,a){return s&&Ur(s,Ht(a,3))}function $E(s,a){return s&&Pu(s,Ht(a,3))}function qE(s){return s==null?[]:ml(s,mn(s))}function BE(s){return s==null?[]:ml(s,Jn(s))}function hh(s,a,c){var p=s==null?n:ls(s,a);return p===n?c:p}function UE(s,a){return s!=null&&Hp(s,a,hb)}function fh(s,a){return s!=null&&Hp(s,a,fb)}var zE=Np(function(s,a,c){a!=null&&typeof a.toString!="function"&&(a=il.call(a)),s[a]=c},ph(tr)),HE=Np(function(s,a,c){a!=null&&typeof a.toString!="function"&&(a=il.call(a)),Ee.call(s,a)?s[a].push(c):s[a]=[c]},Ht),GE=oe(Uo);function mn(s){return Xn(s)?tp(s):Fu(s)}function Jn(s){return Xn(s)?tp(s,!0):xb(s)}function WE(s,a){var c={};return a=Ht(a,3),Ur(s,function(p,y,E){li(c,a(p,y,E),p)}),c}function jE(s,a){var c={};return a=Ht(a,3),Ur(s,function(p,y,E){li(c,y,a(p,y,E))}),c}var KE=Qs(function(s,a,c){vl(s,a,c)}),Sg=Qs(function(s,a,c,p){vl(s,a,c,p)}),YE=ui(function(s,a){var c={};if(s==null)return c;var p=!1;a=qe(a,function(E){return E=$i(E,s),p||(p=E.length>1),E}),zr(s,Zu(s),c),p&&(c=xr(c,b|k|S,zb));for(var y=a.length;y--;)zu(c,a[y]);return c});function QE(s,a){return kg(s,Pl(Ht(a)))}var ZE=ui(function(s,a){return s==null?{}:Ab(s,a)});function kg(s,a){if(s==null)return{};var c=qe(Zu(s),function(p){return[p]});return a=Ht(a),mp(s,c,function(p,y){return a(p,y[0])})}function XE(s,a,c){a=$i(a,s);var p=-1,y=a.length;for(y||(y=1,s=n);++p<y;){var E=s==null?n:s[Hr(a[p])];E===n&&(p=y,E=c),s=fi(E)?E.call(s):E}return s}function JE(s,a,c){return s==null?s:Ho(s,a,c)}function tA(s,a,c,p){return p=typeof p=="function"?p:n,s==null?s:Ho(s,a,c,p)}var Cg=$p(mn),Tg=$p(Jn);function eA(s,a,c){var p=ee(s),y=p||Bi(s)||Js(s);if(a=Ht(a,4),c==null){var E=s&&s.constructor;y?c=p?new E:[]:Ge(s)?c=fi(E)?Ys(al(s)):{}:c={}}return(y?yr:Ur)(s,function(I,M,H){return a(c,I,M,H)}),c}function nA(s,a){return s==null?!0:zu(s,a)}function rA(s,a,c){return s==null?s:xp(s,a,Wu(c))}function iA(s,a,c,p){return p=typeof p=="function"?p:n,s==null?s:xp(s,a,Wu(c),p)}function to(s){return s==null?[]:Au(s,mn(s))}function sA(s){return s==null?[]:Au(s,Jn(s))}function oA(s,a,c){return c===n&&(c=a,a=n),c!==n&&(c=Sr(c),c=c===c?c:0),a!==n&&(a=Sr(a),a=a===a?a:0),as(Sr(s),a,c)}function aA(s,a,c){return a=di(a),c===n?(c=a,a=0):c=di(c),s=Sr(s),db(s,a,c)}function lA(s,a,c){if(c&&typeof c!="boolean"&&jn(s,a,c)&&(a=c=n),c===n&&(typeof a=="boolean"?(c=a,a=n):typeof s=="boolean"&&(c=s,s=n)),s===n&&a===n?(s=0,a=1):(s=di(s),a===n?(a=s,s=0):a=di(a)),s>a){var p=s;s=a,a=p}if(c||s%1||a%1){var y=Xd();return On(s+y*(a-s+mr("1e-"+((y+"").length-1))),a)}return qu(s,a)}var cA=Zs(function(s,a,c){return a=a.toLowerCase(),s+(c?Ig(a):a)});function Ig(s){return dh(be(s).toLowerCase())}function Rg(s){return s=be(s),s&&s.replace(_,Jy).replace(kt,"")}function uA(s,a,c){s=be(s),a=lr(a);var p=s.length;c=c===n?p:as(re(c),0,p);var y=c;return c-=a.length,c>=0&&s.slice(c,y)==a}function hA(s){return s=be(s),s&&ja.test(s)?s.replace(Ms,t1):s}function fA(s){return s=be(s),s&&Ya.test(s)?s.replace(Ns,"\\$&"):s}var dA=Zs(function(s,a,c){return s+(c?"-":"")+a.toLowerCase()}),pA=Zs(function(s,a,c){return s+(c?" ":"")+a.toLowerCase()}),gA=Pp("toLowerCase");function _A(s,a,c){s=be(s),a=re(a);var p=a?Hs(s):0;if(!a||p>=a)return s;var y=(a-p)/2;return Al(hl(y),c)+s+Al(ul(y),c)}function mA(s,a,c){s=be(s),a=re(a);var p=a?Hs(s):0;return a&&p<a?s+Al(a-p,c):s}function vA(s,a,c){s=be(s),a=re(a);var p=a?Hs(s):0;return a&&p<a?Al(a-p,c)+s:s}function yA(s,a,c){return c||a==null?a=0:a&&(a=+a),k1(be(s).replace(Ke,""),a||0)}function bA(s,a,c){return(c?jn(s,a,c):a===n)?a=1:a=re(a),Bu(be(s),a)}function wA(){var s=arguments,a=be(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var xA=Zs(function(s,a,c){return s+(c?"_":"")+a.toLowerCase()});function EA(s,a,c){return c&&typeof c!="number"&&jn(s,a,c)&&(a=c=n),c=c===n?_r:c>>>0,c?(s=be(s),s&&(typeof a=="string"||a!=null&&!uh(a))&&(a=lr(a),!a&&zs(s))?qi(Pr(s),0,c):s.split(a,c)):[]}var AA=Zs(function(s,a,c){return s+(c?" ":"")+dh(a)});function SA(s,a,c){return s=be(s),c=c==null?0:as(re(c),0,s.length),a=lr(a),s.slice(c,c+a.length)==a}function kA(s,a,c){var p=w.templateSettings;c&&jn(s,a,c)&&(a=n),s=be(s),a=Nl({},a,p,qp);var y=Nl({},a.imports,p.imports,qp),E=mn(y),I=Au(y,E),M,H,st=0,at=a.interpolate||m,ht="__p += '",Et=ku((a.escape||m).source+"|"+at.source+"|"+(at===ze?Vs:m).source+"|"+(a.evaluate||m).source+"|$","g"),Ot="//# sourceURL="+(Ee.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Or+"]")+`
`;s.replace(Et,function(Wt,le,ue,ur,Kn,hr){return ue||(ue=ur),ht+=s.slice(st,hr).replace(x,e1),le&&(M=!0,ht+=`' +
__e(`+le+`) +
'`),Kn&&(H=!0,ht+=`';
`+Kn+`;
__p += '`),ue&&(ht+=`' +
((__t = (`+ue+`)) == null ? '' : __t) +
'`),st=hr+Wt.length,Wt}),ht+=`';
`;var Gt=Ee.call(a,"variable")&&a.variable;if(!Gt)ht=`with (obj) {
`+ht+`
}
`;else if(Un.test(Gt))throw new Jt(h);ht=(H?ht.replace(ns,""):ht).replace(Ps,"$1").replace(Ti,"$1;"),ht="function("+(Gt||"obj")+`) {
`+(Gt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(M?", __e = _.escape":"")+(H?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ht+`return __p
}`;var ie=Og(function(){return _e(E,Ot+"return "+ht).apply(n,I)});if(ie.source=ht,ch(ie))throw ie;return ie}function CA(s){return be(s).toLowerCase()}function TA(s){return be(s).toUpperCase()}function IA(s,a,c){if(s=be(s),s&&(c||a===n))return Bd(s);if(!s||!(a=lr(a)))return s;var p=Pr(s),y=Pr(a),E=Ud(p,y),I=zd(p,y)+1;return qi(p,E,I).join("")}function RA(s,a,c){if(s=be(s),s&&(c||a===n))return s.slice(0,Gd(s)+1);if(!s||!(a=lr(a)))return s;var p=Pr(s),y=zd(p,Pr(a))+1;return qi(p,0,y).join("")}function DA(s,a,c){if(s=be(s),s&&(c||a===n))return s.replace(Ke,"");if(!s||!(a=lr(a)))return s;var p=Pr(s),y=Ud(p,Pr(a));return qi(p,y).join("")}function OA(s,a){var c=se,p=Oe;if(Ge(a)){var y="separator"in a?a.separator:y;c="length"in a?re(a.length):c,p="omission"in a?lr(a.omission):p}s=be(s);var E=s.length;if(zs(s)){var I=Pr(s);E=I.length}if(c>=E)return s;var M=c-Hs(p);if(M<1)return p;var H=I?qi(I,0,M).join(""):s.slice(0,M);if(y===n)return H+p;if(I&&(M+=H.length-M),uh(y)){if(s.slice(M).search(y)){var st,at=H;for(y.global||(y=ku(y.source,be(Oo.exec(y))+"g")),y.lastIndex=0;st=y.exec(at);)var ht=st.index;H=H.slice(0,ht===n?M:ht)}}else if(s.indexOf(lr(y),M)!=M){var Et=H.lastIndexOf(y);Et>-1&&(H=H.slice(0,Et))}return H+p}function PA(s){return s=be(s),s&&Do.test(s)?s.replace(Ii,l1):s}var MA=Zs(function(s,a,c){return s+(c?" ":"")+a.toUpperCase()}),dh=Pp("toUpperCase");function Dg(s,a,c){return s=be(s),a=c?n:a,a===n?r1(s)?h1(s):Ky(s):s.match(a)||[]}var Og=oe(function(s,a){try{return or(s,n,a)}catch(c){return ch(c)?c:new Jt(c)}}),LA=ui(function(s,a){return yr(a,function(c){c=Hr(c),li(s,c,ah(s[c],s))}),s});function NA(s){var a=s==null?0:s.length,c=Ht();return s=a?qe(s,function(p){if(typeof p[1]!="function")throw new br(l);return[c(p[0]),p[1]]}):[],oe(function(p){for(var y=-1;++y<a;){var E=s[y];if(or(E[0],this,p))return or(E[1],this,p)}})}function FA(s){return lb(xr(s,b))}function ph(s){return function(){return s}}function VA(s,a){return s==null||s!==s?a:s}var $A=Lp(),qA=Lp(!0);function tr(s){return s}function gh(s){return hp(typeof s=="function"?s:xr(s,b))}function BA(s){return dp(xr(s,b))}function UA(s,a){return pp(s,xr(a,b))}var zA=oe(function(s,a){return function(c){return Uo(c,s,a)}}),HA=oe(function(s,a){return function(c){return Uo(s,c,a)}});function _h(s,a,c){var p=mn(a),y=ml(a,p);c==null&&!(Ge(a)&&(y.length||!p.length))&&(c=a,a=s,s=this,y=ml(a,mn(a)));var E=!(Ge(c)&&"chain"in c)||!!c.chain,I=fi(s);return yr(y,function(M){var H=a[M];s[M]=H,I&&(s.prototype[M]=function(){var st=this.__chain__;if(E||st){var at=s(this.__wrapped__),ht=at.__actions__=Zn(this.__actions__);return ht.push({func:H,args:arguments,thisArg:s}),at.__chain__=st,at}return H.apply(s,Mi([this.value()],arguments))})}),s}function GA(){return He._===this&&(He._=m1),this}function mh(){}function WA(s){return s=re(s),oe(function(a){return gp(a,s)})}var jA=Ku(qe),KA=Ku(Nd),YA=Ku(yu);function Pg(s){return eh(s)?bu(Hr(s)):Sb(s)}function QA(s){return function(a){return s==null?n:ls(s,a)}}var ZA=Fp(),XA=Fp(!0);function vh(){return[]}function yh(){return!1}function JA(){return{}}function tS(){return""}function eS(){return!0}function nS(s,a){if(s=re(s),s<1||s>ir)return[];var c=_r,p=On(s,_r);a=Ht(a),s-=_r;for(var y=Eu(p,a);++c<s;)a(c);return y}function rS(s){return ee(s)?qe(s,Hr):cr(s)?[s]:Zn(Jp(be(s)))}function iS(s){var a=++g1;return be(s)+a}var sS=El(function(s,a){return s+a},0),oS=Yu("ceil"),aS=El(function(s,a){return s/a},1),lS=Yu("floor");function cS(s){return s&&s.length?_l(s,tr,Mu):n}function uS(s,a){return s&&s.length?_l(s,Ht(a,2),Mu):n}function hS(s){return $d(s,tr)}function fS(s,a){return $d(s,Ht(a,2))}function dS(s){return s&&s.length?_l(s,tr,Vu):n}function pS(s,a){return s&&s.length?_l(s,Ht(a,2),Vu):n}var gS=El(function(s,a){return s*a},1),_S=Yu("round"),mS=El(function(s,a){return s-a},0);function vS(s){return s&&s.length?xu(s,tr):0}function yS(s,a){return s&&s.length?xu(s,Ht(a,2)):0}return w.after=Bx,w.ary=ug,w.assign=TE,w.assignIn=Ag,w.assignInWith=Nl,w.assignWith=IE,w.at=RE,w.before=hg,w.bind=ah,w.bindAll=LA,w.bindKey=fg,w.castArray=Jx,w.chain=ag,w.chunk=lw,w.compact=cw,w.concat=uw,w.cond=NA,w.conforms=FA,w.constant=ph,w.countBy=vx,w.create=DE,w.curry=dg,w.curryRight=pg,w.debounce=gg,w.defaults=OE,w.defaultsDeep=PE,w.defer=Ux,w.delay=zx,w.difference=hw,w.differenceBy=fw,w.differenceWith=dw,w.drop=pw,w.dropRight=gw,w.dropRightWhile=_w,w.dropWhile=mw,w.fill=vw,w.filter=bx,w.flatMap=Ex,w.flatMapDeep=Ax,w.flatMapDepth=Sx,w.flatten=rg,w.flattenDeep=yw,w.flattenDepth=bw,w.flip=Hx,w.flow=$A,w.flowRight=qA,w.fromPairs=ww,w.functions=qE,w.functionsIn=BE,w.groupBy=kx,w.initial=Ew,w.intersection=Aw,w.intersectionBy=Sw,w.intersectionWith=kw,w.invert=zE,w.invertBy=HE,w.invokeMap=Tx,w.iteratee=gh,w.keyBy=Ix,w.keys=mn,w.keysIn=Jn,w.map=Rl,w.mapKeys=WE,w.mapValues=jE,w.matches=BA,w.matchesProperty=UA,w.memoize=Ol,w.merge=KE,w.mergeWith=Sg,w.method=zA,w.methodOf=HA,w.mixin=_h,w.negate=Pl,w.nthArg=WA,w.omit=YE,w.omitBy=QE,w.once=Gx,w.orderBy=Rx,w.over=jA,w.overArgs=Wx,w.overEvery=KA,w.overSome=YA,w.partial=lh,w.partialRight=_g,w.partition=Dx,w.pick=ZE,w.pickBy=kg,w.property=Pg,w.propertyOf=QA,w.pull=Rw,w.pullAll=sg,w.pullAllBy=Dw,w.pullAllWith=Ow,w.pullAt=Pw,w.range=ZA,w.rangeRight=XA,w.rearg=jx,w.reject=Mx,w.remove=Mw,w.rest=Kx,w.reverse=sh,w.sampleSize=Nx,w.set=JE,w.setWith=tA,w.shuffle=Fx,w.slice=Lw,w.sortBy=qx,w.sortedUniq=Uw,w.sortedUniqBy=zw,w.split=EA,w.spread=Yx,w.tail=Hw,w.take=Gw,w.takeRight=Ww,w.takeRightWhile=jw,w.takeWhile=Kw,w.tap=cx,w.throttle=Qx,w.thru=Il,w.toArray=wg,w.toPairs=Cg,w.toPairsIn=Tg,w.toPath=rS,w.toPlainObject=Eg,w.transform=eA,w.unary=Zx,w.union=Yw,w.unionBy=Qw,w.unionWith=Zw,w.uniq=Xw,w.uniqBy=Jw,w.uniqWith=tx,w.unset=nA,w.unzip=oh,w.unzipWith=og,w.update=rA,w.updateWith=iA,w.values=to,w.valuesIn=sA,w.without=ex,w.words=Dg,w.wrap=Xx,w.xor=nx,w.xorBy=rx,w.xorWith=ix,w.zip=sx,w.zipObject=ox,w.zipObjectDeep=ax,w.zipWith=lx,w.entries=Cg,w.entriesIn=Tg,w.extend=Ag,w.extendWith=Nl,_h(w,w),w.add=sS,w.attempt=Og,w.camelCase=cA,w.capitalize=Ig,w.ceil=oS,w.clamp=oA,w.clone=tE,w.cloneDeep=nE,w.cloneDeepWith=rE,w.cloneWith=eE,w.conformsTo=iE,w.deburr=Rg,w.defaultTo=VA,w.divide=aS,w.endsWith=uA,w.eq=Lr,w.escape=hA,w.escapeRegExp=fA,w.every=yx,w.find=wx,w.findIndex=eg,w.findKey=ME,w.findLast=xx,w.findLastIndex=ng,w.findLastKey=LE,w.floor=lS,w.forEach=lg,w.forEachRight=cg,w.forIn=NE,w.forInRight=FE,w.forOwn=VE,w.forOwnRight=$E,w.get=hh,w.gt=sE,w.gte=oE,w.has=UE,w.hasIn=fh,w.head=ig,w.identity=tr,w.includes=Cx,w.indexOf=xw,w.inRange=aA,w.invoke=GE,w.isArguments=hs,w.isArray=ee,w.isArrayBuffer=aE,w.isArrayLike=Xn,w.isArrayLikeObject=Xe,w.isBoolean=lE,w.isBuffer=Bi,w.isDate=cE,w.isElement=uE,w.isEmpty=hE,w.isEqual=fE,w.isEqualWith=dE,w.isError=ch,w.isFinite=pE,w.isFunction=fi,w.isInteger=mg,w.isLength=Ml,w.isMap=vg,w.isMatch=gE,w.isMatchWith=_E,w.isNaN=mE,w.isNative=vE,w.isNil=bE,w.isNull=yE,w.isNumber=yg,w.isObject=Ge,w.isObjectLike=Ye,w.isPlainObject=Ko,w.isRegExp=uh,w.isSafeInteger=wE,w.isSet=bg,w.isString=Ll,w.isSymbol=cr,w.isTypedArray=Js,w.isUndefined=xE,w.isWeakMap=EE,w.isWeakSet=AE,w.join=Cw,w.kebabCase=dA,w.last=Ar,w.lastIndexOf=Tw,w.lowerCase=pA,w.lowerFirst=gA,w.lt=SE,w.lte=kE,w.max=cS,w.maxBy=uS,w.mean=hS,w.meanBy=fS,w.min=dS,w.minBy=pS,w.stubArray=vh,w.stubFalse=yh,w.stubObject=JA,w.stubString=tS,w.stubTrue=eS,w.multiply=gS,w.nth=Iw,w.noConflict=GA,w.noop=mh,w.now=Dl,w.pad=_A,w.padEnd=mA,w.padStart=vA,w.parseInt=yA,w.random=lA,w.reduce=Ox,w.reduceRight=Px,w.repeat=bA,w.replace=wA,w.result=XE,w.round=_S,w.runInContext=B,w.sample=Lx,w.size=Vx,w.snakeCase=xA,w.some=$x,w.sortedIndex=Nw,w.sortedIndexBy=Fw,w.sortedIndexOf=Vw,w.sortedLastIndex=$w,w.sortedLastIndexBy=qw,w.sortedLastIndexOf=Bw,w.startCase=AA,w.startsWith=SA,w.subtract=mS,w.sum=vS,w.sumBy=yS,w.template=kA,w.times=nS,w.toFinite=di,w.toInteger=re,w.toLength=xg,w.toLower=CA,w.toNumber=Sr,w.toSafeInteger=CE,w.toString=be,w.toUpper=TA,w.trim=IA,w.trimEnd=RA,w.trimStart=DA,w.truncate=OA,w.unescape=PA,w.uniqueId=iS,w.upperCase=MA,w.upperFirst=dh,w.each=lg,w.eachRight=cg,w.first=ig,_h(w,function(){var s={};return Ur(w,function(a,c){Ee.call(w.prototype,c)||(s[c]=a)}),s}(),{chain:!1}),w.VERSION=r,yr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){w[s].placeholder=w}),yr(["drop","take"],function(s,a){ce.prototype[s]=function(c){c=c===n?1:hn(re(c),0);var p=this.__filtered__&&!a?new ce(this):this.clone();return p.__filtered__?p.__takeCount__=On(c,p.__takeCount__):p.__views__.push({size:On(c,_r),type:s+(p.__dir__<0?"Right":"")}),p},ce.prototype[s+"Right"]=function(c){return this.reverse()[s](c).reverse()}}),yr(["filter","map","takeWhile"],function(s,a){var c=a+1,p=c==vt||c==ne;ce.prototype[s]=function(y){var E=this.clone();return E.__iteratees__.push({iteratee:Ht(y,3),type:c}),E.__filtered__=E.__filtered__||p,E}}),yr(["head","last"],function(s,a){var c="take"+(a?"Right":"");ce.prototype[s]=function(){return this[c](1).value()[0]}}),yr(["initial","tail"],function(s,a){var c="drop"+(a?"":"Right");ce.prototype[s]=function(){return this.__filtered__?new ce(this):this[c](1)}}),ce.prototype.compact=function(){return this.filter(tr)},ce.prototype.find=function(s){return this.filter(s).head()},ce.prototype.findLast=function(s){return this.reverse().find(s)},ce.prototype.invokeMap=oe(function(s,a){return typeof s=="function"?new ce(this):this.map(function(c){return Uo(c,s,a)})}),ce.prototype.reject=function(s){return this.filter(Pl(Ht(s)))},ce.prototype.slice=function(s,a){s=re(s);var c=this;return c.__filtered__&&(s>0||a<0)?new ce(c):(s<0?c=c.takeRight(-s):s&&(c=c.drop(s)),a!==n&&(a=re(a),c=a<0?c.dropRight(-a):c.take(a-s)),c)},ce.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},ce.prototype.toArray=function(){return this.take(_r)},Ur(ce.prototype,function(s,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),p=/^(?:head|last)$/.test(a),y=w[p?"take"+(a=="last"?"Right":""):a],E=p||/^find/.test(a);y&&(w.prototype[a]=function(){var I=this.__wrapped__,M=p?[1]:arguments,H=I instanceof ce,st=M[0],at=H||ee(I),ht=function(le){var ue=y.apply(w,Mi([le],M));return p&&Et?ue[0]:ue};at&&c&&typeof st=="function"&&st.length!=1&&(H=at=!1);var Et=this.__chain__,Ot=!!this.__actions__.length,Gt=E&&!Et,ie=H&&!Ot;if(!E&&at){I=ie?I:new ce(this);var Wt=s.apply(I,M);return Wt.__actions__.push({func:Il,args:[ht],thisArg:n}),new wr(Wt,Et)}return Gt&&ie?s.apply(this,M):(Wt=this.thru(ht),Gt?p?Wt.value()[0]:Wt.value():Wt)})}),yr(["pop","push","shift","sort","splice","unshift"],function(s){var a=el[s],c=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",p=/^(?:pop|shift)$/.test(s);w.prototype[s]=function(){var y=arguments;if(p&&!this.__chain__){var E=this.value();return a.apply(ee(E)?E:[],y)}return this[c](function(I){return a.apply(ee(I)?I:[],y)})}}),Ur(ce.prototype,function(s,a){var c=w[a];if(c){var p=c.name+"";Ee.call(Ks,p)||(Ks[p]=[]),Ks[p].push({name:a,func:c})}}),Ks[xl(n,ut).name]=[{name:"wrapper",func:n}],ce.prototype.clone=P1,ce.prototype.reverse=M1,ce.prototype.value=L1,w.prototype.at=ux,w.prototype.chain=hx,w.prototype.commit=fx,w.prototype.next=dx,w.prototype.plant=gx,w.prototype.reverse=_x,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=mx,w.prototype.first=w.prototype.head,Lo&&(w.prototype[Lo]=px),w},Gs=f1();rs?((rs.exports=Gs)._=Gs,gu._=Gs):He._=Gs}).call(Yo)})(Xl,Xl.exports);var TS=Xl.exports;const tn=Mm(TS),IS=["annotated","id"],RS={key:0},DS={class:"mb3 b tracked-light"},OS={class:"tc"},PS=["name","id","value"],MS=["for"],LS={key:1},NS={class:"mb3 b tracked-light"},FS={class:"tc"},VS={class:"column-severity w-33"},$S=["name","id"],qS=["for"],BS={class:"column-severity w-33"},US=["name","id"],zS=["for"],HS={class:"column-severity w-33"},GS=["name","id"],WS=["for"],jS={key:2},KS={class:"mt0 pt2 mb3 b tracked-light"},YS=["name","id"],QS=["for"],ZS=["name","id"],XS=["for"],JS={key:3,class:"flex items-center mt2"},tk={class:"mb3 b tracked-light"},ek=["name","id","placeholder"],nk=["for"],rk={key:4},ik={class:"mt0 pt2 mb3 b tracked-light"},sk=["name","id","placeholder"],ok=["for"],ak={props:["edit_state","question","edit_type","parent_show_next_question","set_edit_state","update_edit_state_parent","empty_question_state","question_state","force_update","isRoot","parent_div_name","config"],data(){let e=16;if("options"in this.question)switch(this.question.options.length){case 1:e=50;break;case 2:e=50;break;case 3:e=33;break;case 4:e=25;break;case 5:e=16;break;case 6:e=16;break}let t;return this.isRoot==="true"?t=`question-${this.edit_type.name}-${this.question.name}`:t=`${this.parent_div_name}-${this.question.name}`,{col_size:e,div_name:t}},methods:{has_children(){return this.isObject(this.question.options)},show_next_question(e){let t=e.target.value;if(this.has_children()){for(let r=0;r<this.question.options.length;r++){let i=this.question.options[r],o=`.${this.div_name}-${i.name}`;$(o).hide(300)}let n=`.${this.div_name}-${t}`;$(n).is(":visible")||$(n).slideDown(300)}},update_edit_state(e){if(e===""&&(e=null),this.isRoot==="true"){let t=tn.cloneDeep(this.edit_state);t[this.edit_type.name][this.question.name]=this.empty_question_state,this.has_children()?t[this.edit_type.name][this.question.name].val=e:t[this.edit_type.name][this.question.name]=e,this.set_edit_state(t)}else{let t=tn.cloneDeep(this.question_state);t=this.empty_question_state,this.has_children()?t.val=e:t=e,this.update_edit_state_parent(this.question.name,t)}},update_edit_state_child(e,t){let n=tn.cloneDeep(this.question_state);if(n[e]=t,this.isRoot==="true"){let r=tn.cloneDeep(this.edit_state);r[this.edit_type.name][this.question.name]=this.empty_question_state,r[this.edit_type.name][this.question.name]=n,this.set_edit_state(r)}else this.update_edit_state_parent(this.question.name,n)},getClassNames(){let e=[];return e.push(this.div_name),this.isRoot!=="true"&&e.push("child-question"),e},child_state(e){return this.has_children()&&typeof this.question.options!="string"?this.question_state[e.name]:this.question_state},empty_child_state(e){return this.has_children()&&typeof this.question.options!="string"?this.empty_question_state[e.name]:this.empty_question_state},isAnnotated(){return!this.has_children()&&this.question_state!=null&&this.question_state.val==null?!0:!(this.question_state==null||this.question_state.val==null)}},computed:{isObject(){return e=>typeof e=="object"&&e!==null}}},lk=Object.assign(ak,{__name:"Question",setup(e){return(t,n)=>{const r=bS("Question",!0);return Ft(),zt("div",{class:Re(t.getClassNames()),annotated:t.isAnnotated(),id:`question_${e.edit_type.name}_${e.question.name}`},[t.isObject(e.question.options)?(Ft(),zt("div",RS,[ot("p",DS,Ut(e.question.question),1),ot("div",OS,[(Ft(!0),zt(_i,null,ps(e.question.options,i=>(Ft(),zt("div",{class:Re(`column-severity wmin-${t.col_size}`),key:i.id},[ot("input",{onClick:n[0]||(n[0]=(...o)=>t.show_next_question&&t.show_next_question(...o)),class:"checkbox-tools checkbox-tools-severity",type:"radio",name:e.question.name,id:`${t.div_name}-${i.name}`,value:i.name,onInput:n[1]||(n[1]=o=>t.update_edit_state(o.target.value))},null,40,PS),ot("label",{class:Re(`for-checkbox-tools-severity question-${e.edit_type.name}`),for:`${t.div_name}-${i.name}`},Ut(i.label),11,MS)],2))),128))]),(Ft(!0),zt(_i,null,ps(e.question.options,i=>(Ft(),zt("div",{key:i.id},[er(r,{edit_state:e.edit_state,question_state:t.child_state(i),empty_question_state:t.empty_child_state(i),question:i,edit_type:e.edit_type,set_edit_state:e.set_edit_state,parent_show_next_question:t.show_next_question,isRoot:"false",update_edit_state_parent:t.update_edit_state_child,parent_div_name:t.div_name,config:e.config},null,8,["edit_state","question_state","empty_question_state","question","edit_type","set_edit_state","parent_show_next_question","update_edit_state_parent","parent_div_name","config"])]))),128))])):Ae("",!0),e.question.options==="likert-3"?(Ft(),zt("div",LS,[ot("p",NS,Ut(e.question.question),1),ot("div",FS,[ot("div",VS,[ot("input",{onClick:n[2]||(n[2]=(...i)=>t.show_next_question&&t.show_next_question(...i)),class:"checkbox-tools checkbox-tools-severity",type:"radio",name:`${t.div_name}-severity`,id:`${t.div_name}-severity-1`,value:"minor",onInput:n[3]||(n[3]=i=>t.update_edit_state(i.target.value))},null,40,$S),ot("label",{class:Re(`for-checkbox-tools-severity question-${e.edit_type.name}`),for:`${t.div_name}-severity-1`},Ut(e.config.interface_text.questions.likert_1),11,qS)]),ot("div",BS,[ot("input",{onClick:n[4]||(n[4]=(...i)=>t.show_next_question&&t.show_next_question(...i)),class:"checkbox-tools checkbox-tools-severity",type:"radio",name:`${t.div_name}-severity`,id:`${t.div_name}-severity-2`,value:"somewhat",onInput:n[5]||(n[5]=i=>t.update_edit_state(i.target.value))},null,40,US),ot("label",{class:Re(`for-checkbox-tools-severity question-${e.edit_type.name}`),for:`${t.div_name}-severity-2`},Ut(e.config.interface_text.questions.likert_2),11,zS)]),ot("div",HS,[ot("input",{onClick:n[6]||(n[6]=(...i)=>t.show_next_question&&t.show_next_question(...i)),class:"checkbox-tools checkbox-tools-severity",type:"radio",name:`${t.div_name}-severity`,id:`${t.div_name}-severity-3`,value:"a lot",onInput:n[7]||(n[7]=i=>t.update_edit_state(i.target.value))},null,40,GS),ot("label",{class:Re(`for-checkbox-tools-severity question-${e.edit_type.name}`),for:`${t.div_name}-severity-3`},Ut(e.config.interface_text.questions.likert_3),11,WS)])])])):Ae("",!0),e.question.options==="binary"?(Ft(),zt("div",jS,[ot("p",KS,[fn(Ut(e.question.question)+" ",1),ot("input",{class:"checkbox-tools-yes-no",type:"radio",name:`${t.div_name}-yes-no`,id:`${t.div_name}-yes`,value:"yes",onInput:n[8]||(n[8]=i=>t.update_edit_state(i.target.value))},null,40,YS),ot("label",{class:Re(`normal for-checkbox-tools-yes-no question-${e.edit_type.name}`),for:`${t.div_name}-yes`},Ut(e.config.interface_text.questions.binary_yes),11,QS),ot("input",{class:"checkbox-tools-yes-no",type:"radio",name:`${t.div_name}-yes-no`,id:`${t.div_name}-no`,value:"no",onInput:n[9]||(n[9]=i=>t.update_edit_state(i.target.value))},null,40,ZS),ot("label",{class:Re(`normal for-checkbox-tools-yes-no question-${e.edit_type.name}`),for:`${t.div_name}-no`},Ut(e.config.interface_text.questions.binary_no),11,XS)])])):Ae("",!0),e.question.options==="textbox"?(Ft(),zt("div",JS,[ot("p",tk,Ut(e.question.question),1),ot("input",{type:"text",class:Re(["question-textbox","db border-box hover-black ba b--black-20 pa2 br2 ml3 flex-auto"]),name:`${t.div_name}-textbox`,id:`${t.div_name}`,placeholder:e.config.interface_text.questions.textbox_placeholder,onInput:n[10]||(n[10]=i=>t.update_edit_state(i.target.value))},null,40,ek),ot("label",{class:Re(`normal for-question-textbox question-${e.edit_type.name}`),for:`${t.div_name}`},null,10,nk)])):Ae("",!0),e.question.options==="textarea"?(Ft(),zt("div",rk,[ot("p",ik,Ut(e.question.question),1),ot("textarea",{class:Re(["question-textarea","db border-box hover-black w-100 ba b--black-20 pa2 br2 mb2"]),name:`${t.div_name}-textarea`,id:`${t.div_name}`,placeholder:e.config.interface_text.questions.textbox_placeholder,onInput:n[11]||(n[11]=i=>t.update_edit_state(i.target.value))},null,40,sk),ot("label",{class:Re(`normal for-question-textarea question-${e.edit_type.name}`),for:`${t.div_name}`},null,10,ok)])):Ae("",!0)],10,IS)}}}),ck={class:"quality-selection-divs"},uk={class:"quality-selection w-100",id:"add_an_edit"},hk={id:"dropdown-button-container"},fk={class:"over-hide z-bigger mt2 editor-container"},dk={class:"f3 annotation-label ttu mv1"},pk=ot("i",{class:"fa-solid fa-plus"},null,-1),gk={class:"row"},_k={class:"mb2 b tracked-light"},mk={class:"tc mb3"},vk=["id","value"],yk=["for"],bk=["data-category"],wk={key:0},xk={class:"mt0 mb2 b tracked-light"},Ek={class:"tracked-light lh-paras-2"},Ak=["innerHTML"],Sk={key:1},kk=["data-category"],Ck={class:"mt0 mb2 b tracked-light"},Tk={class:"tracked-light lh-paras-2"},Ik=["innerHTML"],Rk={key:2},Dk=["data-category"],Ok={class:"mt0 mb2 b tracked-light"},Pk={class:"tracked-light lh-paras-2"},Mk=["innerHTML"],Lk={class:"buttons tc mt2"},Nk=ot("i",{class:"fa-solid fa-close"},null,-1),Fk=["disabled"],Vk=ot("i",{class:"fa-solid fa-check"},null,-1),$k=["id","data-category"],qk={id:"dropdown-button-container"},Bk={class:"over-hide z-bigger mt3 editor-container"},Uk={class:"f3 annotation-label ttu mv1"},zk=ot("i",{class:"fa-solid fa-pencil"},null,-1),Hk=ot("div",{class:"single_part"},null,-1),Gk={class:"f4 mt0 mb2 tc"},Wk=["innerHTML"],jk=["innerHTML"],Kk=["innerHTML"],Yk={class:"row"},Qk={class:"buttons tc"},Zk=["onClick"],Xk=ot("i",{class:"fa-solid fa-close"},null,-1),Jk=["onClick","disabled"],tC=ot("i",{class:"fa-solid fa-check"},null,-1),eC={props:["edits_dict","hits_data","current_hit","selected_edits_html","selected_edits","selected_state","set_span_text","set_span_indices","set_hits_data","refresh_interface_edit","editor_open","set_editor_state","annotating_edit_span_category_id","set_annotating_edit_span_category_id","annotating_edit_span","set_annotating_edit_span","set_hit_box_config","config"],data(){return{force_update:!1,edit_state:this.initalize_edit_state(),empty_edit_state:this.initalize_edit_state()}},watch:{config(){this.edit_state=this.initalize_edit_state(),this.empty_edit_state=this.initalize_edit_state(),this.fix_edit_box_formatting()},editor_open(){this.fix_edit_box_formatting()}},methods:{fix_edit_box_formatting(){let e=$(".edit-box label"),t=0,n=0;for(let r=0;r<e.length;r++){const i=e[r].offsetHeight;i>n&&(n=i,t+=1)}t>0&&($(".edit-box label").css("justify-content","flex-start"),$(".edit-box label").css("height",n-24+"px"))},parse_options(e){if(typeof e!="object")return null;let t={};for(const n in e)t.val=null,t[e[n].name]=this.parse_options(e[n].options);return t},initalize_edit_state(){let e={};for(const t of this.config.edits)e[t.name]=this.parse_options(t.annotation);return e},set_edit_state(e){console.info(e),this.edit_state=e,this.force_update=!this.force_update},force_update_f(){this.force_update=!this.force_update},cancel_click(){$(".icon-default").removeClass("open"),this.refresh_edit()},save_click(){let e=tn.cloneDeep(this.hits_data);$(".icon-default").removeClass("open"),this.set_editor_state(!this.editor_open);let t=$("input[name=edit_cotegory]:checked").val();const n=e[this.current_hit-1].edits;let r=0;for(const l of n)l.category==t&&parseInt(l.id)>r&&(r=parseInt(l.id));const i=this.config.edits.find(l=>l.name===t);let o={category:t,id:r+1,annotation:null};if(i.type==null||i.type=="single_span"||i.type=="multi_span"){if(i.enable_input){let l=this.selected_state.source_idx;i.type!="multi_span"&&(l=[l]),o.input_idx=l}if(i.enable_output){let l=this.selected_state.target_idx;i.type!="multi_span"&&(l=[l]),o.output_idx=l}}if(i.type=="composite"){let l=[];for(let h of this.selected_edits){let f={id:h.id,category:h.category};h.input_idx&&(f.input_idx=h.input_idx),h.output_idx&&(f.output_idx=h.output_idx),l.push(f)}o.constituent_edits=l;for(let h of l)e[this.current_hit-1].edits=e[this.current_hit-1].edits.filter(f=>f.category!==h.category||f.id!==h.id)}e[this.current_hit-1].edits.push(o),this.set_hits_data(e),this.refresh_edit()},cancel_annotation_click(e,t){const n=this.annotating_edit_span_category_id;$(".icon-default").removeClass("open"),this.reset_annotation_colors(e,n),this.set_hits_data(tn.cloneDeep(this.hits_data)),this.refresh_edit()},save_annotation_click(e,t){function n(h){if(typeof h!="object"||h===null)return h;if(Array.isArray(h))return h.map(v=>n(v)).filter(v=>v!==null);const f={};let d=!1;for(const v in h)if(h.hasOwnProperty(v)){const b=n(h[v]);b!==null&&(f[v]=b,d=!0)}return d?f:null}let r=this.annotating_edit_span_category_id,i=tn.cloneDeep(this.hits_data),o=tn.cloneDeep(this.edit_state[e]),l=i[this.current_hit-1].edits.find(function(h){return h.category===e&&h.id===r});l.annotation=n(o),this.reset_annotation_colors(e,r),this.set_hits_data(i),this.refresh_edit()},reset_annotation_colors(e,t){let n=this.hits_data[this.current_hit-1].edits.find(function(h){return h.category===e&&h.id===t}),r,i;!n.annotation||n.annotation==null?(r=`txt-${e}-light`,i=`border-${e}-light`):(r=`txt-${e}`,i=`border-${e}`);let o=$(`.${e}[data-id=${e}-${t}]`),l=$(`.${e}_below[data-id=${e}-${t}]`);l.addClass(r),o.removeClass(`white bg-${e} bg-${e}-light`),o.addClass(i),l.removeClass(`white bg-${e} bg-${e}-light`)},getEditConfig(e){return this.config.edits.find(function(t){return t.name===e})},refresh_edit(){this.set_editor_state(!1);let e=this.config.edits.map(function(t){return`txt-${t.name}`}).join(" ");$(".annotation-icon").removeClass(e);for(let t of e)$("#source-sentence").removeClass(`select-color-${t}`),$("#target-sentence").removeClass(`select-color-${t}`);$("input[name=edit_cotegory]").prop("checked",!1),$(".checkbox-tools").prop("checked",!1),$(".checkbox-tools-yes-no").prop("checked",!1),$(".question-textbox").val(""),$(".question-textarea").val(""),$(".quality-selection").slideUp(300),$(".span-selection-div").hide(300),$(".child-question").hide(),this.edit_state=this.initalize_edit_state(),this.refresh_interface_edit()},show_span_selection(e){$(".span-selection-div").hide(),$(`.span-selection-div[data-category=${e.target.value}]`).show();const t=this.getEditConfig(e.target.value);this.refresh_interface_edit();let n={enable_select_source_sentence:!1,enable_select_target_sentence:!1,enable_multi_select_source_sentence:!1,enable_multi_select_target_sentence:!1};t.enable_input&&(n.enable_select_source_sentence=!0,t.type=="multi_span"&&(n.enable_multi_select_source_sentence=!0)),t.enable_output&&(n.enable_select_target_sentence=!0,t.type=="multi_span"&&(n.enable_multi_select_target_sentence=!0)),this.set_hit_box_config(n),this.set_span_text("","source"),this.set_span_text("","target"),this.set_span_indices("","source"),this.set_span_indices("","target")},annotate_edit_disabled(e){this.force_update;const t=e.name,n=this.getEditConfig(t);if(!this.editor_open||!$(`.quality-selection[data-category=${t}]`).is(":visible"))return!0;if(!n||!n.annotation)return!1;let r=!0;for(let i of n.annotation){const o=$(`#question_${t}_${i.name}`);if(o==null||o=={}||o.length==0)continue;const l=this.edit_state[t][i.name];l!=null&&(l.val!=null&&l.val!=""||l.val==null&&l!="")||$(o[0]).attr("annotated")!="true"&&(!i.hasOwnProperty("required")||i.required)&&(r=!1)}return!r}},computed:{add_edit_disabled(){if(!this.editor_open)return!0;this.selected_state;const e=$("input[name=edit_cotegory]:checked").val(),t=this.config.edits.find(r=>r.name===e);if(e==null||t==null)return!0;let n=!1;if(t.type==null||t.type=="single_span"||t.type=="multi_span"){const r=this.selected_state.source_span,i=this.selected_state.target_span;t.enable_input&&t.enable_output?r!=null&&r!=""&&i!=null&&i!=""&&(n=!0):t.enable_input?r!=null&&r!=""&&(n=!0):t.enable_output?i!=null&&i!=""&&(n=!0):n=!0}return t.type=="composite"&&this.selected_edits.length>0&&(n=!0),!n}}},nC=Object.assign(eC,{__name:"AnnotationEditor",setup(e){return(t,n)=>(Ft(),zt("div",ck,[ot("div",uk,[ot("div",hk,[ot("div",fk,[ot("p",dk,[fn(Ut(e.config.interface_text.annotation_editor.add_edit_header)+" ",1),pk]),ot("div",gk,[ot("p",_k,[ot("i",null,Ut(e.config.interface_text.annotation_editor.select_edit_header)+".",1)]),ot("div",mk,[(Ft(!0),zt(_i,null,ps(e.config.edits,r=>(Ft(),zt("div",{key:r.id,class:"edit-box mr2 dib"},[ot("input",{onClick:n[0]||(n[0]=(...i)=>t.show_span_selection&&t.show_span_selection(...i)),class:"checkbox-tools-edit-category checkbox-tools",type:"radio",name:"edit_cotegory",id:`edit_cotegory-${r.name}`,value:r.name},null,8,vk),ot("label",{class:Re(`txt-${r.name}`),for:`edit_cotegory-${r.name}`},[ot("i",{class:Re(`fa-solid ${r.icon} fa-1-5x mb1`)},null,2),fn(" "+Ut(r.label),1)],10,yk)]))),128))]),(Ft(!0),zt(_i,null,ps(e.config.edits,r=>(Ft(),zt("div",{key:r.id,class:"span-selection-div","data-category":r.name},[r.enable_input?(Ft(),zt("div",wk,[ot("p",xk,[fn(Ut(e.config.interface_text.annotation_editor.select_instructions)+" ",1),ot("i",null,Ut(e.config.interface_text.typology.source_label),1),fn(".")]),ot("p",Ek,[fn(Ut(e.config.interface_text.annotation_editor.selected_label)+" "+Ut(e.config.interface_text.typology.span_unit_name)+": ",1),ot("span",{innerHTML:e.selected_state.source_span},null,8,Ak)])])):Ae("",!0),r.enable_output?(Ft(),zt("div",Sk,[ot("div",{class:"span-selection-div","data-category":r.name},[ot("p",Ck,[fn(Ut(e.config.interface_text.annotation_editor.select_instructions)+" ",1),ot("i",null,Ut(e.config.interface_text.typology.target_label),1),fn(".")]),ot("p",Tk,[fn(Ut(e.config.interface_text.annotation_editor.selected_label)+" "+Ut(e.config.interface_text.typology.span_unit_name)+": ",1),ot("span",{innerHTML:e.selected_state.target_span},null,8,Ik)])],8,kk)])):Ae("",!0),r.type=="composite"?(Ft(),zt("div",Rk,[ot("div",{class:"span-selection-div","data-category":r.name},[ot("p",Ok,Ut(e.config.interface_text.annotation_editor.composite_seletion_instructions)+" "+Ut(r.name)+".",1),ot("p",Pk,[fn(Ut(e.config.interface_text.annotation_editor.selected_label)+" "+Ut(e.config.interface_text.typology.edits_unit_name)+": ",1),ot("span",{innerHTML:e.selected_edits_html},null,8,Mk)])],8,Dk)])):Ae("",!0)],8,bk))),128))])]),ot("div",Lk,[ot("button",{onClick:n[1]||(n[1]=(...r)=>t.cancel_click&&t.cancel_click(...r)),class:"cancel-button b quality_button bw0 ba mr2 br-pill-ns grow",type:"button"},[fn(Ut(e.config.interface_text.buttons.cancel_label)+" ",1),Nk]),ot("button",{onClick:n[2]||(n[2]=(...r)=>t.save_click&&t.save_click(...r)),class:Re([{"o-40":t.add_edit_disabled,grow:!t.add_edit_disabled},"confirm-button b quality_button bw0 ba ml2 br-pill-ns"]),disabled:t.add_edit_disabled,type:"button"},[fn(Ut(e.config.interface_text.buttons.save_label)+" ",1),Vk],10,Fk)])])]),(Ft(!0),zt(_i,null,ps(e.config.edits,r=>(Ft(),zt("div",{key:r.id},[ot("div",{class:"quality-selection w-100",id:`${r.name}_edit_annotation`,"data-category":r.name},[ot("div",qk,[ot("div",Bk,[ot("p",Uk,[fn(Ut(e.config.interface_text.annotation_editor.add_edit_header)+" ",1),zk]),Hk,ot("div",Gk,[ot("span",{class:Re(`edit-type txt-${r.name} f3`)},Ut(r.label)+": ",3),r.enable_input?(Ft(),zt("span",{key:0,innerHTML:e.annotating_edit_span.source},null,8,Wk)):Ae("",!0),r.enable_input&&r.enable_output?(Ft(),zt("span",{key:1,class:Re(`edit-type txt-${r.name} f3`)}," "+Ut(e.config.interface_text.annotation_editor.composite_span_unification)+" ",3)):Ae("",!0),r.enable_output?(Ft(),zt("span",{key:2,innerHTML:e.annotating_edit_span.target},null,8,jk)):Ae("",!0),r.type=="composite"?(Ft(),zt("span",{key:3,innerHTML:e.annotating_edit_span.composite},null,8,Kk)):Ae("",!0)]),ot("div",Yk,[(Ft(!0),zt(_i,null,ps(r.annotation,i=>(Ft(),zt("div",{key:i.id},[er(lk,{edit_state:t.edit_state,empty_question_state:t.empty_edit_state[r.name][i.name],question_state:t.edit_state[r.name][i.name],question:i,edit_type:r,set_edit_state:t.set_edit_state,config:e.config,parent_show_next_question:null,isRoot:"true",ref_for:!0,ref:`${r.name}_${i.name}`,force_update:t.force_update_f},null,8,["edit_state","empty_question_state","question_state","question","edit_type","set_edit_state","config","force_update"])]))),128))])]),ot("div",Qk,[ot("button",{onClick:i=>t.cancel_annotation_click(r.name,t.$e),class:"cancel-button b quality_button bw0 ba mr2 br-pill-ns grow",type:"button"},[fn(Ut(e.config.interface_text.buttons.cancel_label)+" ",1),Xk],8,Zk),ot("button",{onClick:i=>t.save_annotation_click(r.name,t.$e),class:Re(["confirm-button b quality_button bw0 ba ml2 br-pill-ns",{"o-40":t.annotate_edit_disabled(r),grow:!t.annotate_edit_disabled(r)}]),disabled:t.annotate_edit_disabled(r)},[fn(Ut(e.config.interface_text.buttons.save_label)+" ",1),tC],10,Jk)])])],8,$k)]))),128))]))}});/*! LeaderLine v1.0.5 (c) anseki https://anseki.github.io/leader-line/ */var Ng=function(){var e,t,n,r,i,o,l,h,f,d,v,b,k,S="leader-line",Q=1,Z=2,tt=3,ut=4,rt={top:Q,right:Z,bottom:tt,left:ut},yt=1,wt=2,Vt=3,_t=4,Yt=5,we={straight:yt,arc:wt,fluid:Vt,magnet:_t,grid:Yt},Ue="behind",se=S+"-defs",Oe='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="leader-line-defs"><style><![CDATA[.leader-line{position:absolute;overflow:visible!important;pointer-events:none!important;font-size:16px}#leader-line-defs{width:0;height:0;position:absolute;left:0;top:0}.leader-line-line-path{fill:none}.leader-line-mask-bg-rect{fill:#fff}.leader-line-caps-mask-anchor,.leader-line-caps-mask-marker-shape{fill:#000}.leader-line-caps-mask-anchor{stroke:#000}.leader-line-caps-mask-line,.leader-line-plugs-face{stroke:transparent}.leader-line-line-mask-shape{stroke:#fff}.leader-line-line-outline-mask-shape{stroke:#000}.leader-line-plug-mask-shape{fill:#fff;stroke:#000}.leader-line-plug-outline-mask-shape{fill:#000;stroke:#fff}.leader-line-areaAnchor{position:absolute;overflow:visible!important}]]></style><defs><circle id="leader-line-disc" cx="0" cy="0" r="5"/><rect id="leader-line-square" x="-5" y="-5" width="10" height="10"/><polygon id="leader-line-arrow1" points="-8,-8 8,0 -8,8 -5,0"/><polygon id="leader-line-arrow2" points="-4,-8 4,0 -4,8 -7,5 -2,0 -7,-5"/><polygon id="leader-line-arrow3" points="-4,-5 8,0 -4,5"/><g id="leader-line-hand"><path style="fill: #fcfcfc" d="M9.19 11.14h4.75c1.38 0 2.49-1.11 2.49-2.49 0-.51-.15-.98-.41-1.37h1.3c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.53-2.49-2.53h1.02c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49h14.96c1.37 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49H16.58C16-9.86 14.28-11.14 9.7-11.14c-4.79 0-6.55 3.42-7.87 4.73H-2.14v13.23h3.68C3.29 9.97 5.47 11.14 9.19 11.14L9.19 11.14Z"/><path style="fill: black" d="M13.95 12c1.85 0 3.35-1.5 3.35-3.35 0-.17-.02-.34-.04-.51h.07c1.85 0 3.35-1.5 3.35-3.35 0-.79-.27-1.51-.72-2.08 1.03-.57 1.74-1.67 1.74-2.93 0-.59-.16-1.15-.43-1.63h12.04c1.85 0 3.35-1.5 3.35-3.35 0-1.85-1.5-3.35-3.35-3.35H17.2C16.26-10.93 13.91-12 9.7-12 5.36-12 3.22-9.4 1.94-7.84c0 0-.29.33-.5.57-.63 0-3.58 0-3.58 0C-2.61-7.27-3-6.88-3-6.41v13.23c0 .47.39.86.86.86 0 0 2.48 0 3.2 0C2.9 10.73 5.29 12 9.19 12L13.95 12ZM9.19 10.28c-3.46 0-5.33-1.05-6.9-3.87-.15-.27-.44-.44-.75-.44 0 0-1.81 0-2.82 0V-5.55c1.06 0 3.11 0 3.11 0 .25 0 .44-.06.61-.25l.83-.95c1.23-1.49 2.91-3.53 6.43-3.53 3.45 0 4.9.74 5.57 1.72h-4.3c-.48 0-.86.38-.86.86s.39.86.86.86h22.34c.9 0 1.63.73 1.63 1.63 0 .9-.73 1.63-1.63 1.63H15.83c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.52c.9 0 1.63.73 1.63 1.63s-.73 1.63-1.63 1.63h-3.12c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.11c.88 0 1.63.76 1.63 1.67 0 .9-.73 1.63-1.63 1.63h-3.2c-.48 0-.86.39-.86.86 0 .47.39.86.86.86h1.36c.05.16.09.34.09.51 0 .9-.73 1.63-1.63 1.63C13.95 10.28 9.19 10.28 9.19 10.28Z"/></g><g id="leader-line-crosshair"><path d="M0-78.97c-43.54 0-78.97 35.43-78.97 78.97 0 43.54 35.43 78.97 78.97 78.97s78.97-35.43 78.97-78.97C78.97-43.54 43.55-78.97 0-78.97ZM76.51-1.21h-9.91v-9.11h-2.43v9.11h-11.45c-.64-28.12-23.38-50.86-51.5-51.5V-64.17h9.11V-66.6h-9.11v-9.91C42.46-75.86 75.86-42.45 76.51-1.21ZM-1.21-30.76h-9.11v2.43h9.11V-4.2c-1.44.42-2.57 1.54-2.98 2.98H-28.33v-9.11h-2.43v9.11H-50.29C-49.65-28-27.99-49.65-1.21-50.29V-30.76ZM-30.76 1.21v9.11h2.43v-9.11H-4.2c.42 1.44 1.54 2.57 2.98 2.98v24.13h-9.11v2.43h9.11v19.53C-27.99 49.65-49.65 28-50.29 1.21H-30.76ZM1.22 30.75h9.11v-2.43h-9.11V4.2c1.44-.42 2.56-1.54 2.98-2.98h24.13v9.11h2.43v-9.11h19.53C49.65 28 28 49.65 1.22 50.29V30.75ZM30.76-1.21v-9.11h-2.43v9.11H4.2c-.42-1.44-1.54-2.56-2.98-2.98V-28.33h9.11v-2.43h-9.11V-50.29C28-49.65 49.65-28 50.29-1.21H30.76ZM-1.21-76.51v9.91h-9.11v2.43h9.11v11.45c-28.12.64-50.86 23.38-51.5 51.5H-64.17v-9.11H-66.6v9.11h-9.91C-75.86-42.45-42.45-75.86-1.21-76.51ZM-76.51 1.21h9.91v9.11h2.43v-9.11h11.45c.64 28.12 23.38 50.86 51.5 51.5v11.45h-9.11v2.43h9.11v9.91C-42.45 75.86-75.86 42.45-76.51 1.21ZM1.22 76.51v-9.91h9.11v-2.43h-9.11v-11.45c28.12-.64 50.86-23.38 51.5-51.5h11.45v9.11h2.43v-9.11h9.91C75.86 42.45 42.45 75.86 1.22 76.51Z"/><path d="M0 83.58-7.1 96 7.1 96Z"/><path d="M0-83.58 7.1-96-7.1-96"/><path d="M83.58 0 96 7.1 96-7.1Z"/><path d="M-83.58 0-96-7.1-96 7.1Z"/></g></defs></svg>',pr={disc:{elmId:"leader-line-disc",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},square:{elmId:"leader-line-square",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},arrow1:{elmId:"leader-line-arrow1",bBox:{left:-8,top:-8,width:16,height:16,right:8,bottom:8},widthR:4,heightR:4,bCircle:8,sideLen:8,backLen:8,overhead:8,outlineBase:2,outlineMax:1.5},arrow2:{elmId:"leader-line-arrow2",bBox:{left:-7,top:-8,width:11,height:16,right:4,bottom:8},widthR:2.75,heightR:4,bCircle:8,sideLen:8,backLen:7,overhead:4,outlineBase:1,outlineMax:1.75},arrow3:{elmId:"leader-line-arrow3",bBox:{left:-4,top:-5,width:12,height:10,right:8,bottom:5},widthR:3,heightR:2.5,bCircle:8,sideLen:5,backLen:4,overhead:8,outlineBase:1,outlineMax:2.5},hand:{elmId:"leader-line-hand",bBox:{left:-3,top:-12,width:40,height:24,right:37,bottom:12},widthR:10,heightR:6,bCircle:37,sideLen:12,backLen:3,overhead:37},crosshair:{elmId:"leader-line-crosshair",noRotate:!0,bBox:{left:-96,top:-96,width:192,height:192,right:96,bottom:96},widthR:48,heightR:48,bCircle:96,sideLen:96,backLen:96,overhead:0}},gr={behind:Ue,disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},vt={disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},ke=[Q,Z,tt,ut],ne="auto",on={x:"left",y:"top",width:"width",height:"height"},ir=80,Ha=4,Ds=5,_r=120,Ga=8,fu=3.75,Ai=10,pn=30,Jr=.5522847,du=.25*Math.PI,Si=/^\s*(\-?[\d\.]+)\s*(\%)?\s*$/,Mt="http://www.w3.org/2000/svg",Os="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&!window.navigator.msPointerEnabled,gn=!Os&&!!document.uniqueID,Rr="MozAppearance"in document.documentElement.style,Zi=!(Os||Rr||!window.chrome||!window.CSS),pe=!Os&&!gn&&!Rr&&!Zi&&!window.chrome&&"WebkitAppearance"in document.documentElement.style,ki=gn||Os?.2:.1,Dn={path:Vt,lineColor:"coral",lineSize:4,plugSE:[Ue,"arrow1"],plugSizeSE:[1,1],lineOutlineEnabled:!1,lineOutlineColor:"indianred",lineOutlineSize:.25,plugOutlineEnabledSE:[!1,!1],plugOutlineSizeSE:[1,1]},an=(v={}.toString,b={}.hasOwnProperty.toString,k=b.call(Object),function(u){var g,_;return u&&v.call(u)==="[object Object]"&&(!(g=Object.getPrototypeOf(u))||(_=g.hasOwnProperty("constructor")&&g.constructor)&&typeof _=="function"&&b.call(_)===k)}),_n=Number.isFinite||function(u){return typeof u=="number"&&window.isFinite(u)},Ze=function(){var u,g={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},_=1e3/60/2,m=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(P){setTimeout(P,_)},x=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(P){clearTimeout(P)},A=Number.isFinite||function(P){return typeof P=="number"&&window.isFinite(P)},z=[],N=0;function U(){var P=Date.now(),Y=!1;u&&(x.call(window,u),u=null),z.forEach(function(R){var D,O,q;if(R.framesStart){if((D=P-R.framesStart)>=R.duration&&R.count&&R.loopsLeft<=1)return q=R.frames[R.lastFrame=R.reverse?0:R.frames.length-1],R.frameCallback(q.value,!0,q.timeRatio,q.outputRatio),void(R.framesStart=null);if(D>R.duration){if(O=Math.floor(D/R.duration),R.count){if(O>=R.loopsLeft)return q=R.frames[R.lastFrame=R.reverse?0:R.frames.length-1],R.frameCallback(q.value,!0,q.timeRatio,q.outputRatio),void(R.framesStart=null);R.loopsLeft-=O}R.framesStart+=R.duration*O,D=P-R.framesStart}R.reverse&&(D=R.duration-D),q=R.frames[R.lastFrame=Math.round(D/_)],R.frameCallback(q.value,!1,q.timeRatio,q.outputRatio)!==!1?Y=!0:R.framesStart=null}}),Y&&(u=m.call(window,U))}function C(P,Y){P.framesStart=Date.now(),Y!=null&&(P.framesStart-=P.duration*(P.reverse?1-Y:Y)),P.loopsLeft=P.count,P.lastFrame=null,U()}return{add:function(P,Y,R,D,O,q,K){var et,lt,it,j,L,V,F,mt,xt,pt,T,J,ct,Ct=++N;function It(gt,W){return{value:P(W),timeRatio:gt,outputRatio:W}}if(typeof O=="string"&&(O=g[O]),P=P||function(){},R<_)lt=[It(0,0),It(1,1)];else{if(it=_/R,lt=[It(0,0)],O[0]===0&&O[1]===0&&O[2]===1&&O[3]===1)for(L=it;L<=1;L+=it)lt.push(It(L,L));else for(V=j=(L=it)/10;V<=1;V+=j)pt=(xt=(mt=V)*mt)*mt,ct=3*(T=1-mt)*xt,L<=(F={x:(J=3*(T*T)*mt)*O[0]+ct*O[2]+pt,y:J*O[1]+ct*O[3]+pt}).x&&(lt.push(It(F.x,F.y)),L+=it);lt.push(It(1,1))}return et={animId:Ct,frameCallback:Y,duration:R,count:D,frames:lt,reverse:!!q},z.push(et),K!==!1&&C(et,K),Ct},remove:function(P){var Y;z.some(function(R,D){return R.animId===P&&(Y=D,!(R.framesStart=null))})&&z.splice(Y,1)},start:function(P,Y,R){z.some(function(D){return D.animId===P&&(D.reverse=!!Y,C(D,R),!0)})},stop:function(P,Y){var R;return z.some(function(D){return D.animId===P&&(Y?D.lastFrame!=null&&(R=D.frames[D.lastFrame].timeRatio):(R=(Date.now()-D.framesStart)/D.duration,D.reverse&&(R=1-R),R<0?R=0:1<R&&(R=1)),!(D.framesStart=null))}),R},validTiming:function(P){return typeof P=="string"?g[P]:Array.isArray(P)&&[0,1,2,3].every(function(Y){return A(P[Y])&&0<=P[Y]&&P[Y]<=1})?[P[0],P[1],P[2],P[3]]:null}}}(),Xi=function(u){u.SVGPathElement.prototype.getPathData&&u.SVGPathElement.prototype.setPathData||function(){var g={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},_=function(R){this._string=R,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()},m=u.navigator.userAgent.indexOf("MSIE ")!==-1;_.prototype={parseSegment:function(){var R=this._string[this._currentIndex],D=g[R]?g[R]:null;if(D===null){if(this._prevCommand===null||(D=(R==="+"||R==="-"||R==="."||"0"<=R&&R<="9")&&this._prevCommand!=="Z"?this._prevCommand==="M"?"L":this._prevCommand==="m"?"l":this._prevCommand:null)===null)return null}else this._currentIndex+=1;var O=null,q=(this._prevCommand=D).toUpperCase();return q==="H"||q==="V"?O=[this._parseNumber()]:q==="M"||q==="L"||q==="T"?O=[this._parseNumber(),this._parseNumber()]:q==="S"||q==="Q"?O=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:q==="C"?O=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:q==="A"?O=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:q==="Z"&&(this._skipOptionalSpaces(),O=[]),O===null||0<=O.indexOf(null)?null:{type:D,values:O}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var R=this._string[this._currentIndex];return g[R]?g[R]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var R=this.peekSegmentType();return R==="M"||R==="m"},_isCurrentSpace:function(){var R=this._string[this._currentIndex];return R<=" "&&(R===" "||R===`
`||R==="	"||R==="\r"||R==="\f")},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string[this._currentIndex]!==",")&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string[this._currentIndex]===","&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var R=0,D=0,O=1,q=0,K=1,et=1,lt=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,K=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])&&this._string[this._currentIndex]!==".")return null;for(var it=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==it)for(var j=this._currentIndex-1,L=1;it<=j;)D+=L*(this._string[j]-"0"),j-=1,L*=10;if(this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="."){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)O*=10,q+=(this._string.charAt(this._currentIndex)-"0")/O,this._currentIndex+=1}if(this._currentIndex!==lt&&this._currentIndex+1<this._endIndex&&(this._string[this._currentIndex]==="e"||this._string[this._currentIndex]==="E")&&this._string[this._currentIndex+1]!=="x"&&this._string[this._currentIndex+1]!=="m"){if(this._currentIndex+=1,this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,et=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)R*=10,R+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var V=D+q;return V*=K,R&&(V*=Math.pow(10,et*R)),lt===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),V)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var R=null,D=this._string[this._currentIndex];if(this._currentIndex+=1,D==="0")R=0;else{if(D!=="1")return null;R=1}return this._skipOptionalSpacesOrDelimiter(),R}};var x=function(R){if(!R||R.length===0)return[];var D=new _(R),O=[];if(D.initialCommandIsMoveTo())for(;D.hasMoreData();){var q=D.parseSegment();if(q===null)break;O.push(q)}return O},A=u.SVGPathElement.prototype.setAttribute,z=u.SVGPathElement.prototype.removeAttribute,N=u.Symbol?u.Symbol():"__cachedPathData",U=u.Symbol?u.Symbol():"__cachedNormalizedPathData",C=function(R,D,O,q,K,et,lt,it,j,L){var V,F,mt,xt,pt,T=function(Ie,ge,Ne){return{x:Ie*Math.cos(Ne)-ge*Math.sin(Ne),y:Ie*Math.sin(Ne)+ge*Math.cos(Ne)}},J=(V=lt,Math.PI*V/180),ct=[];if(L)F=L[0],mt=L[1],xt=L[2],pt=L[3];else{var Ct=T(R,D,-J);R=Ct.x,D=Ct.y;var It=T(O,q,-J),gt=(R-(O=It.x))/2,W=(D-(q=It.y))/2,$t=gt*gt/(K*K)+W*W/(et*et);1<$t&&(K*=$t=Math.sqrt($t),et*=$t);var ve=K*K,Dt=et*et,jt=ve*Dt-ve*W*W-Dt*gt*gt,Ce=ve*W*W+Dt*gt*gt,Te=(it===j?-1:1)*Math.sqrt(Math.abs(jt/Ce));xt=Te*K*W/et+(R+O)/2,pt=Te*-et*gt/K+(D+q)/2,F=Math.asin(parseFloat(((D-pt)/et).toFixed(9))),mt=Math.asin(parseFloat(((q-pt)/et).toFixed(9))),R<xt&&(F=Math.PI-F),O<xt&&(mt=Math.PI-mt),F<0&&(F=2*Math.PI+F),mt<0&&(mt=2*Math.PI+mt),j&&mt<F&&(F-=2*Math.PI),!j&&F<mt&&(mt-=2*Math.PI)}var ye=mt-F;if(Math.abs(ye)>120*Math.PI/180){var cn=mt,Oi=O,Kt=q;mt=j&&F<mt?F+120*Math.PI/180*1:F+120*Math.PI/180*-1,O=xt+K*Math.cos(mt),q=pt+et*Math.sin(mt),ct=C(O,q,Oi,Kt,K,et,lt,0,j,[mt,cn,xt,pt])}ye=mt-F;var Rt=Math.cos(F),St=Math.sin(F),Qt=Math.cos(mt),kt=Math.sin(mt),te=Math.tan(ye/4),$e=4/3*K*te,xe=4/3*et*te,Hn=[R,D],Gn=[R+$e*St,D-xe*Rt],Or=[O+$e*kt,q-xe*Qt],qt=[O,q];if(Gn[0]=2*Hn[0]-Gn[0],Gn[1]=2*Hn[1]-Gn[1],L)return[Gn,Or,qt].concat(ct);ct=[Gn,Or,qt].concat(ct).join().split(",");var G=[],Bt=[];return ct.forEach(function(Ie,ge){ge%2?Bt.push(T(ct[ge-1],ct[ge],J).y):Bt.push(T(ct[ge],ct[ge+1],J).x),Bt.length===6&&(G.push(Bt),Bt=[])}),G},P=function(R){return R.map(function(D){return{type:D.type,values:Array.prototype.slice.call(D.values)}})},Y=function(R){var D=[],O=null,q=null,K=null,et=null,lt=null,it=null,j=null;return R.forEach(function(L){if(L.type==="M"){var V=L.values[0],F=L.values[1];D.push({type:"M",values:[V,F]}),et=it=V,lt=j=F}else if(L.type==="C"){var mt=L.values[0],xt=L.values[1],pt=L.values[2],T=L.values[3];V=L.values[4],F=L.values[5],D.push({type:"C",values:[mt,xt,pt,T,V,F]}),q=pt,K=T,et=V,lt=F}else if(L.type==="L")V=L.values[0],F=L.values[1],D.push({type:"L",values:[V,F]}),et=V,lt=F;else if(L.type==="H")V=L.values[0],D.push({type:"L",values:[V,lt]}),et=V;else if(L.type==="V")F=L.values[0],D.push({type:"L",values:[et,F]}),lt=F;else if(L.type==="S")pt=L.values[0],T=L.values[1],V=L.values[2],F=L.values[3],O==="C"||O==="S"?(J=et+(et-q),ct=lt+(lt-K)):(J=et,ct=lt),D.push({type:"C",values:[J,ct,pt,T,V,F]}),q=pt,K=T,et=V,lt=F;else if(L.type==="T"){V=L.values[0],F=L.values[1],O==="Q"||O==="T"?(mt=et+(et-q),xt=lt+(lt-K)):(mt=et,xt=lt);var J=et+2*(mt-et)/3,ct=lt+2*(xt-lt)/3,Ct=V+2*(mt-V)/3,It=F+2*(xt-F)/3;D.push({type:"C",values:[J,ct,Ct,It,V,F]}),q=mt,K=xt,et=V,lt=F}else if(L.type==="Q")mt=L.values[0],xt=L.values[1],V=L.values[2],F=L.values[3],J=et+2*(mt-et)/3,ct=lt+2*(xt-lt)/3,Ct=V+2*(mt-V)/3,It=F+2*(xt-F)/3,D.push({type:"C",values:[J,ct,Ct,It,V,F]}),q=mt,K=xt,et=V,lt=F;else if(L.type==="A"){var gt=L.values[0],W=L.values[1],$t=L.values[2],ve=L.values[3],Dt=L.values[4];V=L.values[5],F=L.values[6],gt===0||W===0?(D.push({type:"C",values:[et,lt,V,F,V,F]}),et=V,lt=F):(et!==V||lt!==F)&&C(et,lt,V,F,gt,W,$t,ve,Dt).forEach(function(jt){D.push({type:"C",values:jt}),et=V,lt=F})}else L.type==="Z"&&(D.push(L),et=it,lt=j);O=L.type}),D};u.SVGPathElement.prototype.setAttribute=function(R,D){R==="d"&&(this[N]=null,this[U]=null),A.call(this,R,D)},u.SVGPathElement.prototype.removeAttribute=function(R,D){R==="d"&&(this[N]=null,this[U]=null),z.call(this,R)},u.SVGPathElement.prototype.getPathData=function(R){if(R&&R.normalize){if(this[U])return P(this[U]);this[N]?it=P(this[N]):(it=x(this.getAttribute("d")||""),this[N]=P(it));var D=Y((O=[],lt=et=K=q=null,it.forEach(function(j){var L=j.type;if(L==="M"){var V=j.values[0],F=j.values[1];O.push({type:"M",values:[V,F]}),q=et=V,K=lt=F}else if(L==="m")V=q+j.values[0],F=K+j.values[1],O.push({type:"M",values:[V,F]}),q=et=V,K=lt=F;else if(L==="L")V=j.values[0],F=j.values[1],O.push({type:"L",values:[V,F]}),q=V,K=F;else if(L==="l")V=q+j.values[0],F=K+j.values[1],O.push({type:"L",values:[V,F]}),q=V,K=F;else if(L==="C"){var mt=j.values[0],xt=j.values[1],pt=j.values[2],T=j.values[3];V=j.values[4],F=j.values[5],O.push({type:"C",values:[mt,xt,pt,T,V,F]}),q=V,K=F}else L==="c"?(mt=q+j.values[0],xt=K+j.values[1],pt=q+j.values[2],T=K+j.values[3],V=q+j.values[4],F=K+j.values[5],O.push({type:"C",values:[mt,xt,pt,T,V,F]}),q=V,K=F):L==="Q"?(mt=j.values[0],xt=j.values[1],V=j.values[2],F=j.values[3],O.push({type:"Q",values:[mt,xt,V,F]}),q=V,K=F):L==="q"?(mt=q+j.values[0],xt=K+j.values[1],V=q+j.values[2],F=K+j.values[3],O.push({type:"Q",values:[mt,xt,V,F]}),q=V,K=F):L==="A"?(V=j.values[5],F=j.values[6],O.push({type:"A",values:[j.values[0],j.values[1],j.values[2],j.values[3],j.values[4],V,F]}),q=V,K=F):L==="a"?(V=q+j.values[5],F=K+j.values[6],O.push({type:"A",values:[j.values[0],j.values[1],j.values[2],j.values[3],j.values[4],V,F]}),q=V,K=F):L==="H"?(V=j.values[0],O.push({type:"H",values:[V]}),q=V):L==="h"?(V=q+j.values[0],O.push({type:"H",values:[V]}),q=V):L==="V"?(F=j.values[0],O.push({type:"V",values:[F]}),K=F):L==="v"?(F=K+j.values[0],O.push({type:"V",values:[F]}),K=F):L==="S"?(pt=j.values[0],T=j.values[1],V=j.values[2],F=j.values[3],O.push({type:"S",values:[pt,T,V,F]}),q=V,K=F):L==="s"?(pt=q+j.values[0],T=K+j.values[1],V=q+j.values[2],F=K+j.values[3],O.push({type:"S",values:[pt,T,V,F]}),q=V,K=F):L==="T"?(V=j.values[0],F=j.values[1],O.push({type:"T",values:[V,F]}),q=V,K=F):L==="t"?(V=q+j.values[0],F=K+j.values[1],O.push({type:"T",values:[V,F]}),q=V,K=F):L!=="Z"&&L!=="z"||(O.push({type:"Z",values:[]}),q=et,K=lt)}),O));return this[U]=P(D),D}if(this[N])return P(this[N]);var O,q,K,et,lt,it=x(this.getAttribute("d")||"");return this[N]=P(it),it},u.SVGPathElement.prototype.setPathData=function(R){if(R.length===0)m?this.setAttribute("d",""):this.removeAttribute("d");else{for(var D="",O=0,q=R.length;O<q;O+=1){var K=R[O];0<O&&(D+=" "),D+=K.type,K.values&&0<K.values.length&&(D+=" "+K.values.join(" "))}this.setAttribute("d",D)}},u.SVGRectElement.prototype.getPathData=function(R){var D=this.x.baseVal.value,O=this.y.baseVal.value,q=this.width.baseVal.value,K=this.height.baseVal.value,et=this.hasAttribute("rx")?this.rx.baseVal.value:this.ry.baseVal.value,lt=this.hasAttribute("ry")?this.ry.baseVal.value:this.rx.baseVal.value;q/2<et&&(et=q/2),K/2<lt&&(lt=K/2);var it=[{type:"M",values:[D+et,O]},{type:"H",values:[D+q-et]},{type:"A",values:[et,lt,0,0,1,D+q,O+lt]},{type:"V",values:[O+K-lt]},{type:"A",values:[et,lt,0,0,1,D+q-et,O+K]},{type:"H",values:[D+et]},{type:"A",values:[et,lt,0,0,1,D,O+K-lt]},{type:"V",values:[O+lt]},{type:"A",values:[et,lt,0,0,1,D+et,O]},{type:"Z",values:[]}];return it=it.filter(function(j){return j.type!=="A"||j.values[0]!==0&&j.values[1]!==0}),R&&R.normalize===!0&&(it=Y(it)),it},u.SVGCircleElement.prototype.getPathData=function(R){var D=this.cx.baseVal.value,O=this.cy.baseVal.value,q=this.r.baseVal.value,K=[{type:"M",values:[D+q,O]},{type:"A",values:[q,q,0,0,1,D,O+q]},{type:"A",values:[q,q,0,0,1,D-q,O]},{type:"A",values:[q,q,0,0,1,D,O-q]},{type:"A",values:[q,q,0,0,1,D+q,O]},{type:"Z",values:[]}];return R&&R.normalize===!0&&(K=Y(K)),K},u.SVGEllipseElement.prototype.getPathData=function(R){var D=this.cx.baseVal.value,O=this.cy.baseVal.value,q=this.rx.baseVal.value,K=this.ry.baseVal.value,et=[{type:"M",values:[D+q,O]},{type:"A",values:[q,K,0,0,1,D,O+K]},{type:"A",values:[q,K,0,0,1,D-q,O]},{type:"A",values:[q,K,0,0,1,D,O-K]},{type:"A",values:[q,K,0,0,1,D+q,O]},{type:"Z",values:[]}];return R&&R.normalize===!0&&(et=Y(et)),et},u.SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},u.SVGPolylineElement.prototype.getPathData=function(){for(var R=[],D=0;D<this.points.numberOfItems;D+=1){var O=this.points.getItem(D);R.push({type:D===0?"M":"L",values:[O.x,O.y]})}return R},u.SVGPolygonElement.prototype.getPathData=function(){for(var R=[],D=0;D<this.points.numberOfItems;D+=1){var O=this.points.getItem(D);R.push({type:D===0?"M":"L",values:[O.x,O.y]})}return R.push({type:"Z",values:[]}),R}}()},sr=function(u){var g={};function _(m){if(g[m])return g[m].exports;var x=g[m]={i:m,l:!1,exports:{}};return u[m].call(x.exports,x,x.exports,_),x.l=!0,x.exports}return _.m=u,_.c=g,_.d=function(m,x,A){_.o(m,x)||Object.defineProperty(m,x,{configurable:!1,enumerable:!0,get:A})},_.r=function(m){Object.defineProperty(m,"__esModule",{value:!0})},_.n=function(m){var x=m&&m.__esModule?function(){return m.default}:function(){return m};return _.d(x,"a",x),x},_.o=function(m,x){return Object.prototype.hasOwnProperty.call(m,x)},_.p="",_(_.s=0)}([function(u,g,_){_.r(g);var m=500,x=[],A=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(R){return setTimeout(R,1e3/60)},z=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(R){return clearTimeout(R)},N=void 0,U=Date.now();function C(){var R=void 0,D=void 0;N&&(z.call(window,N),N=null),x.forEach(function(O){O.event&&(O.listener(O.event),O.event=null,R=!0)}),R?(U=Date.now(),D=!0):Date.now()-U<m&&(D=!0),D&&(N=A.call(window,C))}function P(R){var D=-1;return x.some(function(O,q){return O.listener===R&&(D=q,!0)}),D}var Y={add:function(R){var D=void 0;return P(R)===-1?(x.push(D={listener:R}),function(O){D.event=O,N||C()}):null},remove:function(R){var D;-1<(D=P(R))&&(x.splice(D,1),!x.length&&N&&(z.call(window,N),N=null))}};g.default=Y}]).default,ti={line_altColor:{iniValue:!1},line_color:{},line_colorTra:{iniValue:!1},line_strokeWidth:{},plug_enabled:{iniValue:!1},plug_enabledSE:{hasSE:!0,iniValue:!1},plug_plugSE:{hasSE:!0,iniValue:Ue},plug_colorSE:{hasSE:!0},plug_colorTraSE:{hasSE:!0,iniValue:!1},plug_markerWidthSE:{hasSE:!0},plug_markerHeightSE:{hasSE:!0},lineOutline_enabled:{iniValue:!1},lineOutline_color:{},lineOutline_colorTra:{iniValue:!1},lineOutline_strokeWidth:{},lineOutline_inStrokeWidth:{},plugOutline_enabledSE:{hasSE:!0,iniValue:!1},plugOutline_plugSE:{hasSE:!0,iniValue:Ue},plugOutline_colorSE:{hasSE:!0},plugOutline_colorTraSE:{hasSE:!0,iniValue:!1},plugOutline_strokeWidthSE:{hasSE:!0},plugOutline_inStrokeWidthSE:{hasSE:!0},position_socketXYSE:{hasSE:!0,hasProps:!0},position_plugOverheadSE:{hasSE:!0},position_path:{},position_lineStrokeWidth:{},position_socketGravitySE:{hasSE:!0},path_pathData:{},path_edge:{hasProps:!0},viewBox_bBox:{hasProps:!0},viewBox_plugBCircleSE:{hasSE:!0},lineMask_enabled:{iniValue:!1},lineMask_outlineMode:{iniValue:!1},lineMask_x:{},lineMask_y:{},lineOutlineMask_x:{},lineOutlineMask_y:{},maskBGRect_x:{},maskBGRect_y:{},capsMaskAnchor_enabledSE:{hasSE:!0,iniValue:!1},capsMaskAnchor_pathDataSE:{hasSE:!0},capsMaskAnchor_strokeWidthSE:{hasSE:!0},capsMaskMarker_enabled:{iniValue:!1},capsMaskMarker_enabledSE:{hasSE:!0,iniValue:!1},capsMaskMarker_plugSE:{hasSE:!0,iniValue:Ue},capsMaskMarker_markerWidthSE:{hasSE:!0},capsMaskMarker_markerHeightSE:{hasSE:!0},caps_enabled:{iniValue:!1},attach_plugSideLenSE:{hasSE:!0},attach_plugBackLenSE:{hasSE:!0}},Ji={show_on:{},show_effect:{},show_animOptions:{},show_animId:{},show_inAnim:{}},Wa="fade",ei=[],ln={},ts=0,Me={},Ro=0;function Dr(u,g){var _,m;return typeof u!=typeof g||(_=an(u)?"obj":Array.isArray(u)?"array":"")!=(an(g)?"obj":Array.isArray(g)?"array":"")||(_==="obj"?Dr(m=Object.keys(u).sort(),Object.keys(g).sort())||m.some(function(x){return Dr(u[x],g[x])}):_==="array"?u.length!==g.length||u.some(function(x,A){return Dr(x,g[A])}):u!==g)}function en(u){return u&&(an(u)?Object.keys(u).reduce(function(g,_){return g[_]=en(u[_]),g},{}):Array.isArray(u)?u.map(en):u)}function ni(u){var g,_,m,x=1,A=u=(u+"").trim();function z(N){var U=1,C=Si.exec(N);return C&&(U=parseFloat(C[1]),C[2]?U=0<=U&&U<=100?U/100:1:(U<0||1<U)&&(U=1)),U}return(g=/^(rgba|hsla|hwb|gray|device\-cmyk)\s*\(([\s\S]+)\)$/i.exec(u))?(_=g[1].toLowerCase(),m=g[2].trim().split(/\s*,\s*/),_==="rgba"&&m.length===4?(x=z(m[3]),A="rgb("+m.slice(0,3).join(", ")+")"):_==="hsla"&&m.length===4?(x=z(m[3]),A="hsl("+m.slice(0,3).join(", ")+")"):_==="hwb"&&m.length===4?(x=z(m[3]),A="hwb("+m.slice(0,3).join(", ")+")"):_==="gray"&&m.length===2?(x=z(m[1]),A="gray("+m[0]+")"):_==="device-cmyk"&&5<=m.length&&(x=z(m[4]),A="device-cmyk("+m.slice(0,4).join(", ")+")")):(g=/^\#(?:([\da-f]{6})([\da-f]{2})|([\da-f]{3})([\da-f]))$/i.exec(u))?g[1]?(x=parseInt(g[2],16)/255,A="#"+g[1]):(x=parseInt(g[4]+g[4],16)/255,A="#"+g[3]):u.toLocaleLowerCase()==="transparent"&&(x=0),[x,A]}function ri(u){return!(!u||u.nodeType!==Node.ELEMENT_NODE||typeof u.getBoundingClientRect!="function")}function Ci(u,g){var _,m,x,A,z={};if(!(x=u.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(u.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_DISCONNECTED)return console.error("A disconnected element was passed."),null;for(m in _=u.getBoundingClientRect())z[m]=_[m];if(!g){if(!(A=x.defaultView))return console.error("Cannot get window that contains the element."),null;z.left+=A.pageXOffset,z.right+=A.pageXOffset,z.top+=A.pageYOffset,z.bottom+=A.pageYOffset}return z}function es(u,g){var _,m,x=[],A=u;for(g=g||window;;){if(!(_=A.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(!(m=_.defaultView))return console.error("Cannot get window that contains the element."),null;if(m===g)break;if(!(A=m.frameElement))return console.error("`baseWindow` was not found."),null;x.unshift(A)}return x}function ii(u,g){var _,m,x=0,A=0;return(m=es(u,g=g||window))?m.length?(m.forEach(function(z,N){var U,C,P=Ci(z,0<N);x+=P.left,A+=P.top,C=(U=z).ownerDocument.defaultView.getComputedStyle(U,""),P={left:U.clientLeft+parseFloat(C.paddingLeft),top:U.clientTop+parseFloat(C.paddingTop)},x+=P.left,A+=P.top}),(_=Ci(u,!0)).left+=x,_.right+=x,_.top+=A,_.bottom+=A,_):Ci(u):null}function Bn(u,g){var _=u.x-g.x,m=u.y-g.y;return Math.sqrt(_*_+m*m)}function ns(u,g,_){var m=g.x-u.x,x=g.y-u.y;return{x:u.x+m*_,y:u.y+x*_,angle:Math.atan2(x,m)/(Math.PI/180)}}function Ps(u,g,_){var m=Math.atan2(u.y-g.y,g.x-u.x);return{x:g.x+Math.cos(m)*_,y:g.y+Math.sin(m)*_*-1}}function Ti(u,g,_,m,x){var A=x*x,z=A*x,N=1-x,U=N*N,C=U*N,P=C*u.x+3*U*x*g.x+3*N*A*_.x+z*m.x,Y=C*u.y+3*U*x*g.y+3*N*A*_.y+z*m.y,R=u.x+2*x*(g.x-u.x)+A*(_.x-2*g.x+u.x),D=u.y+2*x*(g.y-u.y)+A*(_.y-2*g.y+u.y),O=g.x+2*x*(_.x-g.x)+A*(m.x-2*_.x+g.x),q=g.y+2*x*(_.y-g.y)+A*(m.y-2*_.y+g.y),K=N*u.x+x*g.x,et=N*u.y+x*g.y,lt=N*_.x+x*m.x,it=N*_.y+x*m.y,j=90-180*Math.atan2(R-O,D-q)/Math.PI;return{x:P,y:Y,fromP2:{x:R,y:D},toP1:{x:O,y:q},fromP1:{x:K,y:et},toP2:{x:lt,y:it},angle:j+=180<j?-180:180}}function Ii(u,g,_,m,x){function A(D,O,q,K,et){return D*(D*(-3*O+9*q-9*K+3*et)+6*O-12*q+6*K)-3*O+3*q}var z,N,U,C,P,Y=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],R=0;return z=(x=x==null||1<x?1:x<0?0:x)/2,[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816].forEach(function(D,O){U=A(N=z*D+z,u.x,g.x,_.x,m.x),C=A(N,u.y,g.y,_.y,m.y),P=U*U+C*C,R+=Y[O]*Math.sqrt(P)}),z*R}function Ms(u,g,_,m,x){for(var A,z=.5,N=1-z;A=Ii(u,g,_,m,N),!(Math.abs(A-x)<=.01);)N+=(A<x?1:-1)*(z/=2);return N}function Do(u,g){var _;return u.forEach(function(m){var x=g?m.map(function(A){var z={x:A.x,y:A.y};return g(z),z}):m;_||(_=[{type:"M",values:[x[0].x,x[0].y]}]),_.push(x.length?x.length===2?{type:"L",values:[x[1].x,x[1].y]}:{type:"C",values:[x[1].x,x[1].y,x[2].x,x[2].y,x[3].x,x[3].y]}:{type:"Z",values:[]})}),_}function ja(u){var g=[],_=0;return u.forEach(function(m){var x=(m.length===2?Bn:Ii).apply(null,m);g.push(x),_+=x}),{segsLen:g,lenAll:_}}function Ls(u,g){return u==null||g==null||u.length!==g.length||u.some(function(_,m){var x=g[m];return _.type!==x.type||_.values.some(function(A,z){return A!==x.values[z]})})}function je(u,g,_){u.events[g]?u.events[g].indexOf(_)<0&&u.events[g].push(_):u.events[g]=[_]}function ze(u,g,_){var m;u.events[g]&&-1<(m=u.events[g].indexOf(_))&&u.events[g].splice(m,1)}function Ri(u){l&&clearTimeout(l),ei.push(u),l=setTimeout(function(){ei.forEach(function(g){g()}),ei=[]},0)}function Le(u,g){u.reflowTargets.indexOf(g)<0&&u.reflowTargets.push(g)}function Ka(u){u.reflowTargets.forEach(function(g){var _;_=g,setTimeout(function(){var m=_.parentNode,x=_.nextSibling;m.insertBefore(m.removeChild(_),x)},0)}),u.reflowTargets=[]}function Ns(u,g,_,m,x,A,z){var N,U,C;_==="auto-start-reverse"?(typeof h!="boolean"&&(g.setAttribute("orient","auto-start-reverse"),h=g.orientType.baseVal===SVGMarkerElement.SVG_MARKER_ORIENT_UNKNOWN),h?g.setAttribute("orient",_):((N=x.createSVGTransform()).setRotate(180,0,0),A.transform.baseVal.appendItem(N),g.setAttribute("orient","auto"),C=!0)):(g.setAttribute("orient",_),h===!1&&A.transform.baseVal.clear()),U=g.viewBox.baseVal,C?(U.x=-m.right,U.y=-m.bottom):(U.x=m.left,U.y=m.top),U.width=m.width,U.height=m.height,gn&&Le(u,z)}function Ya(u,g){return{prop:u?"markerEnd":"markerStart",orient:g?g.noRotate?"0":u?"auto":"auto-start-reverse":null}}function Ke(u,g){Object.keys(g).forEach(function(_){var m=g[_];u[_]=m.iniValue!=null?m.hasSE?[m.iniValue,m.iniValue]:m.iniValue:m.hasSE?m.hasProps?[{},{}]:[]:m.hasProps?{}:null})}function bt(u,g,_,m,x){return m!==g[_]&&(g[_]=m,x&&x.forEach(function(A){A(u,m,_)}),!0)}function Qa(u){function g(z,N){return z+parseFloat(N)}var _=u.document,m=u.getComputedStyle(_.documentElement,""),x=u.getComputedStyle(_.body,""),A={x:0,y:0};return x.position!=="static"?(A.x-=[m.marginLeft,m.borderLeftWidth,m.paddingLeft,x.marginLeft,x.borderLeftWidth].reduce(g,0),A.y-=[m.marginTop,m.borderTopWidth,m.paddingTop,x.marginTop,x.borderTopWidth].reduce(g,0)):m.position!=="static"&&(A.x-=[m.marginLeft,m.borderLeftWidth].reduce(g,0),A.y-=[m.marginTop,m.borderTopWidth].reduce(g,0)),A}function Za(u){var g,_=u.document;_.getElementById(se)||(g=new u.DOMParser().parseFromString(Oe,"image/svg+xml"),_.body.appendChild(g.documentElement),Xi(u))}function pu(u){var g,_,m,x,A,z,N,U,C,P,Y,R,D,O,q,K,et,lt,it,j=u.options,L=u.curStats,V=u.aplStats,F=L.position_socketXYSE,mt=!1;function xt(T,J){var ct=J===Q?{x:T.left+T.width/2,y:T.top}:J===Z?{x:T.right,y:T.top+T.height/2}:J===tt?{x:T.left+T.width/2,y:T.bottom}:{x:T.left,y:T.top+T.height/2};return ct.socketId=J,ct}function pt(T){return{x:T.x,y:T.y}}if(L.position_path=j.path,L.position_lineStrokeWidth=L.line_strokeWidth,L.position_socketGravitySE=g=en(j.socketGravitySE),_=[0,1].map(function(T){var J,ct,Ct,It=j.anchorSE[T],gt=u.optionIsAttach.anchorSE[T],W=gt!==!1?Me[It._id]:null,$t=gt!==!1&&W.conf.getStrokeWidth?W.conf.getStrokeWidth(W,u):0,ve=gt!==!1&&W.conf.getBBoxNest?W.conf.getBBoxNest(W,u,$t):ii(It,u.baseWindow);return L.capsMaskAnchor_pathDataSE[T]=gt!==!1&&W.conf.getPathData?W.conf.getPathData(W,u,$t):(ct=(J=ve).right!=null?J.right:J.left+J.width,Ct=J.bottom!=null?J.bottom:J.top+J.height,[{type:"M",values:[J.left,J.top]},{type:"L",values:[ct,J.top]},{type:"L",values:[ct,Ct]},{type:"L",values:[J.left,Ct]},{type:"Z",values:[]}]),L.capsMaskAnchor_strokeWidthSE[T]=$t,ve}),N=-1,j.socketSE[0]&&j.socketSE[1]?(F[0]=xt(_[0],j.socketSE[0]),F[1]=xt(_[1],j.socketSE[1])):(j.socketSE[0]||j.socketSE[1]?(j.socketSE[0]?(A=0,z=1):(A=1,z=0),F[A]=xt(_[A],j.socketSE[A]),(x=ke.map(function(T){return xt(_[z],T)})).forEach(function(T){var J=Bn(T,F[A]);(J<N||N===-1)&&(F[z]=T,N=J)})):(x=ke.map(function(T){return xt(_[1],T)}),ke.map(function(T){return xt(_[0],T)}).forEach(function(T){x.forEach(function(J){var ct=Bn(T,J);(ct<N||N===-1)&&(F[0]=T,F[1]=J,N=ct)})})),[0,1].forEach(function(T){var J,ct;j.socketSE[T]||(_[T].width||_[T].height?_[T].width||F[T].socketId!==ut&&F[T].socketId!==Z?_[T].height||F[T].socketId!==Q&&F[T].socketId!==tt||(F[T].socketId=0<=F[T?0:1].y-_[T].top?tt:Q):F[T].socketId=0<=F[T?0:1].x-_[T].left?Z:ut:(J=F[T?0:1].x-_[T].left,ct=F[T?0:1].y-_[T].top,F[T].socketId=Math.abs(J)>=Math.abs(ct)?0<=J?Z:ut:0<=ct?tt:Q))})),L.position_path!==V.position_path||L.position_lineStrokeWidth!==V.position_lineStrokeWidth||[0,1].some(function(T){return L.position_plugOverheadSE[T]!==V.position_plugOverheadSE[T]||(It=F[T],gt=V.position_socketXYSE[T],It.x!==gt.x||It.y!==gt.y||It.socketId!==gt.socketId)||(J=g[T],ct=V.position_socketGravitySE[T],(Ct=J==null?"auto":Array.isArray(J)?"array":"number")!=(ct==null?"auto":Array.isArray(ct)?"array":"number")||(Ct==="array"?J[0]!==ct[0]||J[1]!==ct[1]:J!==ct));var J,ct,Ct,It,gt})){switch(u.pathList.baseVal=m=[],u.pathList.animVal=null,L.position_path){case yt:m.push([pt(F[0]),pt(F[1])]);break;case wt:R=typeof g[0]=="number"&&0<g[0]||typeof g[1]=="number"&&0<g[1],D=du*(R?-1:1),O=Math.atan2(F[1].y-F[0].y,F[1].x-F[0].x),q=-O+D,K=Math.PI-O-D,et=Bn(F[0],F[1])/Math.sqrt(2)*Jr,lt={x:F[0].x+Math.cos(q)*et,y:F[0].y+Math.sin(q)*et*-1},it={x:F[1].x+Math.cos(K)*et,y:F[1].y+Math.sin(K)*et*-1},m.push([pt(F[0]),lt,it,pt(F[1])]);break;case Vt:case _t:C=[g[0],L.position_path===_t?0:g[1]],P=[],Y=[],F.forEach(function(T,J){var ct,Ct,It,gt,W,$t=C[J];Array.isArray($t)?ct={x:$t[0],y:$t[1]}:typeof $t=="number"?ct=T.socketId===Q?{x:0,y:-$t}:T.socketId===Z?{x:$t,y:0}:T.socketId===tt?{x:0,y:$t}:{x:-$t,y:0}:(Ct=F[J?0:1],gt=0<(It=L.position_plugOverheadSE[J])?_r+(Ga<It?(It-Ga)*fu:0):ir+(L.position_lineStrokeWidth>Ha?(L.position_lineStrokeWidth-Ha)*Ds:0),T.socketId===Q?((W=(T.y-Ct.y)/2)<gt&&(W=gt),ct={x:0,y:-W}):T.socketId===Z?((W=(Ct.x-T.x)/2)<gt&&(W=gt),ct={x:W,y:0}):T.socketId===tt?((W=(Ct.y-T.y)/2)<gt&&(W=gt),ct={x:0,y:W}):((W=(T.x-Ct.x)/2)<gt&&(W=gt),ct={x:-W,y:0})),P[J]=T.x+ct.x,Y[J]=T.y+ct.y}),m.push([pt(F[0]),{x:P[0],y:Y[0]},{x:P[1],y:Y[1]},pt(F[1])]);break;case Yt:(function(){var T,J=1,ct=2,Ct=3,It=4,gt=[[],[]],W=[];function $t(Kt){return Kt===J?Ct:Kt===ct?It:Kt===Ct?J:ct}function ve(Kt){return Kt===ct||Kt===It?"x":"y"}function Dt(Kt,Rt,St){var Qt={x:Kt.x,y:Kt.y};if(St){if(St===$t(Kt.dirId))throw new Error("Invalid dirId: "+St);Qt.dirId=St}else Qt.dirId=Kt.dirId;return Qt.dirId===J?Qt.y-=Rt:Qt.dirId===ct?Qt.x+=Rt:Qt.dirId===Ct?Qt.y+=Rt:Qt.x-=Rt,Qt}function jt(Kt,Rt){return Rt.dirId===J?Kt.y<=Rt.y:Rt.dirId===ct?Kt.x>=Rt.x:Rt.dirId===Ct?Kt.y>=Rt.y:Kt.x<=Rt.x}function Ce(Kt,Rt){return Rt.dirId===J||Rt.dirId===Ct?Kt.x===Rt.x:Kt.y===Rt.y}function Te(Kt){return Kt[0]?{contain:0,notContain:1}:{contain:1,notContain:0}}function ye(Kt,Rt,St){return Math.abs(Rt[St]-Kt[St])}function cn(Kt,Rt,St){return St==="x"?Kt.x<Rt.x?ct:It:Kt.y<Rt.y?Ct:J}function Oi(){var Kt,Rt,St,Qt,kt=[jt(W[1],W[0]),jt(W[0],W[1])],te=[ve(W[0].dirId),ve(W[1].dirId)];if(te[0]===te[1]){if(kt[0]&&kt[1])return Ce(W[1],W[0])||(W[0][te[0]]===W[1][te[1]]?(gt[0].push(W[0]),gt[1].push(W[1])):(Kt=W[0][te[0]]+(W[1][te[1]]-W[0][te[0]])/2,gt[0].push(Dt(W[0],Math.abs(Kt-W[0][te[0]]))),gt[1].push(Dt(W[1],Math.abs(Kt-W[1][te[1]]))))),!1;kt[0]!==kt[1]?(Rt=Te(kt),(St=ye(W[Rt.notContain],W[Rt.contain],te[Rt.notContain]))<pn&&(W[Rt.notContain]=Dt(W[Rt.notContain],pn-St)),gt[Rt.notContain].push(W[Rt.notContain]),W[Rt.notContain]=Dt(W[Rt.notContain],pn,Ce(W[Rt.contain],W[Rt.notContain])?te[Rt.notContain]==="x"?Ct:ct:cn(W[Rt.notContain],W[Rt.contain],te[Rt.notContain]==="x"?"y":"x"))):(St=ye(W[0],W[1],te[0]==="x"?"y":"x"),gt.forEach(function($e,xe){var Hn=xe===0?1:0;$e.push(W[xe]),W[xe]=Dt(W[xe],pn,2*pn<=St?cn(W[xe],W[Hn],te[xe]==="x"?"y":"x"):te[xe]==="x"?Ct:ct)}))}else{if(kt[0]&&kt[1])return Ce(W[1],W[0])?gt[1].push(W[1]):Ce(W[0],W[1])?gt[0].push(W[0]):gt[0].push(te[0]==="x"?{x:W[1].x,y:W[0].y}:{x:W[0].x,y:W[1].y}),!1;kt[0]!==kt[1]?(Rt=Te(kt),gt[Rt.notContain].push(W[Rt.notContain]),W[Rt.notContain]=Dt(W[Rt.notContain],pn,ye(W[Rt.notContain],W[Rt.contain],te[Rt.contain])>=pn?cn(W[Rt.notContain],W[Rt.contain],te[Rt.contain]):W[Rt.contain].dirId)):(Qt=[{x:W[0].x,y:W[0].y},{x:W[1].x,y:W[1].y}],gt.forEach(function($e,xe){var Hn=xe===0?1:0,Gn=ye(Qt[xe],Qt[Hn],te[xe]);Gn<pn&&(W[xe]=Dt(W[xe],pn-Gn)),$e.push(W[xe]),W[xe]=Dt(W[xe],pn,cn(W[xe],W[Hn],te[Hn]))}))}return!0}for(F.forEach(function(Kt,Rt){var St,Qt=pt(Kt),kt=g[Rt];St=Array.isArray(kt)?kt[0]<0?[It,-kt[0]]:0<kt[0]?[ct,kt[0]]:kt[1]<0?[J,-kt[1]]:0<kt[1]?[Ct,kt[1]]:[Kt.socketId,0]:typeof kt!="number"?[Kt.socketId,pn]:0<=kt?[Kt.socketId,kt]:[$t(Kt.socketId),-kt],Qt.dirId=St[0],kt=St[1],gt[Rt].push(Qt),W[Rt]=Dt(Qt,kt)});Oi(););gt[1].reverse(),gt[0].concat(gt[1]).forEach(function(Kt,Rt){var St={x:Kt.x,y:Kt.y};0<Rt&&m.push([T,St]),T=St})})()}U=[],L.position_plugOverheadSE.forEach(function(T,J){var ct,Ct,It,gt,W,$t,ve,Dt,jt,Ce,Te,ye=!J;0<T?(ct=m[Ct=ye?0:m.length-1]).length===2?(U[Ct]=U[Ct]||Bn.apply(null,ct),U[Ct]>Ai&&(U[Ct]-T<Ai&&(T=U[Ct]-Ai),It=ns(ct[0],ct[1],(ye?T:U[Ct]-T)/U[Ct]),m[Ct]=ye?[It,ct[1]]:[ct[0],It],U[Ct]-=T)):(U[Ct]=U[Ct]||Ii.apply(null,ct),U[Ct]>Ai&&(U[Ct]-T<Ai&&(T=U[Ct]-Ai),It=Ti(ct[0],ct[1],ct[2],ct[3],Ms(ct[0],ct[1],ct[2],ct[3],ye?T:U[Ct]-T)),ye?(gt=ct[0],W=It.toP1):(gt=ct[3],W=It.fromP2),$t=Math.atan2(gt.y-It.y,It.x-gt.x),ve=Bn(It,W),It.x=gt.x+Math.cos($t)*T,It.y=gt.y+Math.sin($t)*T*-1,W.x=It.x+Math.cos($t)*ve,W.y=It.y+Math.sin($t)*ve*-1,m[Ct]=ye?[It,It.toP1,It.toP2,ct[3]]:[ct[0],It.fromP1,It.fromP2,It],U[Ct]=null)):T<0&&(ct=m[Ct=ye?0:m.length-1],Dt=F[J].socketId,jt=Dt===ut||Dt===Z?"x":"y",T<(Te=-_[J][jt==="x"?"width":"height"])&&(T=Te),Ce=T*(Dt===ut||Dt===Q?-1:1),ct.length===2?ct[ye?0:ct.length-1][jt]+=Ce:(ye?[0,1]:[ct.length-2,ct.length-1]).forEach(function(cn){ct[cn][jt]+=Ce}),U[Ct]=null)}),V.position_socketXYSE=en(F),V.position_plugOverheadSE=en(L.position_plugOverheadSE),V.position_path=L.position_path,V.position_lineStrokeWidth=L.position_lineStrokeWidth,V.position_socketGravitySE=en(g),mt=!0,u.events.apl_position&&u.events.apl_position.forEach(function(T){T(u,m)})}return mt}function Di(u,g){g!==u.isShown&&(!!g!=!!u.isShown&&(u.svg.style.visibility=g?"":"hidden"),u.isShown=g,u.events&&u.events.svgShow&&u.events.svgShow.forEach(function(_){_(u,g)}))}function Un(u,g){var _,m,x,A,z,N,U,C,P,Y,R,D,O,q,K,et,lt,it,j,L,V,F,mt,xt,pt,T,J,ct,Ct,It,gt,W,$t,ve,Dt,jt,Ce,Te,ye,cn,Oi,Kt,Rt,St,Qt,kt,te,$e,xe,Hn,Gn,Or,qt={};g.line&&(qt.line=(m=(_=u).options,x=_.curStats,A=_.events,z=!1,z=bt(_,x,"line_color",m.lineColor,A.cur_line_color)||z,z=bt(_,x,"line_colorTra",ni(x.line_color)[0]<1)||z,z=bt(_,x,"line_strokeWidth",m.lineSize,A.cur_line_strokeWidth)||z)),(g.plug||qt.line)&&(qt.plug=(U=(N=u).options,C=N.curStats,P=N.events,Y=!1,[0,1].forEach(function(G){var Bt,Ie,ge,Ne,mr,Po,Bs,si,He=U.plugSE[G];Y=bt(N,C.plug_enabledSE,G,He!==Ue)||Y,Y=bt(N,C.plug_plugSE,G,He)||Y,Y=bt(N,C.plug_colorSE,G,si=U.plugColorSE[G]||C.line_color,P.cur_plug_colorSE)||Y,Y=bt(N,C.plug_colorTraSE,G,ni(si)[0]<1)||Y,He!==Ue&&(Ne=Ie=(Bt=pr[vt[He]]).widthR*U.plugSizeSE[G],mr=ge=Bt.heightR*U.plugSizeSE[G],pe&&(Ne*=C.line_strokeWidth,mr*=C.line_strokeWidth),Y=bt(N,C.plug_markerWidthSE,G,Ne)||Y,Y=bt(N,C.plug_markerHeightSE,G,mr)||Y,C.capsMaskMarker_markerWidthSE[G]=Ie,C.capsMaskMarker_markerHeightSE[G]=ge),C.plugOutline_plugSE[G]=C.capsMaskMarker_plugSE[G]=He,C.plug_enabledSE[G]?(si=C.line_strokeWidth/Dn.lineSize*U.plugSizeSE[G],C.position_plugOverheadSE[G]=Bt.overhead*si,C.viewBox_plugBCircleSE[G]=Bt.bCircle*si,Po=Bt.sideLen*si,Bs=Bt.backLen*si):(C.position_plugOverheadSE[G]=-C.line_strokeWidth/2,C.viewBox_plugBCircleSE[G]=Po=Bs=0),bt(N,C.attach_plugSideLenSE,G,Po,P.cur_attach_plugSideLenSE),bt(N,C.attach_plugBackLenSE,G,Bs,P.cur_attach_plugBackLenSE),C.capsMaskAnchor_enabledSE[G]=!C.plug_enabledSE[G]}),Y=bt(N,C,"plug_enabled",C.plug_enabledSE[0]||C.plug_enabledSE[1])||Y)),(g.lineOutline||qt.line)&&(qt.lineOutline=(O=(R=u).options,q=R.curStats,K=!1,K=bt(R,q,"lineOutline_enabled",O.lineOutlineEnabled)||K,K=bt(R,q,"lineOutline_color",O.lineOutlineColor)||K,K=bt(R,q,"lineOutline_colorTra",ni(q.lineOutline_color)[0]<1)||K,D=q.line_strokeWidth*O.lineOutlineSize,K=bt(R,q,"lineOutline_strokeWidth",q.line_strokeWidth-2*D)||K,K=bt(R,q,"lineOutline_inStrokeWidth",q.lineOutline_colorTra?q.lineOutline_strokeWidth+2*ki:q.line_strokeWidth-D)||K)),(g.plugOutline||qt.line||qt.plug||qt.lineOutline)&&(qt.plugOutline=(lt=(et=u).options,it=et.curStats,j=!1,[0,1].forEach(function(G){var Bt,Ie=it.plugOutline_plugSE[G],ge=Ie!==Ue?pr[vt[Ie]]:null;j=bt(et,it.plugOutline_enabledSE,G,lt.plugOutlineEnabledSE[G]&&it.plug_enabled&&it.plug_enabledSE[G]&&!!ge&&!!ge.outlineBase)||j,j=bt(et,it.plugOutline_colorSE,G,Bt=lt.plugOutlineColorSE[G]||it.lineOutline_color)||j,j=bt(et,it.plugOutline_colorTraSE,G,ni(Bt)[0]<1)||j,ge&&ge.outlineBase&&((Bt=lt.plugOutlineSizeSE[G])>ge.outlineMax&&(Bt=ge.outlineMax),Bt*=2*ge.outlineBase,j=bt(et,it.plugOutline_strokeWidthSE,G,Bt)||j,j=bt(et,it.plugOutline_inStrokeWidthSE,G,it.plugOutline_colorTraSE[G]?Bt-ki/(it.line_strokeWidth/Dn.lineSize)/lt.plugSizeSE[G]*2:Bt/2)||j)}),j)),(g.faces||qt.line||qt.plug||qt.lineOutline||qt.plugOutline)&&(qt.faces=(F=(L=u).curStats,mt=L.aplStats,xt=L.events,pt=!1,!F.line_altColor&&bt(L,mt,"line_color",V=F.line_color,xt.apl_line_color)&&(L.lineFace.style.stroke=V,pt=!0),bt(L,mt,"line_strokeWidth",V=F.line_strokeWidth,xt.apl_line_strokeWidth)&&(L.lineShape.style.strokeWidth=V+"px",pt=!0,(Rr||gn)&&(Le(L,L.lineShape),gn&&(Le(L,L.lineFace),Le(L,L.lineMaskCaps)))),bt(L,mt,"lineOutline_enabled",V=F.lineOutline_enabled,xt.apl_lineOutline_enabled)&&(L.lineOutlineFace.style.display=V?"inline":"none",pt=!0),F.lineOutline_enabled&&(bt(L,mt,"lineOutline_color",V=F.lineOutline_color,xt.apl_lineOutline_color)&&(L.lineOutlineFace.style.stroke=V,pt=!0),bt(L,mt,"lineOutline_strokeWidth",V=F.lineOutline_strokeWidth,xt.apl_lineOutline_strokeWidth)&&(L.lineOutlineMaskShape.style.strokeWidth=V+"px",pt=!0,gn&&(Le(L,L.lineOutlineMaskCaps),Le(L,L.lineOutlineFace))),bt(L,mt,"lineOutline_inStrokeWidth",V=F.lineOutline_inStrokeWidth,xt.apl_lineOutline_inStrokeWidth)&&(L.lineMaskShape.style.strokeWidth=V+"px",pt=!0,gn&&(Le(L,L.lineOutlineMaskCaps),Le(L,L.lineOutlineFace)))),bt(L,mt,"plug_enabled",V=F.plug_enabled,xt.apl_plug_enabled)&&(L.plugsFace.style.display=V?"inline":"none",pt=!0),F.plug_enabled&&[0,1].forEach(function(G){var Bt=F.plug_plugSE[G],Ie=Bt!==Ue?pr[vt[Bt]]:null,ge=Ya(G,Ie);bt(L,mt.plug_enabledSE,G,V=F.plug_enabledSE[G],xt.apl_plug_enabledSE)&&(L.plugsFace.style[ge.prop]=V?"url(#"+L.plugMarkerIdSE[G]+")":"none",pt=!0),F.plug_enabledSE[G]&&(bt(L,mt.plug_plugSE,G,Bt,xt.apl_plug_plugSE)&&(L.plugFaceSE[G].href.baseVal="#"+Ie.elmId,Ns(L,L.plugMarkerSE[G],ge.orient,Ie.bBox,L.svg,L.plugMarkerShapeSE[G],L.plugsFace),pt=!0,Rr&&Le(L,L.plugsFace)),bt(L,mt.plug_colorSE,G,V=F.plug_colorSE[G],xt.apl_plug_colorSE)&&(L.plugFaceSE[G].style.fill=V,pt=!0,(Zi||pe||gn)&&!F.line_colorTra&&Le(L,gn?L.lineMaskCaps:L.capsMaskLine)),["markerWidth","markerHeight"].forEach(function(Ne){var mr="plug_"+Ne+"SE";bt(L,mt[mr],G,V=F[mr][G],xt["apl_"+mr])&&(L.plugMarkerSE[G][Ne].baseVal.value=V,pt=!0)}),bt(L,mt.plugOutline_enabledSE,G,V=F.plugOutline_enabledSE[G],xt.apl_plugOutline_enabledSE)&&(V?(L.plugFaceSE[G].style.mask="url(#"+L.plugMaskIdSE[G]+")",L.plugOutlineFaceSE[G].style.display="inline"):(L.plugFaceSE[G].style.mask="none",L.plugOutlineFaceSE[G].style.display="none"),pt=!0),F.plugOutline_enabledSE[G]&&(bt(L,mt.plugOutline_plugSE,G,Bt,xt.apl_plugOutline_plugSE)&&(L.plugOutlineFaceSE[G].href.baseVal=L.plugMaskShapeSE[G].href.baseVal=L.plugOutlineMaskShapeSE[G].href.baseVal="#"+Ie.elmId,[L.plugMaskSE[G],L.plugOutlineMaskSE[G]].forEach(function(Ne){Ne.x.baseVal.value=Ie.bBox.left,Ne.y.baseVal.value=Ie.bBox.top,Ne.width.baseVal.value=Ie.bBox.width,Ne.height.baseVal.value=Ie.bBox.height}),pt=!0),bt(L,mt.plugOutline_colorSE,G,V=F.plugOutline_colorSE[G],xt.apl_plugOutline_colorSE)&&(L.plugOutlineFaceSE[G].style.fill=V,pt=!0,gn&&(Le(L,L.lineMaskCaps),Le(L,L.lineOutlineMaskCaps))),bt(L,mt.plugOutline_strokeWidthSE,G,V=F.plugOutline_strokeWidthSE[G],xt.apl_plugOutline_strokeWidthSE)&&(L.plugOutlineMaskShapeSE[G].style.strokeWidth=V+"px",pt=!0),bt(L,mt.plugOutline_inStrokeWidthSE,G,V=F.plugOutline_inStrokeWidthSE[G],xt.apl_plugOutline_inStrokeWidthSE)&&(L.plugMaskShapeSE[G].style.strokeWidth=V+"px",pt=!0)))}),pt)),(g.position||qt.line||qt.plug)&&(qt.position=pu(u)),(g.path||qt.position)&&(qt.path=(ct=(T=u).curStats,Ct=T.aplStats,It=T.pathList.animVal||T.pathList.baseVal,gt=ct.path_edge,W=!1,It&&(gt.x1=gt.x2=It[0][0].x,gt.y1=gt.y2=It[0][0].y,ct.path_pathData=J=Do(It,function(G){G.x<gt.x1&&(gt.x1=G.x),G.y<gt.y1&&(gt.y1=G.y),G.x>gt.x2&&(gt.x2=G.x),G.y>gt.y2&&(gt.y2=G.y)}),Ls(J,Ct.path_pathData)&&(T.linePath.setPathData(J),Ct.path_pathData=J,W=!0,gn?(Le(T,T.plugsFace),Le(T,T.lineMaskCaps)):Rr&&Le(T,T.linePath),T.events.apl_path&&T.events.apl_path.forEach(function(G){G(T,J)}))),W)),qt.viewBox=(jt=($t=u).curStats,Ce=$t.aplStats,Te=jt.path_edge,ye=jt.viewBox_bBox,cn=Ce.viewBox_bBox,Oi=$t.svg.viewBox.baseVal,Kt=$t.svg.style,Rt=!1,ve=Math.max(jt.line_strokeWidth/2,jt.viewBox_plugBCircleSE[0]||0,jt.viewBox_plugBCircleSE[1]||0),Dt={x1:Te.x1-ve,y1:Te.y1-ve,x2:Te.x2+ve,y2:Te.y2+ve},$t.events.new_edge4viewBox&&$t.events.new_edge4viewBox.forEach(function(G){G($t,Dt)}),ye.x=jt.lineMask_x=jt.lineOutlineMask_x=jt.maskBGRect_x=Dt.x1,ye.y=jt.lineMask_y=jt.lineOutlineMask_y=jt.maskBGRect_y=Dt.y1,ye.width=Dt.x2-Dt.x1,ye.height=Dt.y2-Dt.y1,["x","y","width","height"].forEach(function(G){var Bt;(Bt=ye[G])!==cn[G]&&(Oi[G]=cn[G]=Bt,Kt[on[G]]=Bt+(G==="x"||G==="y"?$t.bodyOffset[G]:0)+"px",Rt=!0)}),Rt),qt.mask=(kt=(St=u).curStats,te=St.aplStats,$e=!1,kt.plug_enabled?[0,1].forEach(function(G){kt.capsMaskMarker_enabledSE[G]=kt.plug_enabledSE[G]&&kt.plug_colorTraSE[G]||kt.plugOutline_enabledSE[G]&&kt.plugOutline_colorTraSE[G]}):kt.capsMaskMarker_enabledSE[0]=kt.capsMaskMarker_enabledSE[1]=!1,kt.capsMaskMarker_enabled=kt.capsMaskMarker_enabledSE[0]||kt.capsMaskMarker_enabledSE[1],kt.lineMask_outlineMode=kt.lineOutline_enabled,kt.caps_enabled=kt.capsMaskMarker_enabled||kt.capsMaskAnchor_enabledSE[0]||kt.capsMaskAnchor_enabledSE[1],kt.lineMask_enabled=kt.caps_enabled||kt.lineMask_outlineMode,(kt.lineMask_enabled&&!kt.lineMask_outlineMode||kt.lineOutline_enabled)&&["x","y"].forEach(function(G){var Bt="maskBGRect_"+G;bt(St,te,Bt,Qt=kt[Bt])&&(St.maskBGRect[G].baseVal.value=Qt,$e=!0)}),bt(St,te,"lineMask_enabled",Qt=kt.lineMask_enabled)&&(St.lineFace.style.mask=Qt?"url(#"+St.lineMaskId+")":"none",$e=!0,pe&&Le(St,St.lineMask)),kt.lineMask_enabled&&(bt(St,te,"lineMask_outlineMode",Qt=kt.lineMask_outlineMode)&&(Qt?(St.lineMaskBG.style.display="none",St.lineMaskShape.style.display="inline"):(St.lineMaskBG.style.display="inline",St.lineMaskShape.style.display="none"),$e=!0),["x","y"].forEach(function(G){var Bt="lineMask_"+G;bt(St,te,Bt,Qt=kt[Bt])&&(St.lineMask[G].baseVal.value=Qt,$e=!0)}),bt(St,te,"caps_enabled",Qt=kt.caps_enabled)&&(St.lineMaskCaps.style.display=St.lineOutlineMaskCaps.style.display=Qt?"inline":"none",$e=!0,pe&&Le(St,St.capsMaskLine)),kt.caps_enabled&&([0,1].forEach(function(G){var Bt;bt(St,te.capsMaskAnchor_enabledSE,G,Qt=kt.capsMaskAnchor_enabledSE[G])&&(St.capsMaskAnchorSE[G].style.display=Qt?"inline":"none",$e=!0,pe&&Le(St,St.lineMask)),kt.capsMaskAnchor_enabledSE[G]&&(Ls(Bt=kt.capsMaskAnchor_pathDataSE[G],te.capsMaskAnchor_pathDataSE[G])&&(St.capsMaskAnchorSE[G].setPathData(Bt),te.capsMaskAnchor_pathDataSE[G]=Bt,$e=!0),bt(St,te.capsMaskAnchor_strokeWidthSE,G,Qt=kt.capsMaskAnchor_strokeWidthSE[G])&&(St.capsMaskAnchorSE[G].style.strokeWidth=Qt+"px",$e=!0))}),bt(St,te,"capsMaskMarker_enabled",Qt=kt.capsMaskMarker_enabled)&&(St.capsMaskLine.style.display=Qt?"inline":"none",$e=!0),kt.capsMaskMarker_enabled&&[0,1].forEach(function(G){var Bt=kt.capsMaskMarker_plugSE[G],Ie=Bt!==Ue?pr[vt[Bt]]:null,ge=Ya(G,Ie);bt(St,te.capsMaskMarker_enabledSE,G,Qt=kt.capsMaskMarker_enabledSE[G])&&(St.capsMaskLine.style[ge.prop]=Qt?"url(#"+St.lineMaskMarkerIdSE[G]+")":"none",$e=!0),kt.capsMaskMarker_enabledSE[G]&&(bt(St,te.capsMaskMarker_plugSE,G,Bt)&&(St.capsMaskMarkerShapeSE[G].href.baseVal="#"+Ie.elmId,Ns(St,St.capsMaskMarkerSE[G],ge.orient,Ie.bBox,St.svg,St.capsMaskMarkerShapeSE[G],St.capsMaskLine),$e=!0,Rr&&(Le(St,St.capsMaskLine),Le(St,St.lineFace))),["markerWidth","markerHeight"].forEach(function(Ne){var mr="capsMaskMarker_"+Ne+"SE";bt(St,te[mr],G,Qt=kt[mr][G])&&(St.capsMaskMarkerSE[G][Ne].baseVal.value=Qt,$e=!0)}))}))),kt.lineOutline_enabled&&["x","y"].forEach(function(G){var Bt="lineOutlineMask_"+G;bt(St,te,Bt,Qt=kt[Bt])&&(St.lineOutlineMask[G].baseVal.value=Qt,$e=!0)}),$e),g.effect&&(Gn=(xe=u).curStats,Or=xe.aplStats,Object.keys(e).forEach(function(G){var Bt=e[G],Ie=G+"_enabled",ge=G+"_options",Ne=Gn[ge];bt(xe,Or,Ie,Hn=Gn[Ie])?(Hn&&(Or[ge]=en(Ne)),Bt[Hn?"init":"remove"](xe)):Hn&&Dr(Ne,Or[ge])&&(Bt.remove(xe),Or[Ie]=!0,Or[ge]=en(Ne),Bt.init(xe))})),(Zi||pe)&&qt.line&&!qt.path&&Le(u,u.lineShape),Zi&&qt.plug&&!qt.line&&Le(u,u.plugsFace),Ka(u)}function Fs(u,g){return{duration:_n(u.duration)&&0<u.duration?u.duration:g.duration,timing:Ze.validTiming(u.timing)?u.timing:en(g.timing)}}function Vs(u,g,_,m){var x,A=u.curStats,z=u.aplStats,N={};function U(){["show_on","show_effect","show_animOptions"].forEach(function(C){z[C]=A[C]})}A.show_on=g,_&&t[_]&&(A.show_effect=_,A.show_animOptions=Fs(an(m)?m:{},t[_].defaultAnimOptions)),N.show_on=A.show_on!==z.show_on,N.show_effect=A.show_effect!==z.show_effect,N.show_animOptions=Dr(A.show_animOptions,z.show_animOptions),N.show_effect||N.show_animOptions?A.show_inAnim?(x=N.show_effect?t[z.show_effect].stop(u,!0,!0):t[z.show_effect].stop(u),U(),t[z.show_effect].init(u,x)):N.show_on&&(z.show_effect&&N.show_effect&&t[z.show_effect].stop(u,!0,!0),U(),t[z.show_effect].init(u)):N.show_on&&(U(),t[z.show_effect].start(u))}function Oo(u,g,_){var m={props:u,optionName:_};return!(!(u.attachments.indexOf(g)<0)||g.conf.bind&&!g.conf.bind(g,m))&&(u.attachments.push(g),g.boundTargets.push(m),!0)}function $s(u,g,_){var m=u.attachments.indexOf(g);-1<m&&u.attachments.splice(m,1),g.boundTargets.some(function(x,A){return x.props===u&&(g.conf.unbind&&g.conf.unbind(g,x),m=A,!0)})&&(g.boundTargets.splice(m,1),_||Ri(function(){g.boundTargets.length||o(g)}))}function qs(u,g){var _,m,x=u.options,A={};function z(C,P,Y,R,D){var O={};return Y?R!=null?(O.container=C[Y],O.key=R):(O.container=C,O.key=Y):(O.container=C,O.key=P),O.default=D,O.acceptsAuto=O.default==null,O}function N(C,P,Y,R,D,O,q){var K,et,lt,it=z(C,Y,D,O,q);return P[Y]!=null&&(et=(P[Y]+"").toLowerCase())&&(it.acceptsAuto&&et===ne||(lt=R[et]))&&lt!==it.container[it.key]&&(it.container[it.key]=lt,K=!0),it.container[it.key]!=null||it.acceptsAuto||(it.container[it.key]=it.default,K=!0),K}function U(C,P,Y,R,D,O,q,K,et){var lt,it,j,L,V=z(C,Y,D,O,q);if(!R){if(V.default==null)throw new Error("Invalid `type`: "+Y);R=typeof V.default}return P[Y]!=null&&(V.acceptsAuto&&(P[Y]+"").toLowerCase()===ne||(j=it=P[Y],((L=R)==="number"?_n(j):typeof j===L)&&(it=et&&R==="string"&&it?it.trim():it,1)&&(!K||K(it))))&&it!==V.container[V.key]&&(V.container[V.key]=it,lt=!0),V.container[V.key]!=null||V.acceptsAuto||(V.container[V.key]=V.default,lt=!0),lt}if(g=g||{},["start","end"].forEach(function(C,P){var Y=g[C],R=!1;if(Y&&(ri(Y)||(R=i(Y,"anchor")))&&Y!==x.anchorSE[P]){if(u.optionIsAttach.anchorSE[P]!==!1&&$s(u,Me[x.anchorSE[P]._id]),R&&!Oo(u,Me[Y._id],C))throw new Error("Can't bind attachment");x.anchorSE[P]=Y,u.optionIsAttach.anchorSE[P]=R,m=A.position=!0}}),!x.anchorSE[0]||!x.anchorSE[1]||x.anchorSE[0]===x.anchorSE[1])throw new Error("`start` and `end` are required.");m&&(_=function(C,P){var Y,R,D;if(!(Y=es(C))||!(R=es(P)))throw new Error("Cannot get frames.");return Y.length&&R.length&&(Y.reverse(),R.reverse(),Y.some(function(O){return R.some(function(q){return q===O&&(D=q.contentWindow,!0)})})),D||window}(u.optionIsAttach.anchorSE[0]!==!1?Me[x.anchorSE[0]._id].element:x.anchorSE[0],u.optionIsAttach.anchorSE[1]!==!1?Me[x.anchorSE[1]._id].element:x.anchorSE[1]))!==u.baseWindow&&(function(C,P){var Y,R,D,O,q,K,et,lt,it,j,L=C.aplStats,V=P.document,F=S+"-"+C._id;function mt(T){var J=R.appendChild(V.createElementNS(Mt,"mask"));return J.id=T,J.maskUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[J.x,J.y,J.width,J.height].forEach(function(ct){ct.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)}),J}function xt(T){var J=R.appendChild(V.createElementNS(Mt,"marker"));return J.id=T,J.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_STROKEWIDTH,J.viewBox.baseVal||J.setAttribute("viewBox","0 0 0 0"),J}function pt(T){return[T.width,T.height].forEach(function(J){J.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100)}),T}C.pathList={},Ke(L,ti),Object.keys(e).forEach(function(T){var J=T+"_enabled";L[J]&&(e[T].remove(C),L[J]=!1)}),C.baseWindow&&C.svg&&C.baseWindow.document.body.removeChild(C.svg),Za(C.baseWindow=P),C.bodyOffset=Qa(P),C.svg=Y=V.createElementNS(Mt,"svg"),Y.className.baseVal=S,Y.viewBox.baseVal||Y.setAttribute("viewBox","0 0 0 0"),C.defs=R=Y.appendChild(V.createElementNS(Mt,"defs")),C.linePath=O=R.appendChild(V.createElementNS(Mt,"path")),O.id=q=F+"-line-path",O.className.baseVal=S+"-line-path",pe&&(O.style.fill="none"),C.lineShape=O=R.appendChild(V.createElementNS(Mt,"use")),O.id=K=F+"-line-shape",O.href.baseVal="#"+q,(D=R.appendChild(V.createElementNS(Mt,"g"))).id=et=F+"-caps",C.capsMaskAnchorSE=[0,1].map(function(){var T=D.appendChild(V.createElementNS(Mt,"path"));return T.className.baseVal=S+"-caps-mask-anchor",T}),C.lineMaskMarkerIdSE=[F+"-caps-mask-marker-0",F+"-caps-mask-marker-1"],C.capsMaskMarkerSE=[0,1].map(function(T){return xt(C.lineMaskMarkerIdSE[T])}),C.capsMaskMarkerShapeSE=[0,1].map(function(T){var J=C.capsMaskMarkerSE[T].appendChild(V.createElementNS(Mt,"use"));return J.className.baseVal=S+"-caps-mask-marker-shape",J}),C.capsMaskLine=O=D.appendChild(V.createElementNS(Mt,"use")),O.className.baseVal=S+"-caps-mask-line",O.href.baseVal="#"+K,C.maskBGRect=O=pt(R.appendChild(V.createElementNS(Mt,"rect"))),O.id=lt=F+"-mask-bg-rect",O.className.baseVal=S+"-mask-bg-rect",pe&&(O.style.fill="white"),C.lineMask=pt(mt(C.lineMaskId=F+"-line-mask")),C.lineMaskBG=O=C.lineMask.appendChild(V.createElementNS(Mt,"use")),O.href.baseVal="#"+lt,C.lineMaskShape=O=C.lineMask.appendChild(V.createElementNS(Mt,"use")),O.className.baseVal=S+"-line-mask-shape",O.href.baseVal="#"+q,O.style.display="none",C.lineMaskCaps=O=C.lineMask.appendChild(V.createElementNS(Mt,"use")),O.href.baseVal="#"+et,C.lineOutlineMask=pt(mt(it=F+"-line-outline-mask")),(O=C.lineOutlineMask.appendChild(V.createElementNS(Mt,"use"))).href.baseVal="#"+lt,C.lineOutlineMaskShape=O=C.lineOutlineMask.appendChild(V.createElementNS(Mt,"use")),O.className.baseVal=S+"-line-outline-mask-shape",O.href.baseVal="#"+q,C.lineOutlineMaskCaps=O=C.lineOutlineMask.appendChild(V.createElementNS(Mt,"use")),O.href.baseVal="#"+et,C.face=Y.appendChild(V.createElementNS(Mt,"g")),C.lineFace=O=C.face.appendChild(V.createElementNS(Mt,"use")),O.href.baseVal="#"+K,C.lineOutlineFace=O=C.face.appendChild(V.createElementNS(Mt,"use")),O.href.baseVal="#"+K,O.style.mask="url(#"+it+")",O.style.display="none",C.plugMaskIdSE=[F+"-plug-mask-0",F+"-plug-mask-1"],C.plugMaskSE=[0,1].map(function(T){return mt(C.plugMaskIdSE[T])}),C.plugMaskShapeSE=[0,1].map(function(T){var J=C.plugMaskSE[T].appendChild(V.createElementNS(Mt,"use"));return J.className.baseVal=S+"-plug-mask-shape",J}),j=[],C.plugOutlineMaskSE=[0,1].map(function(T){return mt(j[T]=F+"-plug-outline-mask-"+T)}),C.plugOutlineMaskShapeSE=[0,1].map(function(T){var J=C.plugOutlineMaskSE[T].appendChild(V.createElementNS(Mt,"use"));return J.className.baseVal=S+"-plug-outline-mask-shape",J}),C.plugMarkerIdSE=[F+"-plug-marker-0",F+"-plug-marker-1"],C.plugMarkerSE=[0,1].map(function(T){var J=xt(C.plugMarkerIdSE[T]);return pe&&(J.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_USERSPACEONUSE),J}),C.plugMarkerShapeSE=[0,1].map(function(T){return C.plugMarkerSE[T].appendChild(V.createElementNS(Mt,"g"))}),C.plugFaceSE=[0,1].map(function(T){return C.plugMarkerShapeSE[T].appendChild(V.createElementNS(Mt,"use"))}),C.plugOutlineFaceSE=[0,1].map(function(T){var J=C.plugMarkerShapeSE[T].appendChild(V.createElementNS(Mt,"use"));return J.style.mask="url(#"+j[T]+")",J.style.display="none",J}),C.plugsFace=O=C.face.appendChild(V.createElementNS(Mt,"use")),O.className.baseVal=S+"-plugs-face",O.href.baseVal="#"+K,O.style.display="none",C.curStats.show_inAnim?(C.isShown=1,t[L.show_effect].stop(C,!0)):C.isShown||(Y.style.visibility="hidden"),V.body.appendChild(Y),[0,1,2].forEach(function(T){var J,ct=C.options.labelSEM[T];ct&&i(ct,"label")&&(J=Me[ct._id]).conf.initSvg&&J.conf.initSvg(J,C)})}(u,_),A.line=A.plug=A.lineOutline=A.plugOutline=A.faces=A.effect=!0),A.position=N(x,g,"path",we,null,null,Dn.path)||A.position,A.position=N(x,g,"startSocket",rt,"socketSE",0)||A.position,A.position=N(x,g,"endSocket",rt,"socketSE",1)||A.position,[g.startSocketGravity,g.endSocketGravity].forEach(function(C,P){var Y,R,D=!1;C!=null&&(Array.isArray(C)?_n(C[0])&&_n(C[1])&&(D=[C[0],C[1]],Array.isArray(x.socketGravitySE[P])&&(Y=D,R=x.socketGravitySE[P],Y.length===R.length&&Y.every(function(O,q){return O===R[q]}))&&(D=!1)):((C+"").toLowerCase()===ne?D=null:_n(C)&&0<=C&&(D=C),D===x.socketGravitySE[P]&&(D=!1)),D!==!1&&(x.socketGravitySE[P]=D,A.position=!0))}),A.line=U(x,g,"color",null,"lineColor",null,Dn.lineColor,null,!0)||A.line,A.line=U(x,g,"size",null,"lineSize",null,Dn.lineSize,function(C){return 0<C})||A.line,["startPlug","endPlug"].forEach(function(C,P){A.plug=N(x,g,C,gr,"plugSE",P,Dn.plugSE[P])||A.plug,A.plug=U(x,g,C+"Color","string","plugColorSE",P,null,null,!0)||A.plug,A.plug=U(x,g,C+"Size",null,"plugSizeSE",P,Dn.plugSizeSE[P],function(Y){return 0<Y})||A.plug}),A.lineOutline=U(x,g,"outline",null,"lineOutlineEnabled",null,Dn.lineOutlineEnabled)||A.lineOutline,A.lineOutline=U(x,g,"outlineColor",null,"lineOutlineColor",null,Dn.lineOutlineColor,null,!0)||A.lineOutline,A.lineOutline=U(x,g,"outlineSize",null,"lineOutlineSize",null,Dn.lineOutlineSize,function(C){return 0<C&&C<=.48})||A.lineOutline,["startPlugOutline","endPlugOutline"].forEach(function(C,P){A.plugOutline=U(x,g,C,null,"plugOutlineEnabledSE",P,Dn.plugOutlineEnabledSE[P])||A.plugOutline,A.plugOutline=U(x,g,C+"Color","string","plugOutlineColorSE",P,null,null,!0)||A.plugOutline,A.plugOutline=U(x,g,C+"Size",null,"plugOutlineSizeSE",P,Dn.plugOutlineSizeSE[P],function(Y){return 1<=Y})||A.plugOutline}),["startLabel","endLabel","middleLabel"].forEach(function(C,P){var Y,R,D,O=g[C],q=x.labelSEM[P]&&!u.optionIsAttach.labelSEM[P]?Me[x.labelSEM[P]._id].text:x.labelSEM[P],K=!1;if((Y=typeof O=="string")&&(O=O.trim()),(Y||O&&(K=i(O,"label")))&&O!==q){if(x.labelSEM[P]&&($s(u,Me[x.labelSEM[P]._id]),x.labelSEM[P]=""),O){if(K?(R=Me[(D=O)._id]).boundTargets.slice().forEach(function(et){R.conf.removeOption(R,et)}):D=new r(n.captionLabel,[O]),!Oo(u,Me[D._id],C))throw new Error("Can't bind attachment");x.labelSEM[P]=D}u.optionIsAttach.labelSEM[P]=K}}),Object.keys(e).forEach(function(C){var P,Y,R=e[C],D=C+"_enabled",O=C+"_options";function q(et){var lt={};return R.optionsConf.forEach(function(it){var j=it[0],L=it[3];it[4]==null||lt[L]||(lt[L]=[]),(typeof j=="function"?j:j==="id"?N:U).apply(null,[lt,et].concat(it.slice(1)))}),lt}function K(et){var lt,it=C+"_animOptions";return et.hasOwnProperty("animation")?an(et.animation)?lt=u.curStats[it]=Fs(et.animation,R.defaultAnimOptions):(lt=!!et.animation,u.curStats[it]=lt?Fs({},R.defaultAnimOptions):null):(lt=!!R.defaultEnabled,u.curStats[it]=lt?Fs({},R.defaultAnimOptions):null),lt}g.hasOwnProperty(C)&&(P=g[C],an(P)?(u.curStats[D]=!0,Y=u.curStats[O]=q(P),R.anim&&(u.curStats[O].animation=K(P))):(Y=u.curStats[D]=!!P)&&(u.curStats[O]=q({}),R.anim&&(u.curStats[O].animation=K({}))),Dr(Y,x[C])&&(x[C]=Y,A.effect=!0))}),Un(u,A)}function zn(u,g,_){var m={options:{anchorSE:[],socketSE:[],socketGravitySE:[],plugSE:[],plugColorSE:[],plugSizeSE:[],plugOutlineEnabledSE:[],plugOutlineColorSE:[],plugOutlineSizeSE:[],labelSEM:["","",""]},optionIsAttach:{anchorSE:[!1,!1],labelSEM:[!1,!1,!1]},curStats:{},aplStats:{},attachments:[],events:{},reflowTargets:[]};Ke(m.curStats,ti),Ke(m.aplStats,ti),Object.keys(e).forEach(function(x){var A=e[x].stats;Ke(m.curStats,A),Ke(m.aplStats,A),m.options[x]=!1}),Ke(m.curStats,Ji),Ke(m.aplStats,Ji),m.curStats.show_effect=Wa,m.curStats.show_animOptions=en(t[Wa].defaultAnimOptions),Object.defineProperty(this,"_id",{value:++ts}),m._id=this._id,ln[this._id]=m,arguments.length===1&&(_=u,u=null),_=_||{},(u||g)&&(_=en(_),u&&(_.start=u),g&&(_.end=g)),m.isShown=m.aplStats.show_on=!_.hide,this.setOptions(_)}return e={dash:{stats:{dash_len:{},dash_gap:{},dash_maxOffset:{}},anim:!0,defaultAnimOptions:{duration:1e3,timing:"linear"},optionsConf:[["type","len","number",null,null,null,function(u){return 0<u}],["type","gap","number",null,null,null,function(u){return 0<u}]],init:function(u){je(u,"apl_line_strokeWidth",e.dash.update),u.lineFace.style.strokeDashoffset=0,e.dash.update(u)},remove:function(u){var g=u.curStats;ze(u,"apl_line_strokeWidth",e.dash.update),g.dash_animId&&(Ze.remove(g.dash_animId),g.dash_animId=null),u.lineFace.style.strokeDasharray="none",u.lineFace.style.strokeDashoffset=0,Ke(u.aplStats,e.dash.stats)},update:function(u){var g,_=u.curStats,m=u.aplStats,x=m.dash_options,A=!1;_.dash_len=x.len||2*m.line_strokeWidth,_.dash_gap=x.gap||m.line_strokeWidth,_.dash_maxOffset=_.dash_len+_.dash_gap,A=bt(u,m,"dash_len",_.dash_len)||A,(A=bt(u,m,"dash_gap",_.dash_gap)||A)&&(u.lineFace.style.strokeDasharray=m.dash_len+","+m.dash_gap),_.dash_animOptions?(A=bt(u,m,"dash_maxOffset",_.dash_maxOffset),m.dash_animOptions&&(A||Dr(_.dash_animOptions,m.dash_animOptions))&&(_.dash_animId&&(g=Ze.stop(_.dash_animId),Ze.remove(_.dash_animId)),m.dash_animOptions=null),m.dash_animOptions||(_.dash_animId=Ze.add(function(z){return(1-z)*m.dash_maxOffset+"px"},function(z){u.lineFace.style.strokeDashoffset=z},_.dash_animOptions.duration,0,_.dash_animOptions.timing,!1,g),m.dash_animOptions=en(_.dash_animOptions))):m.dash_animOptions&&(_.dash_animId&&(Ze.remove(_.dash_animId),_.dash_animId=null),u.lineFace.style.strokeDashoffset=0,m.dash_animOptions=null)}},gradient:{stats:{gradient_colorSE:{hasSE:!0},gradient_pointSE:{hasSE:!0,hasProps:!0}},optionsConf:[["type","startColor","string","colorSE",0,null,null,!0],["type","endColor","string","colorSE",1,null,null,!0]],init:function(u){var g,_=u.baseWindow.document,m=u.defs,x=S+"-"+u._id+"-gradient";u.efc_gradient_gradient=g=m.appendChild(_.createElementNS(Mt,"linearGradient")),g.id=x,g.gradientUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[g.x1,g.y1,g.x2,g.y2].forEach(function(A){A.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)}),u.efc_gradient_stopSE=[0,1].map(function(A){var z=u.efc_gradient_gradient.appendChild(_.createElementNS(Mt,"stop"));try{z.offset.baseVal=A}catch(N){if(N.code!==DOMException.NO_MODIFICATION_ALLOWED_ERR)throw N;z.setAttribute("offset",A)}return z}),je(u,"cur_plug_colorSE",e.gradient.update),je(u,"apl_path",e.gradient.update),u.curStats.line_altColor=!0,u.lineFace.style.stroke="url(#"+x+")",e.gradient.update(u)},remove:function(u){u.efc_gradient_gradient&&(u.defs.removeChild(u.efc_gradient_gradient),u.efc_gradient_gradient=u.efc_gradient_stopSE=null),ze(u,"cur_plug_colorSE",e.gradient.update),ze(u,"apl_path",e.gradient.update),u.curStats.line_altColor=!1,u.lineFace.style.stroke=u.curStats.line_color,Ke(u.aplStats,e.gradient.stats)},update:function(u){var g,_,m=u.curStats,x=u.aplStats,A=x.gradient_options,z=u.pathList.animVal||u.pathList.baseVal;[0,1].forEach(function(N){m.gradient_colorSE[N]=A.colorSE[N]||m.plug_colorSE[N]}),_=z[0][0],m.gradient_pointSE[0]={x:_.x,y:_.y},_=(g=z[z.length-1])[g.length-1],m.gradient_pointSE[1]={x:_.x,y:_.y},[0,1].forEach(function(N){var U;bt(u,x.gradient_colorSE,N,U=m.gradient_colorSE[N])&&(pe?(U=ni(U),u.efc_gradient_stopSE[N].style.stopColor=U[1],u.efc_gradient_stopSE[N].style.stopOpacity=U[0]):u.efc_gradient_stopSE[N].style.stopColor=U),["x","y"].forEach(function(C){(U=m.gradient_pointSE[N][C])!==x.gradient_pointSE[N][C]&&(u.efc_gradient_gradient[C+(N+1)].baseVal.value=x.gradient_pointSE[N][C]=U)})})}},dropShadow:{stats:{dropShadow_dx:{},dropShadow_dy:{},dropShadow_blur:{},dropShadow_color:{},dropShadow_opacity:{},dropShadow_x:{},dropShadow_y:{}},optionsConf:[["type","dx",null,null,null,2],["type","dy",null,null,null,4],["type","blur",null,null,null,3,function(u){return 0<=u}],["type","color",null,null,null,"#000",null,!0],["type","opacity",null,null,null,.8,function(u){return 0<=u&&u<=1}]],init:function(u){var g,_,m,x,A,z=u.baseWindow.document,N=u.defs,U=S+"-"+u._id+"-dropShadow",C=(g=z,_=U,A={},typeof d!="boolean"&&(d=!!window.SVGFEDropShadowElement&&!pe),A.elmsAppend=[A.elmFilter=m=g.createElementNS(Mt,"filter")],m.filterUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,m.x.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),m.y.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),m.width.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),m.height.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),m.id=_,d?(A.elmOffset=A.elmBlur=x=m.appendChild(g.createElementNS(Mt,"feDropShadow")),A.styleFlood=x.style):(A.elmBlur=m.appendChild(g.createElementNS(Mt,"feGaussianBlur")),A.elmOffset=x=m.appendChild(g.createElementNS(Mt,"feOffset")),x.result.baseVal="offsetblur",x=m.appendChild(g.createElementNS(Mt,"feFlood")),A.styleFlood=x.style,(x=m.appendChild(g.createElementNS(Mt,"feComposite"))).in2.baseVal="offsetblur",x.operator.baseVal=SVGFECompositeElement.SVG_FECOMPOSITE_OPERATOR_IN,(x=m.appendChild(g.createElementNS(Mt,"feMerge"))).appendChild(g.createElementNS(Mt,"feMergeNode")),x.appendChild(g.createElementNS(Mt,"feMergeNode")).in1.baseVal="SourceGraphic"),A);["elmFilter","elmOffset","elmBlur","styleFlood","elmsAppend"].forEach(function(P){u["efc_dropShadow_"+P]=C[P]}),C.elmsAppend.forEach(function(P){N.appendChild(P)}),u.face.setAttribute("filter","url(#"+U+")"),je(u,"new_edge4viewBox",e.dropShadow.adjustEdge),e.dropShadow.update(u)},remove:function(u){var g=u.defs;u.efc_dropShadow_elmsAppend&&(u.efc_dropShadow_elmsAppend.forEach(function(_){g.removeChild(_)}),u.efc_dropShadow_elmFilter=u.efc_dropShadow_elmOffset=u.efc_dropShadow_elmBlur=u.efc_dropShadow_styleFlood=u.efc_dropShadow_elmsAppend=null),ze(u,"new_edge4viewBox",e.dropShadow.adjustEdge),Un(u,{}),u.face.removeAttribute("filter"),Ke(u.aplStats,e.dropShadow.stats)},update:function(u){var g,_,m=u.curStats,x=u.aplStats,A=x.dropShadow_options;m.dropShadow_dx=g=A.dx,bt(u,x,"dropShadow_dx",g)&&(u.efc_dropShadow_elmOffset.dx.baseVal=g,_=!0),m.dropShadow_dy=g=A.dy,bt(u,x,"dropShadow_dy",g)&&(u.efc_dropShadow_elmOffset.dy.baseVal=g,_=!0),m.dropShadow_blur=g=A.blur,bt(u,x,"dropShadow_blur",g)&&(u.efc_dropShadow_elmBlur.setStdDeviation(g,g),_=!0),_&&Un(u,{}),m.dropShadow_color=g=A.color,bt(u,x,"dropShadow_color",g)&&(u.efc_dropShadow_styleFlood.floodColor=g),m.dropShadow_opacity=g=A.opacity,bt(u,x,"dropShadow_opacity",g)&&(u.efc_dropShadow_styleFlood.floodOpacity=g)},adjustEdge:function(u,g){var _,m,x=u.curStats,A=u.aplStats;x.dropShadow_dx!=null&&(_=3*x.dropShadow_blur,(m={x1:g.x1-_+x.dropShadow_dx,y1:g.y1-_+x.dropShadow_dy,x2:g.x2+_+x.dropShadow_dx,y2:g.y2+_+x.dropShadow_dy}).x1<g.x1&&(g.x1=m.x1),m.y1<g.y1&&(g.y1=m.y1),m.x2>g.x2&&(g.x2=m.x2),m.y2>g.y2&&(g.y2=m.y2),["x","y"].forEach(function(z){var N,U="dropShadow_"+z;x[U]=N=g[z+"1"],bt(u,A,U,N)&&(u.efc_dropShadow_elmFilter[z].baseVal.value=N)}))}}},Object.keys(e).forEach(function(u){var g=e[u],_=g.stats;_[u+"_enabled"]={iniValue:!1},_[u+"_options"]={hasProps:!0},g.anim&&(_[u+"_animOptions"]={},_[u+"_animId"]={})}),t={none:{defaultAnimOptions:{},init:function(u,g){var _=u.curStats;_.show_animId&&(Ze.remove(_.show_animId),_.show_animId=null),t.none.start(u,g)},start:function(u,g){t.none.stop(u,!0)},stop:function(u,g,_){var m=u.curStats;return _=_??u.aplStats.show_on,m.show_inAnim=!1,g&&Di(u,_),_?1:0}},fade:{defaultAnimOptions:{duration:300,timing:"linear"},init:function(u,g){var _=u.curStats,m=u.aplStats;_.show_animId&&Ze.remove(_.show_animId),_.show_animId=Ze.add(function(x){return x},function(x,A){A?t.fade.stop(u,!0):(u.svg.style.opacity=x+"",gn&&(Le(u,u.svg),Ka(u)))},m.show_animOptions.duration,1,m.show_animOptions.timing,null,!1),t.fade.start(u,g)},start:function(u,g){var _,m=u.curStats;m.show_inAnim&&(_=Ze.stop(m.show_animId)),Di(u,1),m.show_inAnim=!0,Ze.start(m.show_animId,!u.aplStats.show_on,g??_)},stop:function(u,g,_){var m,x=u.curStats;return _=_??u.aplStats.show_on,m=x.show_inAnim?Ze.stop(x.show_animId):_?1:0,x.show_inAnim=!1,g&&(u.svg.style.opacity=_?"":"0",Di(u,_)),m}},draw:{defaultAnimOptions:{duration:500,timing:[.58,0,.42,1]},init:function(u,g){var _=u.curStats,m=u.aplStats,x=u.pathList.baseVal,A=ja(x),z=A.segsLen,N=A.lenAll;_.show_animId&&Ze.remove(_.show_animId),_.show_animId=Ze.add(function(U){var C,P,Y,R,D=-1;if(U===0)P=[[x[0][0],x[0][0]]];else if(U===1)P=x;else{for(C=N*U,P=[];C>=z[++D];)P.push(x[D]),C-=z[D];C&&((Y=x[D]).length===2?P.push([Y[0],ns(Y[0],Y[1],C/z[D])]):(R=Ti(Y[0],Y[1],Y[2],Y[3],Ms(Y[0],Y[1],Y[2],Y[3],C)),P.push([Y[0],R.fromP1,R.fromP2,R])))}return P},function(U,C){C?t.draw.stop(u,!0):(u.pathList.animVal=U,Un(u,{path:!0}))},m.show_animOptions.duration,1,m.show_animOptions.timing,null,!1),t.draw.start(u,g)},start:function(u,g){var _,m=u.curStats;m.show_inAnim&&(_=Ze.stop(m.show_animId)),Di(u,1),m.show_inAnim=!0,je(u,"apl_position",t.draw.update),Ze.start(m.show_animId,!u.aplStats.show_on,g??_)},stop:function(u,g,_){var m,x=u.curStats;return _=_??u.aplStats.show_on,m=x.show_inAnim?Ze.stop(x.show_animId):_?1:0,x.show_inAnim=!1,g&&(u.pathList.animVal=_?null:[[u.pathList.baseVal[0][0],u.pathList.baseVal[0][0]]],Un(u,{path:!0}),Di(u,_)),m},update:function(u){ze(u,"apl_position",t.draw.update),u.curStats.show_inAnim?t.draw.init(u,t.draw.stop(u)):u.aplStats.show_animOptions={}}}},function(){function u(g){return function(_){var m={};m[g]=_,this.setOptions(m)}}[["start","anchorSE",0],["end","anchorSE",1],["color","lineColor"],["size","lineSize"],["startSocketGravity","socketGravitySE",0],["endSocketGravity","socketGravitySE",1],["startPlugColor","plugColorSE",0],["endPlugColor","plugColorSE",1],["startPlugSize","plugSizeSE",0],["endPlugSize","plugSizeSE",1],["outline","lineOutlineEnabled"],["outlineColor","lineOutlineColor"],["outlineSize","lineOutlineSize"],["startPlugOutline","plugOutlineEnabledSE",0],["endPlugOutline","plugOutlineEnabledSE",1],["startPlugOutlineColor","plugOutlineColorSE",0],["endPlugOutlineColor","plugOutlineColorSE",1],["startPlugOutlineSize","plugOutlineSizeSE",0],["endPlugOutlineSize","plugOutlineSizeSE",1]].forEach(function(g){var _=g[0],m=g[1],x=g[2];Object.defineProperty(zn.prototype,_,{get:function(){var A=x!=null?ln[this._id].options[m][x]:m?ln[this._id].options[m]:ln[this._id].options[_];return A==null?ne:en(A)},set:u(_),enumerable:!0})}),[["path",we],["startSocket",rt,"socketSE",0],["endSocket",rt,"socketSE",1],["startPlug",gr,"plugSE",0],["endPlug",gr,"plugSE",1]].forEach(function(g){var _=g[0],m=g[1],x=g[2],A=g[3];Object.defineProperty(zn.prototype,_,{get:function(){var z,N=A!=null?ln[this._id].options[x][A]:x?ln[this._id].options[x]:ln[this._id].options[_];return N?Object.keys(m).some(function(U){return m[U]===N&&(z=U,!0)})?z:new Error("It's broken"):ne},set:u(_),enumerable:!0})}),Object.keys(e).forEach(function(g){var _=e[g];Object.defineProperty(zn.prototype,g,{get:function(){var m,x,A=ln[this._id].options[g];return an(A)?(m=A,x=_.optionsConf.reduce(function(z,N){var U,C=N[0],P=N[1],Y=N[2],R=N[3],D=N[4],O=D!=null?m[R][D]:R?m[R]:m[P];return z[P]=C==="id"?O?Object.keys(Y).some(function(q){return Y[q]===O&&(U=q,!0)})?U:new Error("It's broken"):ne:O==null?ne:en(O),z},{}),_.anim&&(x.animation=en(m.animation)),x):A},set:u(g),enumerable:!0})}),["startLabel","endLabel","middleLabel"].forEach(function(g,_){Object.defineProperty(zn.prototype,g,{get:function(){var m=ln[this._id],x=m.options;return x.labelSEM[_]&&!m.optionIsAttach.labelSEM[_]?Me[x.labelSEM[_]._id].text:x.labelSEM[_]||""},set:u(g),enumerable:!0})})}(),zn.prototype.setOptions=function(u){return qs(ln[this._id],u),this},zn.prototype.position=function(){return Un(ln[this._id],{position:!0}),this},zn.prototype.remove=function(){var u=ln[this._id],g=u.curStats;Object.keys(e).forEach(function(_){var m=_+"_animId";g[m]&&Ze.remove(g[m])}),g.show_animId&&Ze.remove(g.show_animId),u.attachments.slice().forEach(function(_){$s(u,_)}),u.baseWindow&&u.svg&&u.baseWindow.document.body.removeChild(u.svg),delete ln[this._id]},zn.prototype.show=function(u,g){return Vs(ln[this._id],!0,u,g),this},zn.prototype.hide=function(u,g){return Vs(ln[this._id],!1,u,g),this},o=function(u){u&&Me[u._id]&&(u.boundTargets.slice().forEach(function(g){$s(g.props,u,!0)}),u.conf.remove&&u.conf.remove(u),delete Me[u._id])},r=function(){function u(g,_){var m,x={conf:g,curStats:{},aplStats:{},boundTargets:[]},A={};g.argOptions.every(function(z){return!(!_.length||(typeof z.type=="string"?typeof _[0]!==z.type:typeof z.type!="function"||!z.type(_[0])))&&(A[z.optionName]=_.shift(),!0)}),m=_.length&&an(_[0])?en(_[0]):{},Object.keys(A).forEach(function(z){m[z]=A[z]}),g.stats&&(Ke(x.curStats,g.stats),Ke(x.aplStats,g.stats)),Object.defineProperty(this,"_id",{value:++Ro}),Object.defineProperty(this,"isRemoved",{get:function(){return!Me[this._id]}}),x._id=this._id,g.init&&!g.init(x,m)||(Me[this._id]=x)}return u.prototype.remove=function(){var g=this,_=Me[g._id];_&&(_.boundTargets.slice().forEach(function(m){_.conf.removeOption(_,m)}),Ri(function(){var m=Me[g._id];m&&(console.error("LeaderLineAttachment was not removed by removeOption"),o(m))}))},u}(),window.LeaderLineAttachment=r,i=function(u,g){return u instanceof r&&(!(u.isRemoved||g&&Me[u._id].conf.type!==g)||null)},n={pointAnchor:{type:"anchor",argOptions:[{optionName:"element",type:ri}],init:function(u,g){return u.element=n.pointAnchor.checkElement(g.element),u.x=n.pointAnchor.parsePercent(g.x,!0)||[.5,!0],u.y=n.pointAnchor.parsePercent(g.y,!0)||[.5,!0],!0},removeOption:function(u,g){var _=g.props,m={},x=u.element,A=_.options.anchorSE[g.optionName==="start"?1:0];x===A&&(x=A===document.body?new r(n.pointAnchor,[x]):document.body),m[g.optionName]=x,qs(_,m)},getBBoxNest:function(u,g){var _=ii(u.element,g.baseWindow),m=_.width,x=_.height;return _.width=_.height=0,_.left=_.right=_.left+u.x[0]*(u.x[1]?m:1),_.top=_.bottom=_.top+u.y[0]*(u.y[1]?x:1),_},parsePercent:function(u,g){var _,m,x=!1;return _n(u)?m=u:typeof u=="string"&&(_=Si.exec(u))&&_[2]&&(x=(m=parseFloat(_[1])/100)!==0),m!=null&&(g||0<=m)?[m,x]:null},checkElement:function(u){if(u==null)u=document.body;else if(!ri(u))throw new Error("`element` must be Element");return u}},areaAnchor:{type:"anchor",argOptions:[{optionName:"element",type:ri},{optionName:"shape",type:"string"}],stats:{color:{},strokeWidth:{},elementWidth:{},elementHeight:{},elementLeft:{},elementTop:{},pathListRel:{},bBoxRel:{},pathData:{},viewBoxBBox:{hasProps:!0},dashLen:{},dashGap:{}},init:function(u,g){var _,m,x,A=[];return u.element=n.pointAnchor.checkElement(g.element),typeof g.color=="string"&&(u.color=g.color.trim()),typeof g.fillColor=="string"&&(u.fill=g.fillColor.trim()),_n(g.size)&&0<=g.size&&(u.size=g.size),g.dash&&(u.dash=!0,_n(g.dash.len)&&0<g.dash.len&&(u.dashLen=g.dash.len),_n(g.dash.gap)&&0<g.dash.gap&&(u.dashGap=g.dash.gap)),g.shape==="circle"?u.shape=g.shape:g.shape==="polygon"&&Array.isArray(g.points)&&3<=g.points.length&&g.points.every(function(z){var N={};return!(!(N.x=n.pointAnchor.parsePercent(z[0],!0))||!(N.y=n.pointAnchor.parsePercent(z[1],!0)))&&(A.push(N),(N.x[1]||N.y[1])&&(u.hasRatio=!0),!0)})?(u.shape=g.shape,u.points=A):(u.shape="rect",u.radius=_n(g.radius)&&0<=g.radius?g.radius:0),u.shape!=="rect"&&u.shape!=="circle"||(u.x=n.pointAnchor.parsePercent(g.x,!0)||[-.05,!0],u.y=n.pointAnchor.parsePercent(g.y,!0)||[-.05,!0],u.width=n.pointAnchor.parsePercent(g.width)||[1.1,!0],u.height=n.pointAnchor.parsePercent(g.height)||[1.1,!0],(u.x[1]||u.y[1]||u.width[1]||u.height[1])&&(u.hasRatio=!0)),_=u.element.ownerDocument,u.svg=m=_.createElementNS(Mt,"svg"),m.className.baseVal=S+"-areaAnchor",m.viewBox.baseVal||m.setAttribute("viewBox","0 0 0 0"),u.path=m.appendChild(_.createElementNS(Mt,"path")),u.path.style.fill=u.fill||"none",u.isShown=!1,m.style.visibility="hidden",_.body.appendChild(m),Za(x=_.defaultView),u.bodyOffset=Qa(x),u.updateColor=function(){var z,N=u.curStats,U=u.aplStats,C=u.boundTargets.length?u.boundTargets[0].props.curStats:null;N.color=z=u.color||(C?C.line_color:Dn.lineColor),bt(u,U,"color",z)&&(u.path.style.stroke=z)},u.updateShow=function(){Di(u,u.boundTargets.some(function(z){return z.props.isShown===!0}))},!0},bind:function(u,g){var _=g.props;return u.color||je(_,"cur_line_color",u.updateColor),je(_,"svgShow",u.updateShow),Ri(function(){u.updateColor(),u.updateShow()}),!0},unbind:function(u,g){var _=g.props;u.color||ze(_,"cur_line_color",u.updateColor),ze(_,"svgShow",u.updateShow),1<u.boundTargets.length&&Ri(function(){u.updateColor(),u.updateShow(),n.areaAnchor.update(u)&&u.boundTargets.forEach(function(m){Un(m.props,{position:!0})})})},removeOption:function(u,g){n.pointAnchor.removeOption(u,g)},remove:function(u){u.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),u.boundTargets.forEach(function(g){n.areaAnchor.unbind(u,g)})),u.svg.parentNode.removeChild(u.svg)},getStrokeWidth:function(u,g){return n.areaAnchor.update(u)&&1<u.boundTargets.length&&Ri(function(){u.boundTargets.forEach(function(_){_.props!==g&&Un(_.props,{position:!0})})}),u.curStats.strokeWidth},getPathData:function(u,g){var _=ii(u.element,g.baseWindow);return Do(u.curStats.pathListRel,function(m){m.x+=_.left,m.y+=_.top})},getBBoxNest:function(u,g){var _=ii(u.element,g.baseWindow),m=u.curStats.bBoxRel;return{left:m.left+_.left,top:m.top+_.top,right:m.right+_.left,bottom:m.bottom+_.top,width:m.width,height:m.height}},update:function(u){var g,_,m,x,A,z,N,U,C,P,Y,R,D,O,q,K,et,lt,it,j,L,V,F,mt,xt,pt,T,J,ct,Ct,It,gt,W=u.curStats,$t=u.aplStats,ve=u.boundTargets.length?u.boundTargets[0].props.curStats:null,Dt={};if(Dt.strokeWidth=bt(u,W,"strokeWidth",u.size!=null?u.size:ve?ve.line_strokeWidth:Dn.lineSize),g=Ci(u.element),Dt.elementWidth=bt(u,W,"elementWidth",g.width),Dt.elementHeight=bt(u,W,"elementHeight",g.height),Dt.elementLeft=bt(u,W,"elementLeft",g.left),Dt.elementTop=bt(u,W,"elementTop",g.top),Dt.strokeWidth||u.hasRatio&&(Dt.elementWidth||Dt.elementHeight)){switch(u.shape){case"rect":(j={left:u.x[0]*(u.x[1]?g.width:1),top:u.y[0]*(u.y[1]?g.height:1),width:u.width[0]*(u.width[1]?g.width:1),height:u.height[0]*(u.height[1]?g.height:1)}).right=j.left+j.width,j.bottom=j.top+j.height,mt=W.strokeWidth/2,V=(F=Math.min(j.width,j.height))?F/2*Math.SQRT2+mt:0,(L=u.radius?u.radius<=V?u.radius:V:0)?(pt=L-(xt=(L-mt)/Math.SQRT2),J=L*Jr,T=[{x:j.left-pt,y:j.top+xt},{x:j.left+xt,y:j.top-pt},{x:j.right-xt,y:j.top-pt},{x:j.right+pt,y:j.top+xt},{x:j.right+pt,y:j.bottom-xt},{x:j.right-xt,y:j.bottom+pt},{x:j.left+xt,y:j.bottom+pt},{x:j.left-pt,y:j.bottom-xt}],W.pathListRel=[[T[0],{x:T[0].x,y:T[0].y-J},{x:T[1].x-J,y:T[1].y},T[1]]],T[1].x!==T[2].x&&W.pathListRel.push([T[1],T[2]]),W.pathListRel.push([T[2],{x:T[2].x+J,y:T[2].y},{x:T[3].x,y:T[3].y-J},T[3]]),T[3].y!==T[4].y&&W.pathListRel.push([T[3],T[4]]),W.pathListRel.push([T[4],{x:T[4].x,y:T[4].y+J},{x:T[5].x+J,y:T[5].y},T[5]]),T[5].x!==T[6].x&&W.pathListRel.push([T[5],T[6]]),W.pathListRel.push([T[6],{x:T[6].x-J,y:T[6].y},{x:T[7].x,y:T[7].y+J},T[7]]),T[7].y!==T[0].y&&W.pathListRel.push([T[7],T[0]]),W.pathListRel.push([]),pt=L-xt+W.strokeWidth/2,T=[{x:j.left-pt,y:j.top-pt},{x:j.right+pt,y:j.bottom+pt}]):(pt=W.strokeWidth/2,T=[{x:j.left-pt,y:j.top-pt},{x:j.right+pt,y:j.bottom+pt}],W.pathListRel=[[T[0],{x:T[1].x,y:T[0].y}],[{x:T[1].x,y:T[0].y},T[1]],[T[1],{x:T[0].x,y:T[1].y}],[]],T=[{x:j.left-W.strokeWidth,y:j.top-W.strokeWidth},{x:j.right+W.strokeWidth,y:j.bottom+W.strokeWidth}]),W.bBoxRel={left:T[0].x,top:T[0].y,right:T[1].x,bottom:T[1].y,width:T[1].x-T[0].x,height:T[1].y-T[0].y};break;case"circle":(N={left:u.x[0]*(u.x[1]?g.width:1),top:u.y[0]*(u.y[1]?g.height:1),width:u.width[0]*(u.width[1]?g.width:1),height:u.height[0]*(u.height[1]?g.height:1)}).width||N.height||(N.width=N.height=10),N.width||(N.width=N.height),N.height||(N.height=N.width),N.right=N.left+N.width,N.bottom=N.top+N.height,U=N.left+N.width/2,C=N.top+N.height/2,O=W.strokeWidth/2,q=N.width/2,K=N.height/2,P=q*Math.SQRT2+O,Y=K*Math.SQRT2+O,R=P*Jr,D=Y*Jr,it=[{x:U-P,y:C},{x:U,y:C-Y},{x:U+P,y:C},{x:U,y:C+Y}],W.pathListRel=[[it[0],{x:it[0].x,y:it[0].y-D},{x:it[1].x-R,y:it[1].y},it[1]],[it[1],{x:it[1].x+R,y:it[1].y},{x:it[2].x,y:it[2].y-D},it[2]],[it[2],{x:it[2].x,y:it[2].y+D},{x:it[3].x+R,y:it[3].y},it[3]],[it[3],{x:it[3].x-R,y:it[3].y},{x:it[0].x,y:it[0].y+D},it[0]],[]],et=P-q+W.strokeWidth/2,lt=Y-K+W.strokeWidth/2,it=[{x:N.left-et,y:N.top-lt},{x:N.right+et,y:N.bottom+lt}],W.bBoxRel={left:it[0].x,top:it[0].y,right:it[1].x,bottom:it[1].y,width:it[1].x-it[0].x,height:it[1].y-it[0].y};break;case"polygon":u.points.forEach(function(jt){var Ce=jt.x[0]*(jt.x[1]?g.width:1),Te=jt.y[0]*(jt.y[1]?g.height:1);m?(Ce<m.left&&(m.left=Ce),Ce>m.right&&(m.right=Ce),Te<m.top&&(m.top=Te),Te>m.bottom&&(m.bottom=Te)):m={left:Ce,right:Ce,top:Te,bottom:Te},x?W.pathListRel.push([x,{x:Ce,y:Te}]):W.pathListRel=[],x={x:Ce,y:Te}}),W.pathListRel.push([]),A=W.strokeWidth/2,z=[{x:m.left-A,y:m.top-A},{x:m.right+A,y:m.bottom+A}],W.bBoxRel={left:z[0].x,top:z[0].y,right:z[1].x,bottom:z[1].y,width:z[1].x-z[0].x,height:z[1].y-z[0].y}}Dt.pathListRel=Dt.bBoxRel=!0}return(Dt.pathListRel||Dt.elementLeft||Dt.elementTop)&&(W.pathData=Do(W.pathListRel,function(jt){jt.x+=g.left,jt.y+=g.top})),bt(u,$t,"strokeWidth",_=W.strokeWidth)&&(u.path.style.strokeWidth=_+"px"),Ls(_=W.pathData,$t.pathData)&&(u.path.setPathData(_),$t.pathData=_,Dt.pathData=!0),u.dash&&(!Dt.pathData&&(!Dt.strokeWidth||u.dashLen&&u.dashGap)||(W.dashLen=u.dashLen||2*W.strokeWidth,W.dashGap=u.dashGap||W.strokeWidth),Dt.dash=bt(u,$t,"dashLen",W.dashLen)||Dt.dash,Dt.dash=bt(u,$t,"dashGap",W.dashGap)||Dt.dash,Dt.dash&&(u.path.style.strokeDasharray=$t.dashLen+","+$t.dashGap)),ct=W.viewBoxBBox,Ct=$t.viewBoxBBox,It=u.svg.viewBox.baseVal,gt=u.svg.style,ct.x=W.bBoxRel.left+g.left,ct.y=W.bBoxRel.top+g.top,ct.width=W.bBoxRel.width,ct.height=W.bBoxRel.height,["x","y","width","height"].forEach(function(jt){(_=ct[jt])!==Ct[jt]&&(It[jt]=Ct[jt]=_,gt[on[jt]]=_+(jt==="x"||jt==="y"?u.bodyOffset[jt]:0)+"px")}),Dt.strokeWidth||Dt.pathListRel||Dt.bBoxRel}},mouseHoverAnchor:{type:"anchor",argOptions:[{optionName:"element",type:ri},{optionName:"showEffectName",type:"string"}],style:{backgroundImage:"url('data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cG9seWdvbiBwb2ludHM9IjI0LDAgMCw4IDgsMTEgMCwxOSA1LDI0IDEzLDE2IDE2LDI0IiBmaWxsPSJjb3JhbCIvPjwvc3ZnPg==')",backgroundSize:"",backgroundRepeat:"no-repeat",backgroundColor:"#f8f881",cursor:"default"},hoverStyle:{backgroundImage:"none",backgroundColor:"#fadf8f"},padding:{top:1,right:15,bottom:1,left:2},minHeight:15,backgroundPosition:{right:2,top:2},backgroundSize:{width:12,height:12},dirKeys:[["top","Top"],["right","Right"],["bottom","Bottom"],["left","Left"]],init:function(u,g){var _,m,x,A,z,N,U,C,P,Y,R,D=n.mouseHoverAnchor,O={};if(u.element=n.pointAnchor.checkElement(g.element),C=u.element,!((Y=C.ownerDocument)&&(P=Y.defaultView)&&P.HTMLElement&&C instanceof P.HTMLElement))throw new Error("`element` must be HTML element");return D.style.backgroundSize=D.backgroundSize.width+"px "+D.backgroundSize.height+"px",["style","hoverStyle"].forEach(function(q){var K=D[q];u[q]=Object.keys(K).reduce(function(et,lt){return et[lt]=K[lt],et},{})}),(_=u.element.ownerDocument.defaultView.getComputedStyle(u.element,"")).display==="inline"?u.style.display="inline-block":_.display==="none"&&(u.style.display="block"),n.mouseHoverAnchor.dirKeys.forEach(function(q){var K=q[0],et="padding"+q[1];parseFloat(_[et])<D.padding[K]&&(u.style[et]=D.padding[K]+"px")}),u.style.display&&(A=u.element.style.display,u.element.style.display=u.style.display),n.mouseHoverAnchor.dirKeys.forEach(function(q){var K="padding"+q[1];u.style[K]&&(O[K]=u.element.style[K],u.element.style[K]=u.style[K])}),(x=u.element.getBoundingClientRect()).height<D.minHeight&&(gn?(R=D.minHeight,_.boxSizing==="content-box"?R-=parseFloat(_.borderTopWidth)+parseFloat(_.borderBottomWidth)+parseFloat(_.paddingTop)+parseFloat(_.paddingBottom):_.boxSizing==="padding-box"&&(R-=parseFloat(_.borderTopWidth)+parseFloat(_.borderBottomWidth)),u.style.height=R+"px"):u.style.height=parseFloat(_.height)+(D.minHeight-x.height)+"px"),u.style.backgroundPosition=pe?x.width-D.backgroundSize.width-D.backgroundPosition.right+"px "+D.backgroundPosition.top+"px":"right "+D.backgroundPosition.right+"px top "+D.backgroundPosition.top+"px",u.style.display&&(u.element.style.display=A),n.mouseHoverAnchor.dirKeys.forEach(function(q){var K="padding"+q[1];u.style[K]&&(u.element.style[K]=O[K])}),["style","hoverStyle"].forEach(function(q){var K=u[q],et=g[q];an(et)&&Object.keys(et).forEach(function(lt){typeof et[lt]=="string"||_n(et[lt])?K[lt]=et[lt]:et[lt]==null&&delete K[lt]})}),typeof g.onSwitch=="function"&&(U=g.onSwitch),g.showEffectName&&t[g.showEffectName]&&(u.showEffectName=z=g.showEffectName),N=g.animOptions,u.elmStyle=m=u.element.style,u.mouseenter=function(q){u.hoverStyleSave=D.getStyles(m,Object.keys(u.hoverStyle)),D.setStyles(m,u.hoverStyle),u.boundTargets.forEach(function(K){Vs(K.props,!0,z,N)}),U&&U(q)},u.mouseleave=function(q){D.setStyles(m,u.hoverStyleSave),u.boundTargets.forEach(function(K){Vs(K.props,!1,z,N)}),U&&U(q)},!0},bind:function(u,g){var _,m,x,A,z;return g.props.svg?n.mouseHoverAnchor.llShow(g.props,!1,u.showEffectName):Ri(function(){n.mouseHoverAnchor.llShow(g.props,!1,u.showEffectName)}),u.enabled||(u.styleSave=n.mouseHoverAnchor.getStyles(u.elmStyle,Object.keys(u.style)),n.mouseHoverAnchor.setStyles(u.elmStyle,u.style),u.removeEventListener=(_=u.element,m=u.mouseenter,x=u.mouseleave,"onmouseenter"in _&&"onmouseleave"in _?(_.addEventListener("mouseenter",m,!1),_.addEventListener("mouseleave",x,!1),function(){_.removeEventListener("mouseenter",m,!1),_.removeEventListener("mouseleave",x,!1)}):(console.warn("mouseenter and mouseleave events polyfill is enabled."),A=function(N){N.relatedTarget&&(N.relatedTarget===this||this.compareDocumentPosition(N.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||m.apply(this,arguments)},_.addEventListener("mouseover",A),z=function(N){N.relatedTarget&&(N.relatedTarget===this||this.compareDocumentPosition(N.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||x.apply(this,arguments)},_.addEventListener("mouseout",z),function(){_.removeEventListener("mouseover",A,!1),_.removeEventListener("mouseout",z,!1)})),u.enabled=!0),!0},unbind:function(u,g){u.enabled&&u.boundTargets.length<=1&&(u.removeEventListener(),n.mouseHoverAnchor.setStyles(u.elmStyle,u.styleSave),u.enabled=!1),n.mouseHoverAnchor.llShow(g.props,!0,u.showEffectName)},removeOption:function(u,g){n.pointAnchor.removeOption(u,g)},remove:function(u){u.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),u.boundTargets.forEach(function(g){n.mouseHoverAnchor.unbind(u,g)}))},getBBoxNest:function(u,g){return ii(u.element,g.baseWindow)},llShow:function(u,g,_){t[_||u.curStats.show_effect].stop(u,!0,g),u.aplStats.show_on=g},getStyles:function(u,g){return g.reduce(function(_,m){return _[m]=u[m],_},{})},setStyles:function(u,g){Object.keys(g).forEach(function(_){u[_]=g[_]})}},captionLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},x:{},y:{}},textStyleProps:["fontFamily","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","kerning","letterSpacing","wordSpacing","textDecoration"],init:function(u,g){return typeof g.text=="string"&&(u.text=g.text.trim()),!!u.text&&(typeof g.color=="string"&&(u.color=g.color.trim()),u.outlineColor=typeof g.outlineColor=="string"?g.outlineColor.trim():"#fff",Array.isArray(g.offset)&&_n(g.offset[0])&&_n(g.offset[1])&&(u.offset={x:g.offset[0],y:g.offset[1]}),_n(g.lineOffset)&&(u.lineOffset=g.lineOffset),n.captionLabel.textStyleProps.forEach(function(_){g[_]!=null&&(u[_]=g[_])}),u.updateColor=function(_){n.captionLabel.updateColor(u,_)},u.updateSocketXY=function(_){var m,x,A,z,N=u.curStats,U=u.aplStats,C=_.curStats,P=C.position_socketXYSE[u.socketIndex];P.x!=null&&(u.offset?(N.x=P.x+u.offset.x,N.y=P.y+u.offset.y):(m=u.height/2,x=Math.max(C.attach_plugSideLenSE[u.socketIndex]||0,C.line_strokeWidth/2),A=C.position_socketXYSE[u.socketIndex?0:1],P.socketId===ut||P.socketId===Z?(N.x=P.socketId===ut?P.x-m-u.width:P.x+m,N.y=A.y<P.y?P.y+x+m:P.y-x-m-u.height):(N.x=A.x<P.x?P.x+x+m:P.x-x-m-u.width,N.y=P.socketId===Q?P.y-m-u.height:P.y+m)),bt(u,U,"x",z=N.x)&&(u.elmPosition.x.baseVal.getItem(0).value=z),bt(u,U,"y",z=N.y)&&(u.elmPosition.y.baseVal.getItem(0).value=z+u.height))},u.updatePath=function(_){var m,x,A=u.curStats,z=u.aplStats,N=_.pathList.animVal||_.pathList.baseVal;N&&(m=n.captionLabel.getMidPoint(N,u.lineOffset),A.x=m.x-u.width/2,A.y=m.y-u.height/2,bt(u,z,"x",x=A.x)&&(u.elmPosition.x.baseVal.getItem(0).value=x),bt(u,z,"y",x=A.y)&&(u.elmPosition.y.baseVal.getItem(0).value=x+u.height))},u.updateShow=function(_){n.captionLabel.updateShow(u,_)},pe&&(u.adjustEdge=function(_,m){var x=u.curStats;x.x!=null&&n.captionLabel.adjustEdge(m,{x:x.x,y:x.y,width:u.width,height:u.height},u.strokeWidth/2)}),!0)},updateColor:function(u,g){var _,m=u.curStats,x=u.aplStats,A=g.curStats;m.color=_=u.color||A.line_color,bt(u,x,"color",_)&&(u.styleFill.fill=_)},updateShow:function(u,g){var _=g.isShown===!0;_!==u.isShown&&(u.styleShow.visibility=_?"":"hidden",u.isShown=_)},adjustEdge:function(u,g,_){var m={x1:g.x-_,y1:g.y-_,x2:g.x+g.width+_,y2:g.y+g.height+_};m.x1<u.x1&&(u.x1=m.x1),m.y1<u.y1&&(u.y1=m.y1),m.x2>u.x2&&(u.x2=m.x2),m.y2>u.y2&&(u.y2=m.y2)},newText:function(u,g,_,m,x){var A,z,N,U,C,P;return(A=g.createElementNS(Mt,"text")).textContent=u,[A.x,A.y].forEach(function(Y){var R=_.createSVGLength();R.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),Y.baseVal.initialize(R)}),typeof f!="boolean"&&(f="paintOrder"in A.style),x&&!f?(N=g.createElementNS(Mt,"defs"),A.id=m,N.appendChild(A),(C=(z=g.createElementNS(Mt,"g")).appendChild(g.createElementNS(Mt,"use"))).href.baseVal="#"+m,(U=z.appendChild(g.createElementNS(Mt,"use"))).href.baseVal="#"+m,(P=C.style).strokeLinejoin="round",{elmPosition:A,styleText:A.style,styleFill:U.style,styleStroke:P,styleShow:z.style,elmsAppend:[N,z]}):(P=A.style,x&&(P.strokeLinejoin="round",P.paintOrder="stroke"),{elmPosition:A,styleText:P,styleFill:P,styleStroke:x?P:null,styleShow:P,elmsAppend:[A]})},getMidPoint:function(u,g){var _,m,x,A=ja(u),z=A.segsLen,N=A.lenAll,U=-1;if((_=N/2+(g||0))<=0)return(m=u[0]).length===2?ns(m[0],m[1],0):Ti(m[0],m[1],m[2],m[3],0);if(N<=_)return(m=u[u.length-1]).length===2?ns(m[0],m[1],1):Ti(m[0],m[1],m[2],m[3],1);for(x=[];_>z[++U];)x.push(u[U]),_-=z[U];return(m=u[U]).length===2?ns(m[0],m[1],_/z[U]):Ti(m[0],m[1],m[2],m[3],Ms(m[0],m[1],m[2],m[3],_))},initSvg:function(u,g){var _,m,x=n.captionLabel.newText(u.text,g.baseWindow.document,g.svg,S+"-captionLabel-"+u._id,u.outlineColor);["elmPosition","styleFill","styleShow","elmsAppend"].forEach(function(A){u[A]=x[A]}),u.isShown=!1,u.styleShow.visibility="hidden",n.captionLabel.textStyleProps.forEach(function(A){u[A]!=null&&(x.styleText[A]=u[A])}),x.elmsAppend.forEach(function(A){g.svg.appendChild(A)}),_=x.elmPosition.getBBox(),u.width=_.width,u.height=_.height,u.outlineColor&&(m=10<(m=_.height/9)?10:m<2?2:m,x.styleStroke.strokeWidth=m+"px",x.styleStroke.stroke=u.outlineColor),u.strokeWidth=m||0,Ke(u.aplStats,n.captionLabel.stats),u.updateColor(g),u.refSocketXY?u.updateSocketXY(g):u.updatePath(g),pe&&Un(g,{}),u.updateShow(g)},bind:function(u,g){var _=g.props;return u.color||je(_,"cur_line_color",u.updateColor),(u.refSocketXY=g.optionName==="startLabel"||g.optionName==="endLabel")?(u.socketIndex=g.optionName==="startLabel"?0:1,je(_,"apl_position",u.updateSocketXY),u.offset||(je(_,"cur_attach_plugSideLenSE",u.updateSocketXY),je(_,"cur_line_strokeWidth",u.updateSocketXY))):je(_,"apl_path",u.updatePath),je(_,"svgShow",u.updateShow),pe&&je(_,"new_edge4viewBox",u.adjustEdge),n.captionLabel.initSvg(u,_),!0},unbind:function(u,g){var _=g.props;u.elmsAppend&&(u.elmsAppend.forEach(function(m){_.svg.removeChild(m)}),u.elmPosition=u.styleFill=u.styleShow=u.elmsAppend=null),Ke(u.curStats,n.captionLabel.stats),Ke(u.aplStats,n.captionLabel.stats),u.color||ze(_,"cur_line_color",u.updateColor),u.refSocketXY?(ze(_,"apl_position",u.updateSocketXY),u.offset||(ze(_,"cur_attach_plugSideLenSE",u.updateSocketXY),ze(_,"cur_line_strokeWidth",u.updateSocketXY))):ze(_,"apl_path",u.updatePath),ze(_,"svgShow",u.updateShow),pe&&(ze(_,"new_edge4viewBox",u.adjustEdge),Un(_,{}))},removeOption:function(u,g){var _=g.props,m={};m[g.optionName]="",qs(_,m)},remove:function(u){u.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),u.boundTargets.forEach(function(g){n.captionLabel.unbind(u,g)}))}},pathLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},startOffset:{},pathData:{}},init:function(u,g){return typeof g.text=="string"&&(u.text=g.text.trim()),!!u.text&&(typeof g.color=="string"&&(u.color=g.color.trim()),u.outlineColor=typeof g.outlineColor=="string"?g.outlineColor.trim():"#fff",_n(g.lineOffset)&&(u.lineOffset=g.lineOffset),n.captionLabel.textStyleProps.forEach(function(_){g[_]!=null&&(u[_]=g[_])}),u.updateColor=function(_){n.captionLabel.updateColor(u,_)},u.updatePath=function(_){var m,x=u.curStats,A=u.aplStats,z=_.curStats,N=_.pathList.animVal||_.pathList.baseVal;N&&(x.pathData=m=n.pathLabel.getOffsetPathData(N,z.line_strokeWidth/2+u.strokeWidth/2+u.height/4,1.25*u.height),Ls(m,A.pathData)&&(u.elmPath.setPathData(m),A.pathData=m,u.bBox=u.elmPosition.getBBox(),u.updateStartOffset(_)))},u.updateStartOffset=function(_){var m,x,A,z,N=u.curStats,U=u.aplStats,C=_.curStats;N.pathData&&(u.semIndex!==2||u.lineOffset)&&(m=N.pathData.reduce(function(P,Y){var R,D=Y.values;switch(Y.type){case"M":z={x:D[0],y:D[1]};break;case"L":R={x:D[0],y:D[1]},z&&(P+=Bn(z,R)),z=R;break;case"C":R={x:D[4],y:D[5]},z&&(P+=Ii(z,{x:D[0],y:D[1]},{x:D[2],y:D[3]},R)),z=R}return P},0),A=u.semIndex===0?0:u.semIndex===1?m:m/2,u.semIndex!==2&&(x=Math.max(C.attach_plugBackLenSE[u.semIndex]||0,C.line_strokeWidth/2)+u.strokeWidth/2+u.height/4,A=(A+=u.semIndex===0?x:-x)<0?0:m<A?m:A),u.lineOffset&&(A=(A+=u.lineOffset)<0?0:m<A?m:A),N.startOffset=A,bt(u,U,"startOffset",A)&&(u.elmOffset.startOffset.baseVal.value=A))},u.updateShow=function(_){n.captionLabel.updateShow(u,_)},pe&&(u.adjustEdge=function(_,m){u.bBox&&n.captionLabel.adjustEdge(m,u.bBox,u.strokeWidth/2)}),!0)},getOffsetPathData:function(u,g,_){var m,x,A=3,z=[];function N(U,C){return Math.abs(U.x-C.x)<A&&Math.abs(U.y-C.y)<A}return u.forEach(function(U){var C,P,Y,R,D,O,q,K,et,lt,it,j,L,V,F,mt,xt,pt,T,J,ct;U.length===2?(pt=U[0],T=U[1],J=g,ct=Math.atan2(pt.y-T.y,T.x-pt.x)+.5*Math.PI,C=[{x:pt.x+Math.cos(ct)*J,y:pt.y+Math.sin(ct)*J*-1},{x:T.x+Math.cos(ct)*J,y:T.y+Math.sin(ct)*J*-1}],m?(Y=m.points,0<=(R=Math.atan2(Y[1].y-Y[0].y,Y[0].x-Y[1].x)-Math.atan2(U[0].y-U[1].y,U[1].x-U[0].x))&&R<=Math.PI?P={type:"line",points:C,inside:!0}:(O=Ps(Y[0],Y[1],g),D=Ps(C[1],C[0],g),K=Y[0],lt=D,it=C[1],j=(et=O).x-K.x,L=et.y-K.y,V=it.x-lt.x,F=it.y-lt.y,mt=(-L*(K.x-lt.x)+j*(K.y-lt.y))/(-V*L+j*F),xt=(V*(K.y-lt.y)-F*(K.x-lt.x))/(-V*L+j*F),(q=0<=mt&&mt<=1&&0<=xt&&xt<=1?{x:K.x+xt*j,y:K.y+xt*L}:null)?P={type:"line",points:[Y[1]=q,C[1]]}:(Y[1]=N(D,O)?D:O,P={type:"line",points:[D,C[1]]}),m.len=Bn(Y[0],Y[1]))):P={type:"line",points:C},P.len=Bn(P.points[0],P.points[1]),z.push(m=P)):(z.push({type:"cubic",points:function(Ct,It,gt,W,$t,ve){for(var Dt,jt,Ce=Ii(Ct,It,gt,W)/ve,Te=1/(ve<$t?Ce*($t/ve):Ce),ye=[],cn=0;jt=(90-(Dt=Ti(Ct,It,gt,W,cn)).angle)*(Math.PI/180),ye.push({x:Dt.x+Math.cos(jt)*$t,y:Dt.y+Math.sin(jt)*$t*-1}),!(1<=cn);)1<(cn+=Te)&&(cn=1);return ye}(U[0],U[1],U[2],U[3],g,16)}),m=null)}),m=null,z.forEach(function(U){var C;U.type==="line"?(U.inside&&(m.len>g?((C=m.points)[1]=Ps(C[0],C[1],-g),m.len=Bn(C[0],C[1])):(m.points=null,m.len=0),U.len>g+_?((C=U.points)[0]=Ps(C[1],C[0],-(g+_)),U.len=Bn(C[0],C[1])):(U.points=null,U.len=0)),m=U):m=null}),z.reduce(function(U,C){var P=C.points;return P&&(x&&N(P[0],x)||U.push({type:"M",values:[P[0].x,P[0].y]}),C.type==="line"?U.push({type:"L",values:[P[1].x,P[1].y]}):(P.shift(),P.forEach(function(Y){U.push({type:"L",values:[Y.x,Y.y]})})),x=P[P.length-1]),U},[])},newText:function(u,g,_,m){var x,A,z,N,U,C,P,Y,R,D;return(N=(z=g.createElementNS(Mt,"defs")).appendChild(g.createElementNS(Mt,"path"))).id=x=_+"-path",(C=(U=g.createElementNS(Mt,"text")).appendChild(g.createElementNS(Mt,"textPath"))).href.baseVal="#"+x,C.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),C.textContent=u,typeof f!="boolean"&&(f="paintOrder"in U.style),m&&!f?(U.id=A=_+"-text",z.appendChild(U),(R=(P=g.createElementNS(Mt,"g")).appendChild(g.createElementNS(Mt,"use"))).href.baseVal="#"+A,(Y=P.appendChild(g.createElementNS(Mt,"use"))).href.baseVal="#"+A,(D=R.style).strokeLinejoin="round",{elmPosition:U,elmPath:N,elmOffset:C,styleText:U.style,styleFill:Y.style,styleStroke:D,styleShow:P.style,elmsAppend:[z,P]}):(D=U.style,m&&(D.strokeLinejoin="round",D.paintOrder="stroke"),{elmPosition:U,elmPath:N,elmOffset:C,styleText:D,styleFill:D,styleStroke:m?D:null,styleShow:D,elmsAppend:[z,U]})},initSvg:function(u,g){var _,m,x=n.pathLabel.newText(u.text,g.baseWindow.document,S+"-pathLabel-"+u._id,u.outlineColor);["elmPosition","elmPath","elmOffset","styleFill","styleShow","elmsAppend"].forEach(function(A){u[A]=x[A]}),u.isShown=!1,u.styleShow.visibility="hidden",n.captionLabel.textStyleProps.forEach(function(A){u[A]!=null&&(x.styleText[A]=u[A])}),x.elmsAppend.forEach(function(A){g.svg.appendChild(A)}),x.elmPath.setPathData([{type:"M",values:[0,100]},{type:"h",values:[100]}]),_=x.elmPosition.getBBox(),x.styleText.textAnchor=["start","end","middle"][u.semIndex],u.semIndex!==2||u.lineOffset||x.elmOffset.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,50),u.height=_.height,u.outlineColor&&(m=10<(m=_.height/9)?10:m<2?2:m,x.styleStroke.strokeWidth=m+"px",x.styleStroke.stroke=u.outlineColor),u.strokeWidth=m||0,Ke(u.aplStats,n.pathLabel.stats),u.updateColor(g),u.updatePath(g),u.updateStartOffset(g),pe&&Un(g,{}),u.updateShow(g)},bind:function(u,g){var _=g.props;return u.color||je(_,"cur_line_color",u.updateColor),je(_,"cur_line_strokeWidth",u.updatePath),je(_,"apl_path",u.updatePath),u.semIndex=g.optionName==="startLabel"?0:g.optionName==="endLabel"?1:2,(u.semIndex!==2||u.lineOffset)&&je(_,"cur_attach_plugBackLenSE",u.updateStartOffset),je(_,"svgShow",u.updateShow),pe&&je(_,"new_edge4viewBox",u.adjustEdge),n.pathLabel.initSvg(u,_),!0},unbind:function(u,g){var _=g.props;u.elmsAppend&&(u.elmsAppend.forEach(function(m){_.svg.removeChild(m)}),u.elmPosition=u.elmPath=u.elmOffset=u.styleFill=u.styleShow=u.elmsAppend=null),Ke(u.curStats,n.pathLabel.stats),Ke(u.aplStats,n.pathLabel.stats),u.color||ze(_,"cur_line_color",u.updateColor),ze(_,"cur_line_strokeWidth",u.updatePath),ze(_,"apl_path",u.updatePath),(u.semIndex!==2||u.lineOffset)&&ze(_,"cur_attach_plugBackLenSE",u.updateStartOffset),ze(_,"svgShow",u.updateShow),pe&&(ze(_,"new_edge4viewBox",u.adjustEdge),Un(_,{}))},removeOption:function(u,g){var _=g.props,m={};m[g.optionName]="",qs(_,m)},remove:function(u){u.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),u.boundTargets.forEach(function(g){n.pathLabel.unbind(u,g)}))}}},Object.keys(n).forEach(function(u){zn[u]=function(){return new r(n[u],Array.prototype.slice.call(arguments))}}),zn.positionByWindowResize=!0,window.addEventListener("resize",sr.add(function(){zn.positionByWindowResize&&Object.keys(ln).forEach(function(u){Un(ln[u],{position:!0})})}),!1),zn}();const Fg={setLine:function(e,t,n={}){return new Ng(e,t,n)},obj:Ng};function Jl(e){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jl(e)}var rC=/^\s+/,iC=/\s+$/;function Pt(e,t){if(e=e||"",t=t||{},e instanceof Pt)return e;if(!(this instanceof Pt))return new Pt(e,t);var n=sC(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Pt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),n,r,i,o,l,h;return n=t.r/255,r=t.g/255,i=t.b/255,n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?l=r/12.92:l=Math.pow((r+.055)/1.055,2.4),i<=.03928?h=i/12.92:h=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*l+.0722*h},setAlpha:function(t){return this._a=Lm(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=$g(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=$g(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=Vg(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=Vg(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return qg(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return cC(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Be(this._r,255)*100)+"%",g:Math.round(Be(this._g,255)*100)+"%",b:Math.round(Be(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Be(this._r,255)*100)+"%, "+Math.round(Be(this._g,255)*100)+"%, "+Math.round(Be(this._b,255)*100)+"%)":"rgba("+Math.round(Be(this._r,255)*100)+"%, "+Math.round(Be(this._g,255)*100)+"%, "+Math.round(Be(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:wC[qg(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var n="#"+Bg(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=Pt(t);r="#"+Bg(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(t){var n=!!t;t=t||this._format;var r=!1,i=this._a<1&&this._a>=0,o=!n&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Pt(this.toString())},_applyModification:function(t,n){var r=t.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(dC,arguments)},brighten:function(){return this._applyModification(pC,arguments)},darken:function(){return this._applyModification(gC,arguments)},desaturate:function(){return this._applyModification(uC,arguments)},saturate:function(){return this._applyModification(hC,arguments)},greyscale:function(){return this._applyModification(fC,arguments)},spin:function(){return this._applyModification(_C,arguments)},_applyCombination:function(t,n){return t.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(yC,arguments)},complement:function(){return this._applyCombination(mC,arguments)},monochromatic:function(){return this._applyCombination(bC,arguments)},splitcomplement:function(){return this._applyCombination(vC,arguments)},triad:function(){return this._applyCombination(Ug,[3])},tetrad:function(){return this._applyCombination(Ug,[4])}};Pt.fromRatio=function(e,t){if(Jl(e)=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=ta(e[r]));e=n}return Pt(e,t)};function sC(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,l=!1,h=!1;return typeof e=="string"&&(e=SC(e)),Jl(e)=="object"&&(gi(e.r)&&gi(e.g)&&gi(e.b)?(t=oC(e.r,e.g,e.b),l=!0,h=String(e.r).substr(-1)==="%"?"prgb":"rgb"):gi(e.h)&&gi(e.s)&&gi(e.v)?(r=ta(e.s),i=ta(e.v),t=lC(e.h,r,i),l=!0,h="hsv"):gi(e.h)&&gi(e.s)&&gi(e.l)&&(r=ta(e.s),o=ta(e.l),t=aC(e.h,r,o),l=!0,h="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=Lm(n),{ok:l,format:e.format||h,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function oC(e,t,n){return{r:Be(e,255)*255,g:Be(t,255)*255,b:Be(n,255)*255}}function Vg(e,t,n){e=Be(e,255),t=Be(t,255),n=Be(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,l,h=(r+i)/2;if(r==i)o=l=0;else{var f=r-i;switch(l=h>.5?f/(2-r-i):f/(r+i),r){case e:o=(t-n)/f+(t<n?6:0);break;case t:o=(n-e)/f+2;break;case n:o=(e-t)/f+4;break}o/=6}return{h:o,s:l,l:h}}function aC(e,t,n){var r,i,o;e=Be(e,360),t=Be(t,100),n=Be(n,100);function l(d,v,b){return b<0&&(b+=1),b>1&&(b-=1),b<1/6?d+(v-d)*6*b:b<1/2?v:b<2/3?d+(v-d)*(2/3-b)*6:d}if(t===0)r=i=o=n;else{var h=n<.5?n*(1+t):n+t-n*t,f=2*n-h;r=l(f,h,e+1/3),i=l(f,h,e),o=l(f,h,e-1/3)}return{r:r*255,g:i*255,b:o*255}}function $g(e,t,n){e=Be(e,255),t=Be(t,255),n=Be(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,l,h=r,f=r-i;if(l=r===0?0:f/r,r==i)o=0;else{switch(r){case e:o=(t-n)/f+(t<n?6:0);break;case t:o=(n-e)/f+2;break;case n:o=(e-t)/f+4;break}o/=6}return{h:o,s:l,v:h}}function lC(e,t,n){e=Be(e,360)*6,t=Be(t,100),n=Be(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),l=n*(1-i*t),h=n*(1-(1-i)*t),f=r%6,d=[n,l,o,o,h,n][f],v=[h,n,n,l,o,o][f],b=[o,o,h,n,n,l][f];return{r:d*255,g:v*255,b:b*255}}function qg(e,t,n,r){var i=[$r(Math.round(e).toString(16)),$r(Math.round(t).toString(16)),$r(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function cC(e,t,n,r,i){var o=[$r(Math.round(e).toString(16)),$r(Math.round(t).toString(16)),$r(Math.round(n).toString(16)),$r(Nm(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Bg(e,t,n,r){var i=[$r(Nm(r)),$r(Math.round(e).toString(16)),$r(Math.round(t).toString(16)),$r(Math.round(n).toString(16))];return i.join("")}Pt.equals=function(e,t){return!e||!t?!1:Pt(e).toRgbString()==Pt(t).toRgbString()};Pt.random=function(){return Pt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function uC(e,t){t=t===0?0:t||10;var n=Pt(e).toHsl();return n.s-=t/100,n.s=Cc(n.s),Pt(n)}function hC(e,t){t=t===0?0:t||10;var n=Pt(e).toHsl();return n.s+=t/100,n.s=Cc(n.s),Pt(n)}function fC(e){return Pt(e).desaturate(100)}function dC(e,t){t=t===0?0:t||10;var n=Pt(e).toHsl();return n.l+=t/100,n.l=Cc(n.l),Pt(n)}function pC(e,t){t=t===0?0:t||10;var n=Pt(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),Pt(n)}function gC(e,t){t=t===0?0:t||10;var n=Pt(e).toHsl();return n.l-=t/100,n.l=Cc(n.l),Pt(n)}function _C(e,t){var n=Pt(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,Pt(n)}function mC(e){var t=Pt(e).toHsl();return t.h=(t.h+180)%360,Pt(t)}function Ug(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Pt(e).toHsl(),r=[Pt(e)],i=360/t,o=1;o<t;o++)r.push(Pt({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function vC(e){var t=Pt(e).toHsl(),n=t.h;return[Pt(e),Pt({h:(n+72)%360,s:t.s,l:t.l}),Pt({h:(n+216)%360,s:t.s,l:t.l})]}function yC(e,t,n){t=t||6,n=n||30;var r=Pt(e).toHsl(),i=360/n,o=[Pt(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(Pt(r));return o}function bC(e,t){t=t||6;for(var n=Pt(e).toHsv(),r=n.h,i=n.s,o=n.v,l=[],h=1/t;t--;)l.push(Pt({h:r,s:i,v:o})),o=(o+h)%1;return l}Pt.mix=function(e,t,n){n=n===0?0:n||50;var r=Pt(e).toRgb(),i=Pt(t).toRgb(),o=n/100,l={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return Pt(l)};Pt.readability=function(e,t){var n=Pt(e),r=Pt(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};Pt.isReadable=function(e,t,n){var r=Pt.readability(e,t),i,o;switch(o=!1,i=kC(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=r>=4.5;break;case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7;break}return o};Pt.mostReadable=function(e,t,n){var r=null,i=0,o,l,h,f;n=n||{},l=n.includeFallbackColors,h=n.level,f=n.size;for(var d=0;d<t.length;d++)o=Pt.readability(e,t[d]),o>i&&(i=o,r=Pt(t[d]));return Pt.isReadable(e,r,{level:h,size:f})||!l?r:(n.includeFallbackColors=!1,Pt.mostReadable(e,["#fff","#000"],n))};var Zh=Pt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},wC=Pt.hexNames=xC(Zh);function xC(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Lm(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Be(e,t){EC(e)&&(e="100%");var n=AC(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Cc(e){return Math.min(1,Math.max(0,e))}function fr(e){return parseInt(e,16)}function EC(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function AC(e){return typeof e=="string"&&e.indexOf("%")!=-1}function $r(e){return e.length==1?"0"+e:""+e}function ta(e){return e<=1&&(e=e*100+"%"),e}function Nm(e){return Math.round(parseFloat(e)*255).toString(16)}function zg(e){return fr(e)/255}var Fr=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function gi(e){return!!Fr.CSS_UNIT.exec(e)}function SC(e){e=e.replace(rC,"").replace(iC,"").toLowerCase();var t=!1;if(Zh[e])e=Zh[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Fr.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=Fr.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Fr.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Fr.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Fr.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Fr.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Fr.hex8.exec(e))?{r:fr(n[1]),g:fr(n[2]),b:fr(n[3]),a:zg(n[4]),format:t?"name":"hex8"}:(n=Fr.hex6.exec(e))?{r:fr(n[1]),g:fr(n[2]),b:fr(n[3]),format:t?"name":"hex"}:(n=Fr.hex4.exec(e))?{r:fr(n[1]+""+n[1]),g:fr(n[2]+""+n[2]),b:fr(n[3]+""+n[3]),a:zg(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=Fr.hex3.exec(e))?{r:fr(n[1]+""+n[1]),g:fr(n[2]+""+n[2]),b:fr(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function kC(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}const CC={props:["hits_data","set_hits_data","current_hit","edits_dict","set_edits_dict","editor_open","set_editor_state","refresh_interface_edit","annotating_edit_span_category_id","set_annotating_edit_span_category_id","annotating_edit_span","set_annotating_edit_span","lines","set_lines","config"],data(){return{edits_html:"",line_locked:!1}},watch:{current_hit(){$(`#circle-${this.current_hit}`).addClass("circle-active"),this.process_edits_html(),this.draw_lines()},hits_data(){this.process_edits_html(),this.draw_lines()},edits_dict(){this.draw_lines()}},methods:{annotate_edit(e){const t=this.hits_data[this.current_hit-1].source,n=this.hits_data[this.current_hit-1].target,r=this.edits_dict,i=e.target.dataset.category,o=e.target.dataset.id,l=parseInt(e.target.dataset.id.split("-")[1]);if($(".child-question").hide(),this.editor_open){$(`.quality-selection[data-category=${i}]`).hide(300),this.refresh_interface_edit();return}else $(".quality-selection").hide(300),$(`.quality-selection[data-category=${i}]`).slideDown(300),$(e.target).addClass(`txt-${i}`),this.set_editor_state(!this.editor_open);$(`.${i}[data-id=${o}]`).removeClass(`border-${i}-light`).addClass(`white border-${i} bg-${i}`);let h=r.find(function(f){return f.category===i&&f.id===l});if(this.getEditConfig(i).multi_span){let f=h.input_idx,d="";for(let b=0;b<f.length;b++)b!=0&&(d+=`<span class="edit-type txt-${i} f3"> and </span>`),d+=`<span class="pa1 edit-text br-pill-ns txt-${i} border-${i}-all ${i}_below">
                        &nbsp${t.substring(f[b][0],f[b][1])}&nbsp</span>`;this.set_annotating_edit_span(d,"source");let v=h.output_idx;d="";for(let b=0;b<v.length;b++)b!=0&&(d+=`<span class="edit-type txt-${i} f3"> and </span>`),d+=`<span class="pa1 edit-text br-pill-ns txt-${i} border-${i}-all ${i}_below">
                        &nbsp${n.substring(v[b][0],v[b][1])}&nbsp</span>`;this.set_annotating_edit_span(d,"target")}else if(this.getEditConfig(i).type=="composite"){let f="",d="";f+=`<span class="edit-type txt-${i}${d} f3"> (</span>`;for(let v=0;v<h.constituent_edits.length;v++){const b=h.constituent_edits[v],k=b.category;f+=this.render_edit_text(b,l,k,d),v==h.constituent_edits.length-1?f+=`<span class="edit-type txt-${i}${d} f3"> )</span>`:f+=`<span class="edit-type txt-${i}${d} f3"> , </span>`}this.set_annotating_edit_span(f,"composite")}else{if(h.hasOwnProperty("input_idx")){let f=h.input_idx[0],d="";d+=`<span class="pa1 edit-text br-pill-ns txt-${i} border-${i}-all ${i}_below">
                        &nbsp${t.substring(f[0],f[1])}&nbsp</span>`,this.set_annotating_edit_span(d,"source")}if(h.hasOwnProperty("output_idx")){let f=h.output_idx[0],d="";d+=`<span class="pa1 edit-text br-pill-ns txt-${i} border-${i}-all ${i}_below">
                        &nbsp${n.substring(f[0],f[1])}&nbsp</span>`,this.set_annotating_edit_span(d,"target")}}this.set_annotating_edit_span_category_id(l)},trash_edit(e){const t=parseInt(e.target.dataset.id.split("-")[1]),n=e.target.dataset.category,r=this.hits_data[this.current_hit-1].edits;let i=[];for(const l of r)l.id==t&&l.category==n||i.push(l);let o=tn.cloneDeep(this.hits_data);o[this.current_hit-1].edits=i,this.set_hits_data(o)},hasAnnotation(e){return e.annotation!=null||this.config.disable&&Object.values(this.config.disable).includes("annotation")},getEditConfig(e){return this.config.hasOwnProperty("edits")?this.config.edits.find(function(t){return t.name===e}):{}},getAnnotationHtml(e,t){if(t==null)return"";let n="";for(let r of e){let i=r.name,o=r.label?r.label:i;if(o=o.replace("grammar_error","G"),!!r.hasOwnProperty("options"))if(r.options=="binary")t[i]=="yes"&&(n+=` <span class="brown ba bw1 pa1 br-pills mr2">${o}</span>`);else if(r.options=="likert-3"){if(t[i]!=null){let l=Lg[t[i]]?Lg[t[i]]:"black";n+=`<span class="${l} br-pills ba bw1 pa1">${o}: ${t[i]}</span>`}}else if(r.options=="textarea"||r.options=="textbox")t[i]!=null&&(n+=`<span class="green br-pills ba bw1 pa1 mr2">${o}: ${t[i]}</span>`);else{if(!t[i])continue;let l=t[i].val;if(l!=null&&l!=""){n+="";let h=r.options.find(f=>f.name===l);h=h.label?h.label:l,n+=`<span class="light-purple ba bw1 pa1 mr2">${h}</span>`,r.hasOwnProperty("options")&&(n+=this.getAnnotationHtml(r.options,t[i]))}}}return n},render_edit_text(e,t,n,r){const i=this.getEditConfig(n),o=i.label?i.label:n;let l="";if(l+=`
                <span data-id="${n}-${t}" data-category="${n}" class="default_cursor" @mouseover="hover_span" @mouseout="un_hover_span">
                    <span class="edit-type txt-${n}${r} f3">${o} </span>`,!e.hasOwnProperty("input_idx")&&!e.hasOwnProperty("output_idx"))return l;if(i.type=="multi_span"){if(e.hasOwnProperty("input_idx")){let h=e.input_idx;for(let f=0;f<h.length;f++){let d=h[f];f!=0&&(l+=`<span class="edit-type txt-${n}${r} f3"> and </span>`),l+=`
                            <span class="pa1 edit-text br-pill-ns txt-${n}${r} border-${n}${r}-all ${n}_below" data-id="${n}-${t}" data-category="${n}">
                                &nbsp${this.hits_data[this.current_hit-1].source.substring(d[0],d[1])}&nbsp</span>`}}if(e.hasOwnProperty("input_idx")&&e.hasOwnProperty("output_idx")&&(l+=`<span class="edit-type txt-${n}${r} f3"> with </span>`),e.hasOwnProperty("output_idx")){let h=e.output_idx;for(let f=0;f<h.length;f++){let d=h[f];f!=0&&(l+=`<span class="edit-type txt-${n}${r} f3"> and </span>`),l+=`
                            <span class="pa1 edit-text br-pill-ns txt-${n}${r} border-${n}${r}-all ${n}_below" data-id="${n}-${t}" data-category="${n}">
                                &nbsp${this.hits_data[this.current_hit-1].target.substring(d[0],d[1])}&nbsp</span>`}}}else if(l+=`
                <span class="pa1 edit-text br-pill-ns txt-${n}${r} border-${n}${r}-all ${n}_below" data-id="${n}-${t}" data-category="${n}">`,e.hasOwnProperty("input_idx")){let h=e.input_idx[0];l+=`
                        &nbsp${this.hits_data[this.current_hit-1].source.substring(h[0],h[1])}&nbsp</span>`}else if(e.hasOwnProperty("output_idx")){let h=e.output_idx[0];l+=`
                        &nbsp${this.hits_data[this.current_hit-1].target.substring(h[0],h[1])}&nbsp</span>`}return l},process_edits_html(){let e="",t=tn.cloneDeep(this.hits_data[this.current_hit-1].edits);const n=r=>r?Math.min(...r.map(i=>i[0])):1/0;t.sort((r,i)=>{const o=Math.min(n(r.input_idx),n(r.output_idx)),l=Math.min(n(i.input_idx),n(i.output_idx));return o-l});for(let r of t){let i=r.id,o=r.category,l=this.hasAnnotation(r)?"":"-light";e+=`
                    <div class='cf'>
                        <div class="fl w-80 edit">`;const h=this.getEditConfig(o),f=h.label?h.label:o;if(h.type=="composite"){const v=this.getEditConfig(o).icon;e+=`
                        <span data-id="${o}-${i}" data-category="${o}" class="default_cursor" @mouseover="hover_span" @mouseout="un_hover_span">
                            <span class="edit-type txt-${o}${l} f3">${f} </span>
                            <span class="pa1 edit-text br-pill-ns txt-${o}${l} border-${o}${l}-all ${o}_below" data-id="${o}-${i}" data-category="${o}">
                                &nbsp<i class="fa-solid ${v}"></i>&nbsp</span>
                                <span class="edit-type txt-${o}${l} f3"> (</span>`;for(let b=0;b<r.constituent_edits.length;b++){const k=r.constituent_edits[b],S=k.category;e+=this.render_edit_text(k,i,S,l),e+="</span>",b!=r.constituent_edits.length-1?e+=`<span class="edit-type txt-${o}${l} f3"> , </span>`:e+=`<span class="edit-type txt-${o}${l} f3"> )</span>`}}else e+=this.render_edit_text(r,i,o,l);if((!this.config.disable||!Object.values(this.config.disable).includes("annotation"))&&(e+=" : "),!this.hasAnnotation(r))(!this.config.disable||!Object.values(this.config.disable).includes("annotation"))&&(e+=`
                            <span class="f4 i black-60">${this.config.interface_text.annotation_viewer.not_annotated_text_1} <i class="fa-solid fa-pencil"></i> ${this.config.interface_text.annotation_viewer.not_annotated_text_2}</span>
                        `);else{const v=this.getEditConfig(o);let b=this.getAnnotationHtml(v.annotation,r.annotation);e+=`<span class="f4 i">${b}</span>`}let d="";this.config.disable&&Object.values(this.config.disable).includes("annotation")&&(d="disabled"),e+=`
                        </span>
                    </div>
                    <div class="fl w-20 mb4 operation tr">
                        <i @click="annotate_edit" class="annotation-icon fa-solid fa-pencil mr3 pointer dim ${d}" data-id="${o}-${i}" data-category="${o}"></i>
                        <i @click="trash_edit" class="fa-solid fa-trash-can ml4 pointer dim" data-id="${o}-${i}" data-category="${o}"></i>
                    </div>
                </div>`}this.set_edits_dict(t),this.edits_html=e},clear_lines:function(){const e=[].concat(...Object.values(this.lines).map(t=>Object.values(t)));for(let t of e)if(t instanceof Array)Object.values(t).forEach(n=>{try{n.remove()}catch(r){console.warn(r)}});else try{t.remove()}catch(n){console.warn(n)}$(".leader-line").remove()},draw_lines:function(){if(this.line_locked||!this.config.hasOwnProperty("edits"))return;this.line_locked=!0;try{this.clear_lines()}catch(n){console.warn(n)}let e=Object.fromEntries(this.config.edits.map(n=>[n.name,{}])),t=tn.cloneDeep(this.hits_data[this.current_hit-1].edits);for(let n of t){let r=n.id,i=n.category;const o=this.getEditConfig(i),l={endPlug:"behind",size:3,path:"straight"};let h=o.color;Zl.hasOwnProperty(h)&&(h=Zl[h]),this.hasAnnotation(n)||(h=Pt(h).lighten(25).toHexString()),l.color=h;try{if(o.type=="composite")for(let f of n.constituent_edits){e[i][r]=[];const d=f.id,v=f.category,b=this.getEditConfig(v);b.enable_input&&b.enable_output&&e[i][r].push(Fg.setLine($(`.${i}.source_span[data-id='${i}-${r}'][data-childcategory=${v}][data-childid=${d}]`)[0],$(`.${i}.target_span[data-id='${i}-${r}'][data-childcategory=${v}][data-childid=${d}]`)[0],l))}else o.enable_input&&o.enable_output&&($(`.${i}.source_span`)[0]==null&&console.warn("Something went wrong!"),e[i][r]=Fg.setLine($(`.${i}.source_span[data-id='${i}-${r}']`)[0],$(`.${i}.target_span[data-id='${i}-${r}']`)[0],l))}catch(f){console.warn(f)}}this.set_lines(e),this.line_locked=!1},reposition_lines(){const e=[].concat(...Object.values(this.lines).map(t=>Object.values(t)));for(let t of e)if(t instanceof Array)Object.values(t).forEach(n=>{try{n.position()}catch(r){console.warn(r)}});else try{t.position()}catch(n){console.warn(n)}},hover_span(){},un_hover_span(){}},computed:{get_edits_html(){return{template:`<div id="edits_html" class="f4 lh-paras">${this.edits_html}</div>`,methods:{annotate_edit:this.annotate_edit,trash_edit:this.trash_edit,hover_span:this.hover_span,un_hover_span:this.un_hover_span}}}},created(){$(window).on("resize",this.reposition_lines),$("#sandbox").length&&($("#sandbox").on("scroll",this.reposition_lines),$("#sandbox").on("resize",this.reposition_lines),new ResizeObserver(t=>{for(const n of t)n.target.id==="sandbox"&&this.reposition_lines()}).observe(document.getElementById("sandbox")))}},TC=Object.assign(CC,{__name:"EditList",setup(e){return(t,n)=>(Ft(),Rf(Df(t.get_edits_html)))}}),IC={class:"mt1 cf"},RC={class:"fl w-80"},DC={class:"f3 annotation-label ttu"},OC={key:0},PC={key:1},MC={class:"fl w-20 tr"},LC=ot("i",{class:"fa-solid fa-plus fa-1-5x icon-default pointer mr2"},null,-1),NC={class:"f4"},FC={id:"hits-data",class:"mt1 dn"},VC={props:["hits_data","set_hits_data","current_hit","edits_dict","set_edits_dict","editor_open","set_editor_state","refresh_interface_edit","annotating_edit_span_category_id","set_annotating_edit_span_category_id","annotating_edit_span","set_annotating_edit_span","lines","set_lines","config"],data(){return{}},methods:{add_an_edit(){this.editor_open?($("#add_an_edit").slideUp(300),$(".add_button .icon-default").removeClass("open")):($("#add_an_edit").slideDown(300),$(".add_button .icon-default").addClass("open")),this.set_editor_state(!this.editor_open)}},computed:{annotated_edits(){if(this.hits_data==null)return 0;let e=this.hits_data[this.current_hit-1].edits;if(e==null)return 0;var t=0;return e.forEach(function(n){n.hasOwnProperty("annotation")&&n.annotation!==null&&t++}),t},total_edits(){if(this.hits_data==null)return 0;let e=this.hits_data[this.current_hit-1].edits;return e==null?0:e.length}}},$C=Object.assign(VC,{__name:"AnnotationViewer",setup(e){return(t,n)=>(Ft(),zt("section",null,[ot("div",IC,[ot("div",RC,[ot("p",DC,[fn(Ut(e.config.interface_text.annotation_viewer.header)+" (",1),!e.config.disable||!Object.values(e.config.disable).includes("annotation")?(Ft(),zt("span",OC,Ut(t.annotated_edits)+"/"+Ut(t.total_edits),1)):Ae("",!0),e.config.disable&&Object.values(e.config.disable).includes("annotation")?(Ft(),zt("span",PC,Ut(t.total_edits),1)):Ae("",!0),fn(")")])]),ot("div",MC,[ot("p",{onClick:n[0]||(n[0]=(...r)=>t.add_an_edit&&t.add_an_edit(...r)),class:Re(["add_button pa2 br-pill-ns ba bw1 grow",{disabled:e.config.disable&&Object.values(e.config.disable).includes("selection")}])},[LC,ot("span",NC,Ut(e.config.interface_text.buttons.add_edit_label),1)],2)])]),ot("div",null,[er(TC,mi(t.$props,{config:e.config}),null,16,["config"])]),ot("div",FC,Ut(e.hits_data),1)]))}});var me={};const qC="Á",BC="á",UC="Ă",zC="ă",HC="∾",GC="∿",WC="∾̳",jC="Â",KC="â",YC="´",QC="А",ZC="а",XC="Æ",JC="æ",t2="⁡",e2="𝔄",n2="𝔞",r2="À",i2="à",s2="ℵ",o2="ℵ",a2="Α",l2="α",c2="Ā",u2="ā",h2="⨿",f2="&",d2="&",p2="⩕",g2="⩓",_2="∧",m2="⩜",v2="⩘",y2="⩚",b2="∠",w2="⦤",x2="∠",E2="⦨",A2="⦩",S2="⦪",k2="⦫",C2="⦬",T2="⦭",I2="⦮",R2="⦯",D2="∡",O2="∟",P2="⊾",M2="⦝",L2="∢",N2="Å",F2="⍼",V2="Ą",$2="ą",q2="𝔸",B2="𝕒",U2="⩯",z2="≈",H2="⩰",G2="≊",W2="≋",j2="'",K2="⁡",Y2="≈",Q2="≊",Z2="Å",X2="å",J2="𝒜",tT="𝒶",eT="≔",nT="*",rT="≈",iT="≍",sT="Ã",oT="ã",aT="Ä",lT="ä",cT="∳",uT="⨑",hT="≌",fT="϶",dT="‵",pT="∽",gT="⋍",_T="∖",mT="⫧",vT="⊽",yT="⌅",bT="⌆",wT="⌅",xT="⎵",ET="⎶",AT="≌",ST="Б",kT="б",CT="„",TT="∵",IT="∵",RT="∵",DT="⦰",OT="϶",PT="ℬ",MT="ℬ",LT="Β",NT="β",FT="ℶ",VT="≬",$T="𝔅",qT="𝔟",BT="⋂",UT="◯",zT="⋃",HT="⨀",GT="⨁",WT="⨂",jT="⨆",KT="★",YT="▽",QT="△",ZT="⨄",XT="⋁",JT="⋀",tI="⤍",eI="⧫",nI="▪",rI="▴",iI="▾",sI="◂",oI="▸",aI="␣",lI="▒",cI="░",uI="▓",hI="█",fI="=⃥",dI="≡⃥",pI="⫭",gI="⌐",_I="𝔹",mI="𝕓",vI="⊥",yI="⊥",bI="⋈",wI="⧉",xI="┐",EI="╕",AI="╖",SI="╗",kI="┌",CI="╒",TI="╓",II="╔",RI="─",DI="═",OI="┬",PI="╤",MI="╥",LI="╦",NI="┴",FI="╧",VI="╨",$I="╩",qI="⊟",BI="⊞",UI="⊠",zI="┘",HI="╛",GI="╜",WI="╝",jI="└",KI="╘",YI="╙",QI="╚",ZI="│",XI="║",JI="┼",tR="╪",eR="╫",nR="╬",rR="┤",iR="╡",sR="╢",oR="╣",aR="├",lR="╞",cR="╟",uR="╠",hR="‵",fR="˘",dR="˘",pR="¦",gR="𝒷",_R="ℬ",mR="⁏",vR="∽",yR="⋍",bR="⧅",wR="\\",xR="⟈",ER="•",AR="•",SR="≎",kR="⪮",CR="≏",TR="≎",IR="≏",RR="Ć",DR="ć",OR="⩄",PR="⩉",MR="⩋",LR="∩",NR="⋒",FR="⩇",VR="⩀",$R="ⅅ",qR="∩︀",BR="⁁",UR="ˇ",zR="ℭ",HR="⩍",GR="Č",WR="č",jR="Ç",KR="ç",YR="Ĉ",QR="ĉ",ZR="∰",XR="⩌",JR="⩐",tD="Ċ",eD="ċ",nD="¸",rD="¸",iD="⦲",sD="¢",oD="·",aD="·",lD="𝔠",cD="ℭ",uD="Ч",hD="ч",fD="✓",dD="✓",pD="Χ",gD="χ",_D="ˆ",mD="≗",vD="↺",yD="↻",bD="⊛",wD="⊚",xD="⊝",ED="⊙",AD="®",SD="Ⓢ",kD="⊖",CD="⊕",TD="⊗",ID="○",RD="⧃",DD="≗",OD="⨐",PD="⫯",MD="⧂",LD="∲",ND="”",FD="’",VD="♣",$D="♣",qD=":",BD="∷",UD="⩴",zD="≔",HD="≔",GD=",",WD="@",jD="∁",KD="∘",YD="∁",QD="ℂ",ZD="≅",XD="⩭",JD="≡",tO="∮",eO="∯",nO="∮",rO="𝕔",iO="ℂ",sO="∐",oO="∐",aO="©",lO="©",cO="℗",uO="∳",hO="↵",fO="✗",dO="⨯",pO="𝒞",gO="𝒸",_O="⫏",mO="⫑",vO="⫐",yO="⫒",bO="⋯",wO="⤸",xO="⤵",EO="⋞",AO="⋟",SO="↶",kO="⤽",CO="⩈",TO="⩆",IO="≍",RO="∪",DO="⋓",OO="⩊",PO="⊍",MO="⩅",LO="∪︀",NO="↷",FO="⤼",VO="⋞",$O="⋟",qO="⋎",BO="⋏",UO="¤",zO="↶",HO="↷",GO="⋎",WO="⋏",jO="∲",KO="∱",YO="⌭",QO="†",ZO="‡",XO="ℸ",JO="↓",tP="↡",eP="⇓",nP="‐",rP="⫤",iP="⊣",sP="⤏",oP="˝",aP="Ď",lP="ď",cP="Д",uP="д",hP="‡",fP="⇊",dP="ⅅ",pP="ⅆ",gP="⤑",_P="⩷",mP="°",vP="∇",yP="Δ",bP="δ",wP="⦱",xP="⥿",EP="𝔇",AP="𝔡",SP="⥥",kP="⇃",CP="⇂",TP="´",IP="˙",RP="˝",DP="`",OP="˜",PP="⋄",MP="⋄",LP="⋄",NP="♦",FP="♦",VP="¨",$P="ⅆ",qP="ϝ",BP="⋲",UP="÷",zP="÷",HP="⋇",GP="⋇",WP="Ђ",jP="ђ",KP="⌞",YP="⌍",QP="$",ZP="𝔻",XP="𝕕",JP="¨",tM="˙",eM="⃜",nM="≐",rM="≑",iM="≐",sM="∸",oM="∔",aM="⊡",lM="⌆",cM="∯",uM="¨",hM="⇓",fM="⇐",dM="⇔",pM="⫤",gM="⟸",_M="⟺",mM="⟹",vM="⇒",yM="⊨",bM="⇑",wM="⇕",xM="∥",EM="⤓",AM="↓",SM="↓",kM="⇓",CM="⇵",TM="̑",IM="⇊",RM="⇃",DM="⇂",OM="⥐",PM="⥞",MM="⥖",LM="↽",NM="⥟",FM="⥗",VM="⇁",$M="↧",qM="⊤",BM="⤐",UM="⌟",zM="⌌",HM="𝒟",GM="𝒹",WM="Ѕ",jM="ѕ",KM="⧶",YM="Đ",QM="đ",ZM="⋱",XM="▿",JM="▾",tL="⇵",eL="⥯",nL="⦦",rL="Џ",iL="џ",sL="⟿",oL="É",aL="é",lL="⩮",cL="Ě",uL="ě",hL="Ê",fL="ê",dL="≖",pL="≕",gL="Э",_L="э",mL="⩷",vL="Ė",yL="ė",bL="≑",wL="ⅇ",xL="≒",EL="𝔈",AL="𝔢",SL="⪚",kL="È",CL="è",TL="⪖",IL="⪘",RL="⪙",DL="∈",OL="⏧",PL="ℓ",ML="⪕",LL="⪗",NL="Ē",FL="ē",VL="∅",$L="∅",qL="◻",BL="∅",UL="▫",zL=" ",HL=" ",GL=" ",WL="Ŋ",jL="ŋ",KL=" ",YL="Ę",QL="ę",ZL="𝔼",XL="𝕖",JL="⋕",tN="⧣",eN="⩱",nN="ε",rN="Ε",iN="ε",sN="ϵ",oN="≖",aN="≕",lN="≂",cN="⪖",uN="⪕",hN="⩵",fN="=",dN="≂",pN="≟",gN="⇌",_N="≡",mN="⩸",vN="⧥",yN="⥱",bN="≓",wN="ℯ",xN="ℰ",EN="≐",AN="⩳",SN="≂",kN="Η",CN="η",TN="Ð",IN="ð",RN="Ë",DN="ë",ON="€",PN="!",MN="∃",LN="∃",NN="ℰ",FN="ⅇ",VN="ⅇ",$N="≒",qN="Ф",BN="ф",UN="♀",zN="ﬃ",HN="ﬀ",GN="ﬄ",WN="𝔉",jN="𝔣",KN="ﬁ",YN="◼",QN="▪",ZN="fj",XN="♭",JN="ﬂ",tF="▱",eF="ƒ",nF="𝔽",rF="𝕗",iF="∀",sF="∀",oF="⋔",aF="⫙",lF="ℱ",cF="⨍",uF="½",hF="⅓",fF="¼",dF="⅕",pF="⅙",gF="⅛",_F="⅔",mF="⅖",vF="¾",yF="⅗",bF="⅜",wF="⅘",xF="⅚",EF="⅝",AF="⅞",SF="⁄",kF="⌢",CF="𝒻",TF="ℱ",IF="ǵ",RF="Γ",DF="γ",OF="Ϝ",PF="ϝ",MF="⪆",LF="Ğ",NF="ğ",FF="Ģ",VF="Ĝ",$F="ĝ",qF="Г",BF="г",UF="Ġ",zF="ġ",HF="≥",GF="≧",WF="⪌",jF="⋛",KF="≥",YF="≧",QF="⩾",ZF="⪩",XF="⩾",JF="⪀",t3="⪂",e3="⪄",n3="⋛︀",r3="⪔",i3="𝔊",s3="𝔤",o3="≫",a3="⋙",l3="⋙",c3="ℷ",u3="Ѓ",h3="ѓ",f3="⪥",d3="≷",p3="⪒",g3="⪤",_3="⪊",m3="⪊",v3="⪈",y3="≩",b3="⪈",w3="≩",x3="⋧",E3="𝔾",A3="𝕘",S3="`",k3="≥",C3="⋛",T3="≧",I3="⪢",R3="≷",D3="⩾",O3="≳",P3="𝒢",M3="ℊ",L3="≳",N3="⪎",F3="⪐",V3="⪧",$3="⩺",q3=">",B3=">",U3="≫",z3="⋗",H3="⦕",G3="⩼",W3="⪆",j3="⥸",K3="⋗",Y3="⋛",Q3="⪌",Z3="≷",X3="≳",J3="≩︀",tV="≩︀",eV="ˇ",nV=" ",rV="½",iV="ℋ",sV="Ъ",oV="ъ",aV="⥈",lV="↔",cV="⇔",uV="↭",hV="^",fV="ℏ",dV="Ĥ",pV="ĥ",gV="♥",_V="♥",mV="…",vV="⊹",yV="𝔥",bV="ℌ",wV="ℋ",xV="⤥",EV="⤦",AV="⇿",SV="∻",kV="↩",CV="↪",TV="𝕙",IV="ℍ",RV="―",DV="─",OV="𝒽",PV="ℋ",MV="ℏ",LV="Ħ",NV="ħ",FV="≎",VV="≏",$V="⁃",qV="‐",BV="Í",UV="í",zV="⁣",HV="Î",GV="î",WV="И",jV="и",KV="İ",YV="Е",QV="е",ZV="¡",XV="⇔",JV="𝔦",t9="ℑ",e9="Ì",n9="ì",r9="ⅈ",i9="⨌",s9="∭",o9="⧜",a9="℩",l9="Ĳ",c9="ĳ",u9="Ī",h9="ī",f9="ℑ",d9="ⅈ",p9="ℐ",g9="ℑ",_9="ı",m9="ℑ",v9="⊷",y9="Ƶ",b9="⇒",w9="℅",x9="∞",E9="⧝",A9="ı",S9="⊺",k9="∫",C9="∬",T9="ℤ",I9="∫",R9="⊺",D9="⋂",O9="⨗",P9="⨼",M9="⁣",L9="⁢",N9="Ё",F9="ё",V9="Į",$9="į",q9="𝕀",B9="𝕚",U9="Ι",z9="ι",H9="⨼",G9="¿",W9="𝒾",j9="ℐ",K9="∈",Y9="⋵",Q9="⋹",Z9="⋴",X9="⋳",J9="∈",t4="⁢",e4="Ĩ",n4="ĩ",r4="І",i4="і",s4="Ï",o4="ï",a4="Ĵ",l4="ĵ",c4="Й",u4="й",h4="𝔍",f4="𝔧",d4="ȷ",p4="𝕁",g4="𝕛",_4="𝒥",m4="𝒿",v4="Ј",y4="ј",b4="Є",w4="є",x4="Κ",E4="κ",A4="ϰ",S4="Ķ",k4="ķ",C4="К",T4="к",I4="𝔎",R4="𝔨",D4="ĸ",O4="Х",P4="х",M4="Ќ",L4="ќ",N4="𝕂",F4="𝕜",V4="𝒦",$4="𝓀",q4="⇚",B4="Ĺ",U4="ĺ",z4="⦴",H4="ℒ",G4="Λ",W4="λ",j4="⟨",K4="⟪",Y4="⦑",Q4="⟨",Z4="⪅",X4="ℒ",J4="«",t$="⇤",e$="⤟",n$="←",r$="↞",i$="⇐",s$="⤝",o$="↩",a$="↫",l$="⤹",c$="⥳",u$="↢",h$="⤙",f$="⤛",d$="⪫",p$="⪭",g$="⪭︀",_$="⤌",m$="⤎",v$="❲",y$="{",b$="[",w$="⦋",x$="⦏",E$="⦍",A$="Ľ",S$="ľ",k$="Ļ",C$="ļ",T$="⌈",I$="{",R$="Л",D$="л",O$="⤶",P$="“",M$="„",L$="⥧",N$="⥋",F$="↲",V$="≤",$$="≦",q$="⟨",B$="⇤",U$="←",z$="←",H$="⇐",G$="⇆",W$="↢",j$="⌈",K$="⟦",Y$="⥡",Q$="⥙",Z$="⇃",X$="⌊",J$="↽",t5="↼",e5="⇇",n5="↔",r5="↔",i5="⇔",s5="⇆",o5="⇋",a5="↭",l5="⥎",c5="↤",u5="⊣",h5="⥚",f5="⋋",d5="⧏",p5="⊲",g5="⊴",_5="⥑",m5="⥠",v5="⥘",y5="↿",b5="⥒",w5="↼",x5="⪋",E5="⋚",A5="≤",S5="≦",k5="⩽",C5="⪨",T5="⩽",I5="⩿",R5="⪁",D5="⪃",O5="⋚︀",P5="⪓",M5="⪅",L5="⋖",N5="⋚",F5="⪋",V5="⋚",$5="≦",q5="≶",B5="≶",U5="⪡",z5="≲",H5="⩽",G5="≲",W5="⥼",j5="⌊",K5="𝔏",Y5="𝔩",Q5="≶",Z5="⪑",X5="⥢",J5="↽",tq="↼",eq="⥪",nq="▄",rq="Љ",iq="љ",sq="⇇",oq="≪",aq="⋘",lq="⌞",cq="⇚",uq="⥫",hq="◺",fq="Ŀ",dq="ŀ",pq="⎰",gq="⎰",_q="⪉",mq="⪉",vq="⪇",yq="≨",bq="⪇",wq="≨",xq="⋦",Eq="⟬",Aq="⇽",Sq="⟦",kq="⟵",Cq="⟵",Tq="⟸",Iq="⟷",Rq="⟷",Dq="⟺",Oq="⟼",Pq="⟶",Mq="⟶",Lq="⟹",Nq="↫",Fq="↬",Vq="⦅",$q="𝕃",qq="𝕝",Bq="⨭",Uq="⨴",zq="∗",Hq="_",Gq="↙",Wq="↘",jq="◊",Kq="◊",Yq="⧫",Qq="(",Zq="⦓",Xq="⇆",Jq="⌟",t6="⇋",e6="⥭",n6="‎",r6="⊿",i6="‹",s6="𝓁",o6="ℒ",a6="↰",l6="↰",c6="≲",u6="⪍",h6="⪏",f6="[",d6="‘",p6="‚",g6="Ł",_6="ł",m6="⪦",v6="⩹",y6="<",b6="<",w6="≪",x6="⋖",E6="⋋",A6="⋉",S6="⥶",k6="⩻",C6="◃",T6="⊴",I6="◂",R6="⦖",D6="⥊",O6="⥦",P6="≨︀",M6="≨︀",L6="¯",N6="♂",F6="✠",V6="✠",$6="↦",q6="↦",B6="↧",U6="↤",z6="↥",H6="▮",G6="⨩",W6="М",j6="м",K6="—",Y6="∺",Q6="∡",Z6=" ",X6="ℳ",J6="𝔐",tB="𝔪",eB="℧",nB="µ",rB="*",iB="⫰",sB="∣",oB="·",aB="⊟",lB="−",cB="∸",uB="⨪",hB="∓",fB="⫛",dB="…",pB="∓",gB="⊧",_B="𝕄",mB="𝕞",vB="∓",yB="𝓂",bB="ℳ",wB="∾",xB="Μ",EB="μ",AB="⊸",SB="⊸",kB="∇",CB="Ń",TB="ń",IB="∠⃒",RB="≉",DB="⩰̸",OB="≋̸",PB="ŉ",MB="≉",LB="♮",NB="ℕ",FB="♮",VB=" ",$B="≎̸",qB="≏̸",BB="⩃",UB="Ň",zB="ň",HB="Ņ",GB="ņ",WB="≇",jB="⩭̸",KB="⩂",YB="Н",QB="н",ZB="–",XB="⤤",JB="↗",tU="⇗",eU="↗",nU="≠",rU="≐̸",iU="​",sU="​",oU="​",aU="​",lU="≢",cU="⤨",uU="≂̸",hU="≫",fU="≪",dU=`
`,pU="∄",gU="∄",_U="𝔑",mU="𝔫",vU="≧̸",yU="≱",bU="≱",wU="≧̸",xU="⩾̸",EU="⩾̸",AU="⋙̸",SU="≵",kU="≫⃒",CU="≯",TU="≯",IU="≫̸",RU="↮",DU="⇎",OU="⫲",PU="∋",MU="⋼",LU="⋺",NU="∋",FU="Њ",VU="њ",$U="↚",qU="⇍",BU="‥",UU="≦̸",zU="≰",HU="↚",GU="⇍",WU="↮",jU="⇎",KU="≰",YU="≦̸",QU="⩽̸",ZU="⩽̸",XU="≮",JU="⋘̸",t8="≴",e8="≪⃒",n8="≮",r8="⋪",i8="⋬",s8="≪̸",o8="∤",a8="⁠",l8=" ",c8="𝕟",u8="ℕ",h8="⫬",f8="¬",d8="≢",p8="≭",g8="∦",_8="∉",m8="≠",v8="≂̸",y8="∄",b8="≯",w8="≱",x8="≧̸",E8="≫̸",A8="≹",S8="⩾̸",k8="≵",C8="≎̸",T8="≏̸",I8="∉",R8="⋵̸",D8="⋹̸",O8="∉",P8="⋷",M8="⋶",L8="⧏̸",N8="⋪",F8="⋬",V8="≮",$8="≰",q8="≸",B8="≪̸",U8="⩽̸",z8="≴",H8="⪢̸",G8="⪡̸",W8="∌",j8="∌",K8="⋾",Y8="⋽",Q8="⊀",Z8="⪯̸",X8="⋠",J8="∌",t7="⧐̸",e7="⋫",n7="⋭",r7="⊏̸",i7="⋢",s7="⊐̸",o7="⋣",a7="⊂⃒",l7="⊈",c7="⊁",u7="⪰̸",h7="⋡",f7="≿̸",d7="⊃⃒",p7="⊉",g7="≁",_7="≄",m7="≇",v7="≉",y7="∤",b7="∦",w7="∦",x7="⫽⃥",E7="∂̸",A7="⨔",S7="⊀",k7="⋠",C7="⊀",T7="⪯̸",I7="⪯̸",R7="⤳̸",D7="↛",O7="⇏",P7="↝̸",M7="↛",L7="⇏",N7="⋫",F7="⋭",V7="⊁",$7="⋡",q7="⪰̸",B7="𝒩",U7="𝓃",z7="∤",H7="∦",G7="≁",W7="≄",j7="≄",K7="∤",Y7="∦",Q7="⋢",Z7="⋣",X7="⊄",J7="⫅̸",tz="⊈",ez="⊂⃒",nz="⊈",rz="⫅̸",iz="⊁",sz="⪰̸",oz="⊅",az="⫆̸",lz="⊉",cz="⊃⃒",uz="⊉",hz="⫆̸",fz="≹",dz="Ñ",pz="ñ",gz="≸",_z="⋪",mz="⋬",vz="⋫",yz="⋭",bz="Ν",wz="ν",xz="#",Ez="№",Az=" ",Sz="≍⃒",kz="⊬",Cz="⊭",Tz="⊮",Iz="⊯",Rz="≥⃒",Dz=">⃒",Oz="⤄",Pz="⧞",Mz="⤂",Lz="≤⃒",Nz="<⃒",Fz="⊴⃒",Vz="⤃",$z="⊵⃒",qz="∼⃒",Bz="⤣",Uz="↖",zz="⇖",Hz="↖",Gz="⤧",Wz="Ó",jz="ó",Kz="⊛",Yz="Ô",Qz="ô",Zz="⊚",Xz="О",Jz="о",tH="⊝",eH="Ő",nH="ő",rH="⨸",iH="⊙",sH="⦼",oH="Œ",aH="œ",lH="⦿",cH="𝔒",uH="𝔬",hH="˛",fH="Ò",dH="ò",pH="⧁",gH="⦵",_H="Ω",mH="∮",vH="↺",yH="⦾",bH="⦻",wH="‾",xH="⧀",EH="Ō",AH="ō",SH="Ω",kH="ω",CH="Ο",TH="ο",IH="⦶",RH="⊖",DH="𝕆",OH="𝕠",PH="⦷",MH="“",LH="‘",NH="⦹",FH="⊕",VH="↻",$H="⩔",qH="∨",BH="⩝",UH="ℴ",zH="ℴ",HH="ª",GH="º",WH="⊶",jH="⩖",KH="⩗",YH="⩛",QH="Ⓢ",ZH="𝒪",XH="ℴ",JH="Ø",tG="ø",eG="⊘",nG="Õ",rG="õ",iG="⨶",sG="⨷",oG="⊗",aG="Ö",lG="ö",cG="⌽",uG="‾",hG="⏞",fG="⎴",dG="⏜",pG="¶",gG="∥",_G="∥",mG="⫳",vG="⫽",yG="∂",bG="∂",wG="П",xG="п",EG="%",AG=".",SG="‰",kG="⊥",CG="‱",TG="𝔓",IG="𝔭",RG="Φ",DG="φ",OG="ϕ",PG="ℳ",MG="☎",LG="Π",NG="π",FG="⋔",VG="ϖ",$G="ℏ",qG="ℎ",BG="ℏ",UG="⨣",zG="⊞",HG="⨢",GG="+",WG="∔",jG="⨥",KG="⩲",YG="±",QG="±",ZG="⨦",XG="⨧",JG="±",tW="ℌ",eW="⨕",nW="𝕡",rW="ℙ",iW="£",sW="⪷",oW="⪻",aW="≺",lW="≼",cW="⪷",uW="≺",hW="≼",fW="≺",dW="⪯",pW="≼",gW="≾",_W="⪯",mW="⪹",vW="⪵",yW="⋨",bW="⪯",wW="⪳",xW="≾",EW="′",AW="″",SW="ℙ",kW="⪹",CW="⪵",TW="⋨",IW="∏",RW="∏",DW="⌮",OW="⌒",PW="⌓",MW="∝",LW="∝",NW="∷",FW="∝",VW="≾",$W="⊰",qW="𝒫",BW="𝓅",UW="Ψ",zW="ψ",HW=" ",GW="𝔔",WW="𝔮",jW="⨌",KW="𝕢",YW="ℚ",QW="⁗",ZW="𝒬",XW="𝓆",JW="ℍ",tj="⨖",ej="?",nj="≟",rj='"',ij='"',sj="⇛",oj="∽̱",aj="Ŕ",lj="ŕ",cj="√",uj="⦳",hj="⟩",fj="⟫",dj="⦒",pj="⦥",gj="⟩",_j="»",mj="⥵",vj="⇥",yj="⤠",bj="⤳",wj="→",xj="↠",Ej="⇒",Aj="⤞",Sj="↪",kj="↬",Cj="⥅",Tj="⥴",Ij="⤖",Rj="↣",Dj="↝",Oj="⤚",Pj="⤜",Mj="∶",Lj="ℚ",Nj="⤍",Fj="⤏",Vj="⤐",$j="❳",qj="}",Bj="]",Uj="⦌",zj="⦎",Hj="⦐",Gj="Ř",Wj="ř",jj="Ŗ",Kj="ŗ",Yj="⌉",Qj="}",Zj="Р",Xj="р",Jj="⤷",tK="⥩",eK="”",nK="”",rK="↳",iK="ℜ",sK="ℛ",oK="ℜ",aK="ℝ",lK="ℜ",cK="▭",uK="®",hK="®",fK="∋",dK="⇋",pK="⥯",gK="⥽",_K="⌋",mK="𝔯",vK="ℜ",yK="⥤",bK="⇁",wK="⇀",xK="⥬",EK="Ρ",AK="ρ",SK="ϱ",kK="⟩",CK="⇥",TK="→",IK="→",RK="⇒",DK="⇄",OK="↣",PK="⌉",MK="⟧",LK="⥝",NK="⥕",FK="⇂",VK="⌋",$K="⇁",qK="⇀",BK="⇄",UK="⇌",zK="⇉",HK="↝",GK="↦",WK="⊢",jK="⥛",KK="⋌",YK="⧐",QK="⊳",ZK="⊵",XK="⥏",JK="⥜",tY="⥔",eY="↾",nY="⥓",rY="⇀",iY="˚",sY="≓",oY="⇄",aY="⇌",lY="‏",cY="⎱",uY="⎱",hY="⫮",fY="⟭",dY="⇾",pY="⟧",gY="⦆",_Y="𝕣",mY="ℝ",vY="⨮",yY="⨵",bY="⥰",wY=")",xY="⦔",EY="⨒",AY="⇉",SY="⇛",kY="›",CY="𝓇",TY="ℛ",IY="↱",RY="↱",DY="]",OY="’",PY="’",MY="⋌",LY="⋊",NY="▹",FY="⊵",VY="▸",$Y="⧎",qY="⧴",BY="⥨",UY="℞",zY="Ś",HY="ś",GY="‚",WY="⪸",jY="Š",KY="š",YY="⪼",QY="≻",ZY="≽",XY="⪰",JY="⪴",tQ="Ş",eQ="ş",nQ="Ŝ",rQ="ŝ",iQ="⪺",sQ="⪶",oQ="⋩",aQ="⨓",lQ="≿",cQ="С",uQ="с",hQ="⊡",fQ="⋅",dQ="⩦",pQ="⤥",gQ="↘",_Q="⇘",mQ="↘",vQ="§",yQ=";",bQ="⤩",wQ="∖",xQ="∖",EQ="✶",AQ="𝔖",SQ="𝔰",kQ="⌢",CQ="♯",TQ="Щ",IQ="щ",RQ="Ш",DQ="ш",OQ="↓",PQ="←",MQ="∣",LQ="∥",NQ="→",FQ="↑",VQ="­",$Q="Σ",qQ="σ",BQ="ς",UQ="ς",zQ="∼",HQ="⩪",GQ="≃",WQ="≃",jQ="⪞",KQ="⪠",YQ="⪝",QQ="⪟",ZQ="≆",XQ="⨤",JQ="⥲",tZ="←",eZ="∘",nZ="∖",rZ="⨳",iZ="⧤",sZ="∣",oZ="⌣",aZ="⪪",lZ="⪬",cZ="⪬︀",uZ="Ь",hZ="ь",fZ="⌿",dZ="⧄",pZ="/",gZ="𝕊",_Z="𝕤",mZ="♠",vZ="♠",yZ="∥",bZ="⊓",wZ="⊓︀",xZ="⊔",EZ="⊔︀",AZ="√",SZ="⊏",kZ="⊑",CZ="⊏",TZ="⊑",IZ="⊐",RZ="⊒",DZ="⊐",OZ="⊒",PZ="□",MZ="□",LZ="⊓",NZ="⊏",FZ="⊑",VZ="⊐",$Z="⊒",qZ="⊔",BZ="▪",UZ="□",zZ="▪",HZ="→",GZ="𝒮",WZ="𝓈",jZ="∖",KZ="⌣",YZ="⋆",QZ="⋆",ZZ="☆",XZ="★",JZ="ϵ",tX="ϕ",eX="¯",nX="⊂",rX="⋐",iX="⪽",sX="⫅",oX="⊆",aX="⫃",lX="⫁",cX="⫋",uX="⊊",hX="⪿",fX="⥹",dX="⊂",pX="⋐",gX="⊆",_X="⫅",mX="⊆",vX="⊊",yX="⫋",bX="⫇",wX="⫕",xX="⫓",EX="⪸",AX="≻",SX="≽",kX="≻",CX="⪰",TX="≽",IX="≿",RX="⪰",DX="⪺",OX="⪶",PX="⋩",MX="≿",LX="∋",NX="∑",FX="∑",VX="♪",$X="¹",qX="²",BX="³",UX="⊃",zX="⋑",HX="⪾",GX="⫘",WX="⫆",jX="⊇",KX="⫄",YX="⊃",QX="⊇",ZX="⟉",XX="⫗",JX="⥻",tJ="⫂",eJ="⫌",nJ="⊋",rJ="⫀",iJ="⊃",sJ="⋑",oJ="⊇",aJ="⫆",lJ="⊋",cJ="⫌",uJ="⫈",hJ="⫔",fJ="⫖",dJ="⤦",pJ="↙",gJ="⇙",_J="↙",mJ="⤪",vJ="ß",yJ="	",bJ="⌖",wJ="Τ",xJ="τ",EJ="⎴",AJ="Ť",SJ="ť",kJ="Ţ",CJ="ţ",TJ="Т",IJ="т",RJ="⃛",DJ="⌕",OJ="𝔗",PJ="𝔱",MJ="∴",LJ="∴",NJ="∴",FJ="Θ",VJ="θ",$J="ϑ",qJ="ϑ",BJ="≈",UJ="∼",zJ="  ",HJ=" ",GJ=" ",WJ="≈",jJ="∼",KJ="Þ",YJ="þ",QJ="˜",ZJ="∼",XJ="≃",JJ="≅",ttt="≈",ett="⨱",ntt="⊠",rtt="×",itt="⨰",stt="∭",ott="⤨",att="⌶",ltt="⫱",ctt="⊤",utt="𝕋",htt="𝕥",ftt="⫚",dtt="⤩",ptt="‴",gtt="™",_tt="™",mtt="▵",vtt="▿",ytt="◃",btt="⊴",wtt="≜",xtt="▹",Ett="⊵",Att="◬",Stt="≜",ktt="⨺",Ctt="⃛",Ttt="⨹",Itt="⧍",Rtt="⨻",Dtt="⏢",Ott="𝒯",Ptt="𝓉",Mtt="Ц",Ltt="ц",Ntt="Ћ",Ftt="ћ",Vtt="Ŧ",$tt="ŧ",qtt="≬",Btt="↞",Utt="↠",ztt="Ú",Htt="ú",Gtt="↑",Wtt="↟",jtt="⇑",Ktt="⥉",Ytt="Ў",Qtt="ў",Ztt="Ŭ",Xtt="ŭ",Jtt="Û",tet="û",eet="У",net="у",ret="⇅",iet="Ű",set="ű",oet="⥮",aet="⥾",cet="𝔘",uet="𝔲",het="Ù",fet="ù",det="⥣",pet="↿",get="↾",_et="▀",met="⌜",vet="⌜",yet="⌏",bet="◸",wet="Ū",xet="ū",Eet="¨",Aet="_",ket="⏟",Cet="⎵",Tet="⏝",Iet="⋃",Ret="⊎",Det="Ų",Oet="ų",Pet="𝕌",Met="𝕦",Let="⤒",Net="↑",Fet="↑",Vet="⇑",$et="⇅",qet="↕",Bet="↕",Uet="⇕",zet="⥮",Het="↿",Get="↾",Wet="⊎",jet="↖",Ket="↗",Yet="υ",Qet="ϒ",Zet="ϒ",Xet="Υ",Jet="υ",tnt="↥",ent="⊥",nnt="⇈",rnt="⌝",int="⌝",snt="⌎",ont="Ů",ant="ů",lnt="◹",cnt="𝒰",unt="𝓊",hnt="⋰",fnt="Ũ",dnt="ũ",pnt="▵",gnt="▴",_nt="⇈",mnt="Ü",vnt="ü",ynt="⦧",bnt="⦜",wnt="ϵ",xnt="ϰ",Ent="∅",Ant="ϕ",Snt="ϖ",knt="∝",Cnt="↕",Tnt="⇕",Int="ϱ",Rnt="ς",Dnt="⊊︀",Ont="⫋︀",Pnt="⊋︀",Mnt="⫌︀",Lnt="ϑ",Nnt="⊲",Fnt="⊳",Vnt="⫨",$nt="⫫",qnt="⫩",Bnt="В",Unt="в",znt="⊢",Hnt="⊨",Gnt="⊩",Wnt="⊫",jnt="⫦",Knt="⊻",Ynt="∨",Qnt="⋁",Znt="≚",Xnt="⋮",Jnt="|",trt="‖",ert="|",nrt="‖",rrt="∣",irt="|",srt="❘",ort="≀",art=" ",lrt="𝔙",crt="𝔳",urt="⊲",hrt="⊂⃒",frt="⊃⃒",drt="𝕍",prt="𝕧",grt="∝",_rt="⊳",mrt="𝒱",vrt="𝓋",yrt="⫋︀",brt="⊊︀",wrt="⫌︀",xrt="⊋︀",Ert="⊪",Art="⦚",Srt="Ŵ",krt="ŵ",Crt="⩟",Trt="∧",Irt="⋀",Rrt="≙",Drt="℘",Ort="𝔚",Prt="𝔴",Mrt="𝕎",Lrt="𝕨",Nrt="℘",Frt="≀",Vrt="≀",$rt="𝒲",qrt="𝓌",Brt="⋂",Urt="◯",zrt="⋃",Hrt="▽",Grt="𝔛",Wrt="𝔵",jrt="⟷",Krt="⟺",Yrt="Ξ",Qrt="ξ",Zrt="⟵",Xrt="⟸",Jrt="⟼",tit="⋻",eit="⨀",nit="𝕏",rit="𝕩",iit="⨁",sit="⨂",oit="⟶",ait="⟹",lit="𝒳",cit="𝓍",uit="⨆",hit="⨄",fit="△",dit="⋁",pit="⋀",git="Ý",_it="ý",mit="Я",vit="я",yit="Ŷ",bit="ŷ",wit="Ы",xit="ы",Eit="¥",Ait="𝔜",Sit="𝔶",kit="Ї",Cit="ї",Tit="𝕐",Iit="𝕪",Rit="𝒴",Dit="𝓎",Oit="Ю",Pit="ю",Mit="ÿ",Lit="Ÿ",Nit="Ź",Fit="ź",Vit="Ž",$it="ž",qit="З",Bit="з",Uit="Ż",zit="ż",Hit="ℨ",Git="​",Wit="Ζ",jit="ζ",Kit="𝔷",Yit="ℨ",Qit="Ж",Zit="ж",Xit="⇝",Jit="𝕫",tst="ℤ",est="𝒵",nst="𝓏",rst="‍",ist="‌",sst={Aacute:qC,aacute:BC,Abreve:UC,abreve:zC,ac:HC,acd:GC,acE:WC,Acirc:jC,acirc:KC,acute:YC,Acy:QC,acy:ZC,AElig:XC,aelig:JC,af:t2,Afr:e2,afr:n2,Agrave:r2,agrave:i2,alefsym:s2,aleph:o2,Alpha:a2,alpha:l2,Amacr:c2,amacr:u2,amalg:h2,amp:f2,AMP:d2,andand:p2,And:g2,and:_2,andd:m2,andslope:v2,andv:y2,ang:b2,ange:w2,angle:x2,angmsdaa:E2,angmsdab:A2,angmsdac:S2,angmsdad:k2,angmsdae:C2,angmsdaf:T2,angmsdag:I2,angmsdah:R2,angmsd:D2,angrt:O2,angrtvb:P2,angrtvbd:M2,angsph:L2,angst:N2,angzarr:F2,Aogon:V2,aogon:$2,Aopf:q2,aopf:B2,apacir:U2,ap:z2,apE:H2,ape:G2,apid:W2,apos:j2,ApplyFunction:K2,approx:Y2,approxeq:Q2,Aring:Z2,aring:X2,Ascr:J2,ascr:tT,Assign:eT,ast:nT,asymp:rT,asympeq:iT,Atilde:sT,atilde:oT,Auml:aT,auml:lT,awconint:cT,awint:uT,backcong:hT,backepsilon:fT,backprime:dT,backsim:pT,backsimeq:gT,Backslash:_T,Barv:mT,barvee:vT,barwed:yT,Barwed:bT,barwedge:wT,bbrk:xT,bbrktbrk:ET,bcong:AT,Bcy:ST,bcy:kT,bdquo:CT,becaus:TT,because:IT,Because:RT,bemptyv:DT,bepsi:OT,bernou:PT,Bernoullis:MT,Beta:LT,beta:NT,beth:FT,between:VT,Bfr:$T,bfr:qT,bigcap:BT,bigcirc:UT,bigcup:zT,bigodot:HT,bigoplus:GT,bigotimes:WT,bigsqcup:jT,bigstar:KT,bigtriangledown:YT,bigtriangleup:QT,biguplus:ZT,bigvee:XT,bigwedge:JT,bkarow:tI,blacklozenge:eI,blacksquare:nI,blacktriangle:rI,blacktriangledown:iI,blacktriangleleft:sI,blacktriangleright:oI,blank:aI,blk12:lI,blk14:cI,blk34:uI,block:hI,bne:fI,bnequiv:dI,bNot:pI,bnot:gI,Bopf:_I,bopf:mI,bot:vI,bottom:yI,bowtie:bI,boxbox:wI,boxdl:xI,boxdL:EI,boxDl:AI,boxDL:SI,boxdr:kI,boxdR:CI,boxDr:TI,boxDR:II,boxh:RI,boxH:DI,boxhd:OI,boxHd:PI,boxhD:MI,boxHD:LI,boxhu:NI,boxHu:FI,boxhU:VI,boxHU:$I,boxminus:qI,boxplus:BI,boxtimes:UI,boxul:zI,boxuL:HI,boxUl:GI,boxUL:WI,boxur:jI,boxuR:KI,boxUr:YI,boxUR:QI,boxv:ZI,boxV:XI,boxvh:JI,boxvH:tR,boxVh:eR,boxVH:nR,boxvl:rR,boxvL:iR,boxVl:sR,boxVL:oR,boxvr:aR,boxvR:lR,boxVr:cR,boxVR:uR,bprime:hR,breve:fR,Breve:dR,brvbar:pR,bscr:gR,Bscr:_R,bsemi:mR,bsim:vR,bsime:yR,bsolb:bR,bsol:wR,bsolhsub:xR,bull:ER,bullet:AR,bump:SR,bumpE:kR,bumpe:CR,Bumpeq:TR,bumpeq:IR,Cacute:RR,cacute:DR,capand:OR,capbrcup:PR,capcap:MR,cap:LR,Cap:NR,capcup:FR,capdot:VR,CapitalDifferentialD:$R,caps:qR,caret:BR,caron:UR,Cayleys:zR,ccaps:HR,Ccaron:GR,ccaron:WR,Ccedil:jR,ccedil:KR,Ccirc:YR,ccirc:QR,Cconint:ZR,ccups:XR,ccupssm:JR,Cdot:tD,cdot:eD,cedil:nD,Cedilla:rD,cemptyv:iD,cent:sD,centerdot:oD,CenterDot:aD,cfr:lD,Cfr:cD,CHcy:uD,chcy:hD,check:fD,checkmark:dD,Chi:pD,chi:gD,circ:_D,circeq:mD,circlearrowleft:vD,circlearrowright:yD,circledast:bD,circledcirc:wD,circleddash:xD,CircleDot:ED,circledR:AD,circledS:SD,CircleMinus:kD,CirclePlus:CD,CircleTimes:TD,cir:ID,cirE:RD,cire:DD,cirfnint:OD,cirmid:PD,cirscir:MD,ClockwiseContourIntegral:LD,CloseCurlyDoubleQuote:ND,CloseCurlyQuote:FD,clubs:VD,clubsuit:$D,colon:qD,Colon:BD,Colone:UD,colone:zD,coloneq:HD,comma:GD,commat:WD,comp:jD,compfn:KD,complement:YD,complexes:QD,cong:ZD,congdot:XD,Congruent:JD,conint:tO,Conint:eO,ContourIntegral:nO,copf:rO,Copf:iO,coprod:sO,Coproduct:oO,copy:aO,COPY:lO,copysr:cO,CounterClockwiseContourIntegral:uO,crarr:hO,cross:fO,Cross:dO,Cscr:pO,cscr:gO,csub:_O,csube:mO,csup:vO,csupe:yO,ctdot:bO,cudarrl:wO,cudarrr:xO,cuepr:EO,cuesc:AO,cularr:SO,cularrp:kO,cupbrcap:CO,cupcap:TO,CupCap:IO,cup:RO,Cup:DO,cupcup:OO,cupdot:PO,cupor:MO,cups:LO,curarr:NO,curarrm:FO,curlyeqprec:VO,curlyeqsucc:$O,curlyvee:qO,curlywedge:BO,curren:UO,curvearrowleft:zO,curvearrowright:HO,cuvee:GO,cuwed:WO,cwconint:jO,cwint:KO,cylcty:YO,dagger:QO,Dagger:ZO,daleth:XO,darr:JO,Darr:tP,dArr:eP,dash:nP,Dashv:rP,dashv:iP,dbkarow:sP,dblac:oP,Dcaron:aP,dcaron:lP,Dcy:cP,dcy:uP,ddagger:hP,ddarr:fP,DD:dP,dd:pP,DDotrahd:gP,ddotseq:_P,deg:mP,Del:vP,Delta:yP,delta:bP,demptyv:wP,dfisht:xP,Dfr:EP,dfr:AP,dHar:SP,dharl:kP,dharr:CP,DiacriticalAcute:TP,DiacriticalDot:IP,DiacriticalDoubleAcute:RP,DiacriticalGrave:DP,DiacriticalTilde:OP,diam:PP,diamond:MP,Diamond:LP,diamondsuit:NP,diams:FP,die:VP,DifferentialD:$P,digamma:qP,disin:BP,div:UP,divide:zP,divideontimes:HP,divonx:GP,DJcy:WP,djcy:jP,dlcorn:KP,dlcrop:YP,dollar:QP,Dopf:ZP,dopf:XP,Dot:JP,dot:tM,DotDot:eM,doteq:nM,doteqdot:rM,DotEqual:iM,dotminus:sM,dotplus:oM,dotsquare:aM,doublebarwedge:lM,DoubleContourIntegral:cM,DoubleDot:uM,DoubleDownArrow:hM,DoubleLeftArrow:fM,DoubleLeftRightArrow:dM,DoubleLeftTee:pM,DoubleLongLeftArrow:gM,DoubleLongLeftRightArrow:_M,DoubleLongRightArrow:mM,DoubleRightArrow:vM,DoubleRightTee:yM,DoubleUpArrow:bM,DoubleUpDownArrow:wM,DoubleVerticalBar:xM,DownArrowBar:EM,downarrow:AM,DownArrow:SM,Downarrow:kM,DownArrowUpArrow:CM,DownBreve:TM,downdownarrows:IM,downharpoonleft:RM,downharpoonright:DM,DownLeftRightVector:OM,DownLeftTeeVector:PM,DownLeftVectorBar:MM,DownLeftVector:LM,DownRightTeeVector:NM,DownRightVectorBar:FM,DownRightVector:VM,DownTeeArrow:$M,DownTee:qM,drbkarow:BM,drcorn:UM,drcrop:zM,Dscr:HM,dscr:GM,DScy:WM,dscy:jM,dsol:KM,Dstrok:YM,dstrok:QM,dtdot:ZM,dtri:XM,dtrif:JM,duarr:tL,duhar:eL,dwangle:nL,DZcy:rL,dzcy:iL,dzigrarr:sL,Eacute:oL,eacute:aL,easter:lL,Ecaron:cL,ecaron:uL,Ecirc:hL,ecirc:fL,ecir:dL,ecolon:pL,Ecy:gL,ecy:_L,eDDot:mL,Edot:vL,edot:yL,eDot:bL,ee:wL,efDot:xL,Efr:EL,efr:AL,eg:SL,Egrave:kL,egrave:CL,egs:TL,egsdot:IL,el:RL,Element:DL,elinters:OL,ell:PL,els:ML,elsdot:LL,Emacr:NL,emacr:FL,empty:VL,emptyset:$L,EmptySmallSquare:qL,emptyv:BL,EmptyVerySmallSquare:UL,emsp13:zL,emsp14:HL,emsp:GL,ENG:WL,eng:jL,ensp:KL,Eogon:YL,eogon:QL,Eopf:ZL,eopf:XL,epar:JL,eparsl:tN,eplus:eN,epsi:nN,Epsilon:rN,epsilon:iN,epsiv:sN,eqcirc:oN,eqcolon:aN,eqsim:lN,eqslantgtr:cN,eqslantless:uN,Equal:hN,equals:fN,EqualTilde:dN,equest:pN,Equilibrium:gN,equiv:_N,equivDD:mN,eqvparsl:vN,erarr:yN,erDot:bN,escr:wN,Escr:xN,esdot:EN,Esim:AN,esim:SN,Eta:kN,eta:CN,ETH:TN,eth:IN,Euml:RN,euml:DN,euro:ON,excl:PN,exist:MN,Exists:LN,expectation:NN,exponentiale:FN,ExponentialE:VN,fallingdotseq:$N,Fcy:qN,fcy:BN,female:UN,ffilig:zN,fflig:HN,ffllig:GN,Ffr:WN,ffr:jN,filig:KN,FilledSmallSquare:YN,FilledVerySmallSquare:QN,fjlig:ZN,flat:XN,fllig:JN,fltns:tF,fnof:eF,Fopf:nF,fopf:rF,forall:iF,ForAll:sF,fork:oF,forkv:aF,Fouriertrf:lF,fpartint:cF,frac12:uF,frac13:hF,frac14:fF,frac15:dF,frac16:pF,frac18:gF,frac23:_F,frac25:mF,frac34:vF,frac35:yF,frac38:bF,frac45:wF,frac56:xF,frac58:EF,frac78:AF,frasl:SF,frown:kF,fscr:CF,Fscr:TF,gacute:IF,Gamma:RF,gamma:DF,Gammad:OF,gammad:PF,gap:MF,Gbreve:LF,gbreve:NF,Gcedil:FF,Gcirc:VF,gcirc:$F,Gcy:qF,gcy:BF,Gdot:UF,gdot:zF,ge:HF,gE:GF,gEl:WF,gel:jF,geq:KF,geqq:YF,geqslant:QF,gescc:ZF,ges:XF,gesdot:JF,gesdoto:t3,gesdotol:e3,gesl:n3,gesles:r3,Gfr:i3,gfr:s3,gg:o3,Gg:a3,ggg:l3,gimel:c3,GJcy:u3,gjcy:h3,gla:f3,gl:d3,glE:p3,glj:g3,gnap:_3,gnapprox:m3,gne:v3,gnE:y3,gneq:b3,gneqq:w3,gnsim:x3,Gopf:E3,gopf:A3,grave:S3,GreaterEqual:k3,GreaterEqualLess:C3,GreaterFullEqual:T3,GreaterGreater:I3,GreaterLess:R3,GreaterSlantEqual:D3,GreaterTilde:O3,Gscr:P3,gscr:M3,gsim:L3,gsime:N3,gsiml:F3,gtcc:V3,gtcir:$3,gt:q3,GT:B3,Gt:U3,gtdot:z3,gtlPar:H3,gtquest:G3,gtrapprox:W3,gtrarr:j3,gtrdot:K3,gtreqless:Y3,gtreqqless:Q3,gtrless:Z3,gtrsim:X3,gvertneqq:J3,gvnE:tV,Hacek:eV,hairsp:nV,half:rV,hamilt:iV,HARDcy:sV,hardcy:oV,harrcir:aV,harr:lV,hArr:cV,harrw:uV,Hat:hV,hbar:fV,Hcirc:dV,hcirc:pV,hearts:gV,heartsuit:_V,hellip:mV,hercon:vV,hfr:yV,Hfr:bV,HilbertSpace:wV,hksearow:xV,hkswarow:EV,hoarr:AV,homtht:SV,hookleftarrow:kV,hookrightarrow:CV,hopf:TV,Hopf:IV,horbar:RV,HorizontalLine:DV,hscr:OV,Hscr:PV,hslash:MV,Hstrok:LV,hstrok:NV,HumpDownHump:FV,HumpEqual:VV,hybull:$V,hyphen:qV,Iacute:BV,iacute:UV,ic:zV,Icirc:HV,icirc:GV,Icy:WV,icy:jV,Idot:KV,IEcy:YV,iecy:QV,iexcl:ZV,iff:XV,ifr:JV,Ifr:t9,Igrave:e9,igrave:n9,ii:r9,iiiint:i9,iiint:s9,iinfin:o9,iiota:a9,IJlig:l9,ijlig:c9,Imacr:u9,imacr:h9,image:f9,ImaginaryI:d9,imagline:p9,imagpart:g9,imath:_9,Im:m9,imof:v9,imped:y9,Implies:b9,incare:w9,in:"∈",infin:x9,infintie:E9,inodot:A9,intcal:S9,int:k9,Int:C9,integers:T9,Integral:I9,intercal:R9,Intersection:D9,intlarhk:O9,intprod:P9,InvisibleComma:M9,InvisibleTimes:L9,IOcy:N9,iocy:F9,Iogon:V9,iogon:$9,Iopf:q9,iopf:B9,Iota:U9,iota:z9,iprod:H9,iquest:G9,iscr:W9,Iscr:j9,isin:K9,isindot:Y9,isinE:Q9,isins:Z9,isinsv:X9,isinv:J9,it:t4,Itilde:e4,itilde:n4,Iukcy:r4,iukcy:i4,Iuml:s4,iuml:o4,Jcirc:a4,jcirc:l4,Jcy:c4,jcy:u4,Jfr:h4,jfr:f4,jmath:d4,Jopf:p4,jopf:g4,Jscr:_4,jscr:m4,Jsercy:v4,jsercy:y4,Jukcy:b4,jukcy:w4,Kappa:x4,kappa:E4,kappav:A4,Kcedil:S4,kcedil:k4,Kcy:C4,kcy:T4,Kfr:I4,kfr:R4,kgreen:D4,KHcy:O4,khcy:P4,KJcy:M4,kjcy:L4,Kopf:N4,kopf:F4,Kscr:V4,kscr:$4,lAarr:q4,Lacute:B4,lacute:U4,laemptyv:z4,lagran:H4,Lambda:G4,lambda:W4,lang:j4,Lang:K4,langd:Y4,langle:Q4,lap:Z4,Laplacetrf:X4,laquo:J4,larrb:t$,larrbfs:e$,larr:n$,Larr:r$,lArr:i$,larrfs:s$,larrhk:o$,larrlp:a$,larrpl:l$,larrsim:c$,larrtl:u$,latail:h$,lAtail:f$,lat:d$,late:p$,lates:g$,lbarr:_$,lBarr:m$,lbbrk:v$,lbrace:y$,lbrack:b$,lbrke:w$,lbrksld:x$,lbrkslu:E$,Lcaron:A$,lcaron:S$,Lcedil:k$,lcedil:C$,lceil:T$,lcub:I$,Lcy:R$,lcy:D$,ldca:O$,ldquo:P$,ldquor:M$,ldrdhar:L$,ldrushar:N$,ldsh:F$,le:V$,lE:$$,LeftAngleBracket:q$,LeftArrowBar:B$,leftarrow:U$,LeftArrow:z$,Leftarrow:H$,LeftArrowRightArrow:G$,leftarrowtail:W$,LeftCeiling:j$,LeftDoubleBracket:K$,LeftDownTeeVector:Y$,LeftDownVectorBar:Q$,LeftDownVector:Z$,LeftFloor:X$,leftharpoondown:J$,leftharpoonup:t5,leftleftarrows:e5,leftrightarrow:n5,LeftRightArrow:r5,Leftrightarrow:i5,leftrightarrows:s5,leftrightharpoons:o5,leftrightsquigarrow:a5,LeftRightVector:l5,LeftTeeArrow:c5,LeftTee:u5,LeftTeeVector:h5,leftthreetimes:f5,LeftTriangleBar:d5,LeftTriangle:p5,LeftTriangleEqual:g5,LeftUpDownVector:_5,LeftUpTeeVector:m5,LeftUpVectorBar:v5,LeftUpVector:y5,LeftVectorBar:b5,LeftVector:w5,lEg:x5,leg:E5,leq:A5,leqq:S5,leqslant:k5,lescc:C5,les:T5,lesdot:I5,lesdoto:R5,lesdotor:D5,lesg:O5,lesges:P5,lessapprox:M5,lessdot:L5,lesseqgtr:N5,lesseqqgtr:F5,LessEqualGreater:V5,LessFullEqual:$5,LessGreater:q5,lessgtr:B5,LessLess:U5,lesssim:z5,LessSlantEqual:H5,LessTilde:G5,lfisht:W5,lfloor:j5,Lfr:K5,lfr:Y5,lg:Q5,lgE:Z5,lHar:X5,lhard:J5,lharu:tq,lharul:eq,lhblk:nq,LJcy:rq,ljcy:iq,llarr:sq,ll:oq,Ll:aq,llcorner:lq,Lleftarrow:cq,llhard:uq,lltri:hq,Lmidot:fq,lmidot:dq,lmoustache:pq,lmoust:gq,lnap:_q,lnapprox:mq,lne:vq,lnE:yq,lneq:bq,lneqq:wq,lnsim:xq,loang:Eq,loarr:Aq,lobrk:Sq,longleftarrow:kq,LongLeftArrow:Cq,Longleftarrow:Tq,longleftrightarrow:Iq,LongLeftRightArrow:Rq,Longleftrightarrow:Dq,longmapsto:Oq,longrightarrow:Pq,LongRightArrow:Mq,Longrightarrow:Lq,looparrowleft:Nq,looparrowright:Fq,lopar:Vq,Lopf:$q,lopf:qq,loplus:Bq,lotimes:Uq,lowast:zq,lowbar:Hq,LowerLeftArrow:Gq,LowerRightArrow:Wq,loz:jq,lozenge:Kq,lozf:Yq,lpar:Qq,lparlt:Zq,lrarr:Xq,lrcorner:Jq,lrhar:t6,lrhard:e6,lrm:n6,lrtri:r6,lsaquo:i6,lscr:s6,Lscr:o6,lsh:a6,Lsh:l6,lsim:c6,lsime:u6,lsimg:h6,lsqb:f6,lsquo:d6,lsquor:p6,Lstrok:g6,lstrok:_6,ltcc:m6,ltcir:v6,lt:y6,LT:b6,Lt:w6,ltdot:x6,lthree:E6,ltimes:A6,ltlarr:S6,ltquest:k6,ltri:C6,ltrie:T6,ltrif:I6,ltrPar:R6,lurdshar:D6,luruhar:O6,lvertneqq:P6,lvnE:M6,macr:L6,male:N6,malt:F6,maltese:V6,Map:"⤅",map:$6,mapsto:q6,mapstodown:B6,mapstoleft:U6,mapstoup:z6,marker:H6,mcomma:G6,Mcy:W6,mcy:j6,mdash:K6,mDDot:Y6,measuredangle:Q6,MediumSpace:Z6,Mellintrf:X6,Mfr:J6,mfr:tB,mho:eB,micro:nB,midast:rB,midcir:iB,mid:sB,middot:oB,minusb:aB,minus:lB,minusd:cB,minusdu:uB,MinusPlus:hB,mlcp:fB,mldr:dB,mnplus:pB,models:gB,Mopf:_B,mopf:mB,mp:vB,mscr:yB,Mscr:bB,mstpos:wB,Mu:xB,mu:EB,multimap:AB,mumap:SB,nabla:kB,Nacute:CB,nacute:TB,nang:IB,nap:RB,napE:DB,napid:OB,napos:PB,napprox:MB,natural:LB,naturals:NB,natur:FB,nbsp:VB,nbump:$B,nbumpe:qB,ncap:BB,Ncaron:UB,ncaron:zB,Ncedil:HB,ncedil:GB,ncong:WB,ncongdot:jB,ncup:KB,Ncy:YB,ncy:QB,ndash:ZB,nearhk:XB,nearr:JB,neArr:tU,nearrow:eU,ne:nU,nedot:rU,NegativeMediumSpace:iU,NegativeThickSpace:sU,NegativeThinSpace:oU,NegativeVeryThinSpace:aU,nequiv:lU,nesear:cU,nesim:uU,NestedGreaterGreater:hU,NestedLessLess:fU,NewLine:dU,nexist:pU,nexists:gU,Nfr:_U,nfr:mU,ngE:vU,nge:yU,ngeq:bU,ngeqq:wU,ngeqslant:xU,nges:EU,nGg:AU,ngsim:SU,nGt:kU,ngt:CU,ngtr:TU,nGtv:IU,nharr:RU,nhArr:DU,nhpar:OU,ni:PU,nis:MU,nisd:LU,niv:NU,NJcy:FU,njcy:VU,nlarr:$U,nlArr:qU,nldr:BU,nlE:UU,nle:zU,nleftarrow:HU,nLeftarrow:GU,nleftrightarrow:WU,nLeftrightarrow:jU,nleq:KU,nleqq:YU,nleqslant:QU,nles:ZU,nless:XU,nLl:JU,nlsim:t8,nLt:e8,nlt:n8,nltri:r8,nltrie:i8,nLtv:s8,nmid:o8,NoBreak:a8,NonBreakingSpace:l8,nopf:c8,Nopf:u8,Not:h8,not:f8,NotCongruent:d8,NotCupCap:p8,NotDoubleVerticalBar:g8,NotElement:_8,NotEqual:m8,NotEqualTilde:v8,NotExists:y8,NotGreater:b8,NotGreaterEqual:w8,NotGreaterFullEqual:x8,NotGreaterGreater:E8,NotGreaterLess:A8,NotGreaterSlantEqual:S8,NotGreaterTilde:k8,NotHumpDownHump:C8,NotHumpEqual:T8,notin:I8,notindot:R8,notinE:D8,notinva:O8,notinvb:P8,notinvc:M8,NotLeftTriangleBar:L8,NotLeftTriangle:N8,NotLeftTriangleEqual:F8,NotLess:V8,NotLessEqual:$8,NotLessGreater:q8,NotLessLess:B8,NotLessSlantEqual:U8,NotLessTilde:z8,NotNestedGreaterGreater:H8,NotNestedLessLess:G8,notni:W8,notniva:j8,notnivb:K8,notnivc:Y8,NotPrecedes:Q8,NotPrecedesEqual:Z8,NotPrecedesSlantEqual:X8,NotReverseElement:J8,NotRightTriangleBar:t7,NotRightTriangle:e7,NotRightTriangleEqual:n7,NotSquareSubset:r7,NotSquareSubsetEqual:i7,NotSquareSuperset:s7,NotSquareSupersetEqual:o7,NotSubset:a7,NotSubsetEqual:l7,NotSucceeds:c7,NotSucceedsEqual:u7,NotSucceedsSlantEqual:h7,NotSucceedsTilde:f7,NotSuperset:d7,NotSupersetEqual:p7,NotTilde:g7,NotTildeEqual:_7,NotTildeFullEqual:m7,NotTildeTilde:v7,NotVerticalBar:y7,nparallel:b7,npar:w7,nparsl:x7,npart:E7,npolint:A7,npr:S7,nprcue:k7,nprec:C7,npreceq:T7,npre:I7,nrarrc:R7,nrarr:D7,nrArr:O7,nrarrw:P7,nrightarrow:M7,nRightarrow:L7,nrtri:N7,nrtrie:F7,nsc:V7,nsccue:$7,nsce:q7,Nscr:B7,nscr:U7,nshortmid:z7,nshortparallel:H7,nsim:G7,nsime:W7,nsimeq:j7,nsmid:K7,nspar:Y7,nsqsube:Q7,nsqsupe:Z7,nsub:X7,nsubE:J7,nsube:tz,nsubset:ez,nsubseteq:nz,nsubseteqq:rz,nsucc:iz,nsucceq:sz,nsup:oz,nsupE:az,nsupe:lz,nsupset:cz,nsupseteq:uz,nsupseteqq:hz,ntgl:fz,Ntilde:dz,ntilde:pz,ntlg:gz,ntriangleleft:_z,ntrianglelefteq:mz,ntriangleright:vz,ntrianglerighteq:yz,Nu:bz,nu:wz,num:xz,numero:Ez,numsp:Az,nvap:Sz,nvdash:kz,nvDash:Cz,nVdash:Tz,nVDash:Iz,nvge:Rz,nvgt:Dz,nvHarr:Oz,nvinfin:Pz,nvlArr:Mz,nvle:Lz,nvlt:Nz,nvltrie:Fz,nvrArr:Vz,nvrtrie:$z,nvsim:qz,nwarhk:Bz,nwarr:Uz,nwArr:zz,nwarrow:Hz,nwnear:Gz,Oacute:Wz,oacute:jz,oast:Kz,Ocirc:Yz,ocirc:Qz,ocir:Zz,Ocy:Xz,ocy:Jz,odash:tH,Odblac:eH,odblac:nH,odiv:rH,odot:iH,odsold:sH,OElig:oH,oelig:aH,ofcir:lH,Ofr:cH,ofr:uH,ogon:hH,Ograve:fH,ograve:dH,ogt:pH,ohbar:gH,ohm:_H,oint:mH,olarr:vH,olcir:yH,olcross:bH,oline:wH,olt:xH,Omacr:EH,omacr:AH,Omega:SH,omega:kH,Omicron:CH,omicron:TH,omid:IH,ominus:RH,Oopf:DH,oopf:OH,opar:PH,OpenCurlyDoubleQuote:MH,OpenCurlyQuote:LH,operp:NH,oplus:FH,orarr:VH,Or:$H,or:qH,ord:BH,order:UH,orderof:zH,ordf:HH,ordm:GH,origof:WH,oror:jH,orslope:KH,orv:YH,oS:QH,Oscr:ZH,oscr:XH,Oslash:JH,oslash:tG,osol:eG,Otilde:nG,otilde:rG,otimesas:iG,Otimes:sG,otimes:oG,Ouml:aG,ouml:lG,ovbar:cG,OverBar:uG,OverBrace:hG,OverBracket:fG,OverParenthesis:dG,para:pG,parallel:gG,par:_G,parsim:mG,parsl:vG,part:yG,PartialD:bG,Pcy:wG,pcy:xG,percnt:EG,period:AG,permil:SG,perp:kG,pertenk:CG,Pfr:TG,pfr:IG,Phi:RG,phi:DG,phiv:OG,phmmat:PG,phone:MG,Pi:LG,pi:NG,pitchfork:FG,piv:VG,planck:$G,planckh:qG,plankv:BG,plusacir:UG,plusb:zG,pluscir:HG,plus:GG,plusdo:WG,plusdu:jG,pluse:KG,PlusMinus:YG,plusmn:QG,plussim:ZG,plustwo:XG,pm:JG,Poincareplane:tW,pointint:eW,popf:nW,Popf:rW,pound:iW,prap:sW,Pr:oW,pr:aW,prcue:lW,precapprox:cW,prec:uW,preccurlyeq:hW,Precedes:fW,PrecedesEqual:dW,PrecedesSlantEqual:pW,PrecedesTilde:gW,preceq:_W,precnapprox:mW,precneqq:vW,precnsim:yW,pre:bW,prE:wW,precsim:xW,prime:EW,Prime:AW,primes:SW,prnap:kW,prnE:CW,prnsim:TW,prod:IW,Product:RW,profalar:DW,profline:OW,profsurf:PW,prop:MW,Proportional:LW,Proportion:NW,propto:FW,prsim:VW,prurel:$W,Pscr:qW,pscr:BW,Psi:UW,psi:zW,puncsp:HW,Qfr:GW,qfr:WW,qint:jW,qopf:KW,Qopf:YW,qprime:QW,Qscr:ZW,qscr:XW,quaternions:JW,quatint:tj,quest:ej,questeq:nj,quot:rj,QUOT:ij,rAarr:sj,race:oj,Racute:aj,racute:lj,radic:cj,raemptyv:uj,rang:hj,Rang:fj,rangd:dj,range:pj,rangle:gj,raquo:_j,rarrap:mj,rarrb:vj,rarrbfs:yj,rarrc:bj,rarr:wj,Rarr:xj,rArr:Ej,rarrfs:Aj,rarrhk:Sj,rarrlp:kj,rarrpl:Cj,rarrsim:Tj,Rarrtl:Ij,rarrtl:Rj,rarrw:Dj,ratail:Oj,rAtail:Pj,ratio:Mj,rationals:Lj,rbarr:Nj,rBarr:Fj,RBarr:Vj,rbbrk:$j,rbrace:qj,rbrack:Bj,rbrke:Uj,rbrksld:zj,rbrkslu:Hj,Rcaron:Gj,rcaron:Wj,Rcedil:jj,rcedil:Kj,rceil:Yj,rcub:Qj,Rcy:Zj,rcy:Xj,rdca:Jj,rdldhar:tK,rdquo:eK,rdquor:nK,rdsh:rK,real:iK,realine:sK,realpart:oK,reals:aK,Re:lK,rect:cK,reg:uK,REG:hK,ReverseElement:fK,ReverseEquilibrium:dK,ReverseUpEquilibrium:pK,rfisht:gK,rfloor:_K,rfr:mK,Rfr:vK,rHar:yK,rhard:bK,rharu:wK,rharul:xK,Rho:EK,rho:AK,rhov:SK,RightAngleBracket:kK,RightArrowBar:CK,rightarrow:TK,RightArrow:IK,Rightarrow:RK,RightArrowLeftArrow:DK,rightarrowtail:OK,RightCeiling:PK,RightDoubleBracket:MK,RightDownTeeVector:LK,RightDownVectorBar:NK,RightDownVector:FK,RightFloor:VK,rightharpoondown:$K,rightharpoonup:qK,rightleftarrows:BK,rightleftharpoons:UK,rightrightarrows:zK,rightsquigarrow:HK,RightTeeArrow:GK,RightTee:WK,RightTeeVector:jK,rightthreetimes:KK,RightTriangleBar:YK,RightTriangle:QK,RightTriangleEqual:ZK,RightUpDownVector:XK,RightUpTeeVector:JK,RightUpVectorBar:tY,RightUpVector:eY,RightVectorBar:nY,RightVector:rY,ring:iY,risingdotseq:sY,rlarr:oY,rlhar:aY,rlm:lY,rmoustache:cY,rmoust:uY,rnmid:hY,roang:fY,roarr:dY,robrk:pY,ropar:gY,ropf:_Y,Ropf:mY,roplus:vY,rotimes:yY,RoundImplies:bY,rpar:wY,rpargt:xY,rppolint:EY,rrarr:AY,Rrightarrow:SY,rsaquo:kY,rscr:CY,Rscr:TY,rsh:IY,Rsh:RY,rsqb:DY,rsquo:OY,rsquor:PY,rthree:MY,rtimes:LY,rtri:NY,rtrie:FY,rtrif:VY,rtriltri:$Y,RuleDelayed:qY,ruluhar:BY,rx:UY,Sacute:zY,sacute:HY,sbquo:GY,scap:WY,Scaron:jY,scaron:KY,Sc:YY,sc:QY,sccue:ZY,sce:XY,scE:JY,Scedil:tQ,scedil:eQ,Scirc:nQ,scirc:rQ,scnap:iQ,scnE:sQ,scnsim:oQ,scpolint:aQ,scsim:lQ,Scy:cQ,scy:uQ,sdotb:hQ,sdot:fQ,sdote:dQ,searhk:pQ,searr:gQ,seArr:_Q,searrow:mQ,sect:vQ,semi:yQ,seswar:bQ,setminus:wQ,setmn:xQ,sext:EQ,Sfr:AQ,sfr:SQ,sfrown:kQ,sharp:CQ,SHCHcy:TQ,shchcy:IQ,SHcy:RQ,shcy:DQ,ShortDownArrow:OQ,ShortLeftArrow:PQ,shortmid:MQ,shortparallel:LQ,ShortRightArrow:NQ,ShortUpArrow:FQ,shy:VQ,Sigma:$Q,sigma:qQ,sigmaf:BQ,sigmav:UQ,sim:zQ,simdot:HQ,sime:GQ,simeq:WQ,simg:jQ,simgE:KQ,siml:YQ,simlE:QQ,simne:ZQ,simplus:XQ,simrarr:JQ,slarr:tZ,SmallCircle:eZ,smallsetminus:nZ,smashp:rZ,smeparsl:iZ,smid:sZ,smile:oZ,smt:aZ,smte:lZ,smtes:cZ,SOFTcy:uZ,softcy:hZ,solbar:fZ,solb:dZ,sol:pZ,Sopf:gZ,sopf:_Z,spades:mZ,spadesuit:vZ,spar:yZ,sqcap:bZ,sqcaps:wZ,sqcup:xZ,sqcups:EZ,Sqrt:AZ,sqsub:SZ,sqsube:kZ,sqsubset:CZ,sqsubseteq:TZ,sqsup:IZ,sqsupe:RZ,sqsupset:DZ,sqsupseteq:OZ,square:PZ,Square:MZ,SquareIntersection:LZ,SquareSubset:NZ,SquareSubsetEqual:FZ,SquareSuperset:VZ,SquareSupersetEqual:$Z,SquareUnion:qZ,squarf:BZ,squ:UZ,squf:zZ,srarr:HZ,Sscr:GZ,sscr:WZ,ssetmn:jZ,ssmile:KZ,sstarf:YZ,Star:QZ,star:ZZ,starf:XZ,straightepsilon:JZ,straightphi:tX,strns:eX,sub:nX,Sub:rX,subdot:iX,subE:sX,sube:oX,subedot:aX,submult:lX,subnE:cX,subne:uX,subplus:hX,subrarr:fX,subset:dX,Subset:pX,subseteq:gX,subseteqq:_X,SubsetEqual:mX,subsetneq:vX,subsetneqq:yX,subsim:bX,subsub:wX,subsup:xX,succapprox:EX,succ:AX,succcurlyeq:SX,Succeeds:kX,SucceedsEqual:CX,SucceedsSlantEqual:TX,SucceedsTilde:IX,succeq:RX,succnapprox:DX,succneqq:OX,succnsim:PX,succsim:MX,SuchThat:LX,sum:NX,Sum:FX,sung:VX,sup1:$X,sup2:qX,sup3:BX,sup:UX,Sup:zX,supdot:HX,supdsub:GX,supE:WX,supe:jX,supedot:KX,Superset:YX,SupersetEqual:QX,suphsol:ZX,suphsub:XX,suplarr:JX,supmult:tJ,supnE:eJ,supne:nJ,supplus:rJ,supset:iJ,Supset:sJ,supseteq:oJ,supseteqq:aJ,supsetneq:lJ,supsetneqq:cJ,supsim:uJ,supsub:hJ,supsup:fJ,swarhk:dJ,swarr:pJ,swArr:gJ,swarrow:_J,swnwar:mJ,szlig:vJ,Tab:yJ,target:bJ,Tau:wJ,tau:xJ,tbrk:EJ,Tcaron:AJ,tcaron:SJ,Tcedil:kJ,tcedil:CJ,Tcy:TJ,tcy:IJ,tdot:RJ,telrec:DJ,Tfr:OJ,tfr:PJ,there4:MJ,therefore:LJ,Therefore:NJ,Theta:FJ,theta:VJ,thetasym:$J,thetav:qJ,thickapprox:BJ,thicksim:UJ,ThickSpace:zJ,ThinSpace:HJ,thinsp:GJ,thkap:WJ,thksim:jJ,THORN:KJ,thorn:YJ,tilde:QJ,Tilde:ZJ,TildeEqual:XJ,TildeFullEqual:JJ,TildeTilde:ttt,timesbar:ett,timesb:ntt,times:rtt,timesd:itt,tint:stt,toea:ott,topbot:att,topcir:ltt,top:ctt,Topf:utt,topf:htt,topfork:ftt,tosa:dtt,tprime:ptt,trade:gtt,TRADE:_tt,triangle:mtt,triangledown:vtt,triangleleft:ytt,trianglelefteq:btt,triangleq:wtt,triangleright:xtt,trianglerighteq:Ett,tridot:Att,trie:Stt,triminus:ktt,TripleDot:Ctt,triplus:Ttt,trisb:Itt,tritime:Rtt,trpezium:Dtt,Tscr:Ott,tscr:Ptt,TScy:Mtt,tscy:Ltt,TSHcy:Ntt,tshcy:Ftt,Tstrok:Vtt,tstrok:$tt,twixt:qtt,twoheadleftarrow:Btt,twoheadrightarrow:Utt,Uacute:ztt,uacute:Htt,uarr:Gtt,Uarr:Wtt,uArr:jtt,Uarrocir:Ktt,Ubrcy:Ytt,ubrcy:Qtt,Ubreve:Ztt,ubreve:Xtt,Ucirc:Jtt,ucirc:tet,Ucy:eet,ucy:net,udarr:ret,Udblac:iet,udblac:set,udhar:oet,ufisht:aet,Ufr:cet,ufr:uet,Ugrave:het,ugrave:fet,uHar:det,uharl:pet,uharr:get,uhblk:_et,ulcorn:met,ulcorner:vet,ulcrop:yet,ultri:bet,Umacr:wet,umacr:xet,uml:Eet,UnderBar:Aet,UnderBrace:ket,UnderBracket:Cet,UnderParenthesis:Tet,Union:Iet,UnionPlus:Ret,Uogon:Det,uogon:Oet,Uopf:Pet,uopf:Met,UpArrowBar:Let,uparrow:Net,UpArrow:Fet,Uparrow:Vet,UpArrowDownArrow:$et,updownarrow:qet,UpDownArrow:Bet,Updownarrow:Uet,UpEquilibrium:zet,upharpoonleft:Het,upharpoonright:Get,uplus:Wet,UpperLeftArrow:jet,UpperRightArrow:Ket,upsi:Yet,Upsi:Qet,upsih:Zet,Upsilon:Xet,upsilon:Jet,UpTeeArrow:tnt,UpTee:ent,upuparrows:nnt,urcorn:rnt,urcorner:int,urcrop:snt,Uring:ont,uring:ant,urtri:lnt,Uscr:cnt,uscr:unt,utdot:hnt,Utilde:fnt,utilde:dnt,utri:pnt,utrif:gnt,uuarr:_nt,Uuml:mnt,uuml:vnt,uwangle:ynt,vangrt:bnt,varepsilon:wnt,varkappa:xnt,varnothing:Ent,varphi:Ant,varpi:Snt,varpropto:knt,varr:Cnt,vArr:Tnt,varrho:Int,varsigma:Rnt,varsubsetneq:Dnt,varsubsetneqq:Ont,varsupsetneq:Pnt,varsupsetneqq:Mnt,vartheta:Lnt,vartriangleleft:Nnt,vartriangleright:Fnt,vBar:Vnt,Vbar:$nt,vBarv:qnt,Vcy:Bnt,vcy:Unt,vdash:znt,vDash:Hnt,Vdash:Gnt,VDash:Wnt,Vdashl:jnt,veebar:Knt,vee:Ynt,Vee:Qnt,veeeq:Znt,vellip:Xnt,verbar:Jnt,Verbar:trt,vert:ert,Vert:nrt,VerticalBar:rrt,VerticalLine:irt,VerticalSeparator:srt,VerticalTilde:ort,VeryThinSpace:art,Vfr:lrt,vfr:crt,vltri:urt,vnsub:hrt,vnsup:frt,Vopf:drt,vopf:prt,vprop:grt,vrtri:_rt,Vscr:mrt,vscr:vrt,vsubnE:yrt,vsubne:brt,vsupnE:wrt,vsupne:xrt,Vvdash:Ert,vzigzag:Art,Wcirc:Srt,wcirc:krt,wedbar:Crt,wedge:Trt,Wedge:Irt,wedgeq:Rrt,weierp:Drt,Wfr:Ort,wfr:Prt,Wopf:Mrt,wopf:Lrt,wp:Nrt,wr:Frt,wreath:Vrt,Wscr:$rt,wscr:qrt,xcap:Brt,xcirc:Urt,xcup:zrt,xdtri:Hrt,Xfr:Grt,xfr:Wrt,xharr:jrt,xhArr:Krt,Xi:Yrt,xi:Qrt,xlarr:Zrt,xlArr:Xrt,xmap:Jrt,xnis:tit,xodot:eit,Xopf:nit,xopf:rit,xoplus:iit,xotime:sit,xrarr:oit,xrArr:ait,Xscr:lit,xscr:cit,xsqcup:uit,xuplus:hit,xutri:fit,xvee:dit,xwedge:pit,Yacute:git,yacute:_it,YAcy:mit,yacy:vit,Ycirc:yit,ycirc:bit,Ycy:wit,ycy:xit,yen:Eit,Yfr:Ait,yfr:Sit,YIcy:kit,yicy:Cit,Yopf:Tit,yopf:Iit,Yscr:Rit,yscr:Dit,YUcy:Oit,yucy:Pit,yuml:Mit,Yuml:Lit,Zacute:Nit,zacute:Fit,Zcaron:Vit,zcaron:$it,Zcy:qit,zcy:Bit,Zdot:Uit,zdot:zit,zeetrf:Hit,ZeroWidthSpace:Git,Zeta:Wit,zeta:jit,zfr:Kit,Zfr:Yit,ZHcy:Qit,zhcy:Zit,zigrarr:Xit,zopf:Jit,Zopf:tst,Zscr:est,zscr:nst,zwj:rst,zwnj:ist};var Fm=sst,Of=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,wo={},Hg={};function ost(e){var t,n,r=Hg[e];if(r)return r;for(r=Hg[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}function Tc(e,t,n){var r,i,o,l,h,f="";for(typeof t!="string"&&(n=t,t=Tc.defaultChars),typeof n>"u"&&(n=!0),h=ost(t),r=0,i=e.length;r<i;r++){if(o=e.charCodeAt(r),n&&o===37&&r+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){f+=e.slice(r,r+3),r+=2;continue}if(o<128){f+=h[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&r+1<i&&(l=e.charCodeAt(r+1),l>=56320&&l<=57343)){f+=encodeURIComponent(e[r]+e[r+1]),r++;continue}f+="%EF%BF%BD";continue}f+=encodeURIComponent(e[r])}return f}Tc.defaultChars=";/?:@&=+$,-_.!~*'()#";Tc.componentChars="-_.!~*'()";var ast=Tc,Gg={};function lst(e){var t,n,r=Gg[e];if(r)return r;for(r=Gg[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),r.push(n);for(t=0;t<e.length;t++)n=e.charCodeAt(t),r[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return r}function Ic(e,t){var n;return typeof t!="string"&&(t=Ic.defaultChars),n=lst(t),e.replace(/(%[a-f0-9]{2})+/gi,function(r){var i,o,l,h,f,d,v,b="";for(i=0,o=r.length;i<o;i+=3){if(l=parseInt(r.slice(i+1,i+3),16),l<128){b+=n[l];continue}if((l&224)===192&&i+3<o&&(h=parseInt(r.slice(i+4,i+6),16),(h&192)===128)){v=l<<6&1984|h&63,v<128?b+="��":b+=String.fromCharCode(v),i+=3;continue}if((l&240)===224&&i+6<o&&(h=parseInt(r.slice(i+4,i+6),16),f=parseInt(r.slice(i+7,i+9),16),(h&192)===128&&(f&192)===128)){v=l<<12&61440|h<<6&4032|f&63,v<2048||v>=55296&&v<=57343?b+="���":b+=String.fromCharCode(v),i+=6;continue}if((l&248)===240&&i+9<o&&(h=parseInt(r.slice(i+4,i+6),16),f=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16),(h&192)===128&&(f&192)===128&&(d&192)===128)){v=l<<18&1835008|h<<12&258048|f<<6&4032|d&63,v<65536||v>1114111?b+="����":(v-=65536,b+=String.fromCharCode(55296+(v>>10),56320+(v&1023))),i+=9;continue}b+="�"}return b})}Ic.defaultChars=";/?:@&=+$,#";Ic.componentChars="";var cst=Ic,ust=function(t){var n="";return n+=t.protocol||"",n+=t.slashes?"//":"",n+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?n+="["+t.hostname+"]":n+=t.hostname||"",n+=t.port?":"+t.port:"",n+=t.pathname||"",n+=t.search||"",n+=t.hash||"",n};function tc(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var hst=/^([a-z0-9.+-]+:)/i,fst=/:[0-9]*$/,dst=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,pst=["<",">",'"',"`"," ","\r",`
`,"	"],gst=["{","}","|","\\","^","`"].concat(pst),_st=["'"].concat(gst),Wg=["%","/","?",";","#"].concat(_st),jg=["/","?","#"],mst=255,Kg=/^[+a-z0-9A-Z_-]{0,63}$/,vst=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Yg={javascript:!0,"javascript:":!0},Qg={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function yst(e,t){if(e&&e instanceof tc)return e;var n=new tc;return n.parse(e,t),n}tc.prototype.parse=function(e,t){var n,r,i,o,l,h=e;if(h=h.trim(),!t&&e.split("#").length===1){var f=dst.exec(h);if(f)return this.pathname=f[1],f[2]&&(this.search=f[2]),this}var d=hst.exec(h);if(d&&(d=d[0],i=d.toLowerCase(),this.protocol=d,h=h.substr(d.length)),(t||d||h.match(/^\/\/[^@\/]+@[^@\/]+/))&&(l=h.substr(0,2)==="//",l&&!(d&&Yg[d])&&(h=h.substr(2),this.slashes=!0)),!Yg[d]&&(l||d&&!Qg[d])){var v=-1;for(n=0;n<jg.length;n++)o=h.indexOf(jg[n]),o!==-1&&(v===-1||o<v)&&(v=o);var b,k;for(v===-1?k=h.lastIndexOf("@"):k=h.lastIndexOf("@",v),k!==-1&&(b=h.slice(0,k),h=h.slice(k+1),this.auth=b),v=-1,n=0;n<Wg.length;n++)o=h.indexOf(Wg[n]),o!==-1&&(v===-1||o<v)&&(v=o);v===-1&&(v=h.length),h[v-1]===":"&&v--;var S=h.slice(0,v);h=h.slice(v),this.parseHost(S),this.hostname=this.hostname||"";var Q=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!Q){var Z=this.hostname.split(/\./);for(n=0,r=Z.length;n<r;n++){var tt=Z[n];if(tt&&!tt.match(Kg)){for(var ut="",rt=0,yt=tt.length;rt<yt;rt++)tt.charCodeAt(rt)>127?ut+="x":ut+=tt[rt];if(!ut.match(Kg)){var wt=Z.slice(0,n),Vt=Z.slice(n+1),_t=tt.match(vst);_t&&(wt.push(_t[1]),Vt.unshift(_t[2])),Vt.length&&(h=Vt.join(".")+h),this.hostname=wt.join(".");break}}}}this.hostname.length>mst&&(this.hostname=""),Q&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var Yt=h.indexOf("#");Yt!==-1&&(this.hash=h.substr(Yt),h=h.slice(0,Yt));var we=h.indexOf("?");return we!==-1&&(this.search=h.substr(we),h=h.slice(0,we)),h&&(this.pathname=h),Qg[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this};tc.prototype.parseHost=function(e){var t=fst.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var bst=yst;wo.encode=ast;wo.decode=cst;wo.format=ust;wo.parse=bst;var fs={},bh,Zg;function Vm(){return Zg||(Zg=1,bh=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),bh}var wh,Xg;function $m(){return Xg||(Xg=1,wh=/[\0-\x1F\x7F-\x9F]/),wh}var xh,Jg;function wst(){return Jg||(Jg=1,xh=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/),xh}var Eh,t_;function qm(){return t_||(t_=1,Eh=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),Eh}var e_;function xst(){return e_||(e_=1,fs.Any=Vm(),fs.Cc=$m(),fs.Cf=wst(),fs.P=Of,fs.Z=qm()),fs}(function(e){function t(vt){return Object.prototype.toString.call(vt)}function n(vt){return t(vt)==="[object String]"}var r=Object.prototype.hasOwnProperty;function i(vt,ke){return r.call(vt,ke)}function o(vt){var ke=Array.prototype.slice.call(arguments,1);return ke.forEach(function(ne){if(ne){if(typeof ne!="object")throw new TypeError(ne+"must be object");Object.keys(ne).forEach(function(on){vt[on]=ne[on]})}}),vt}function l(vt,ke,ne){return[].concat(vt.slice(0,ke),ne,vt.slice(ke+1))}function h(vt){return!(vt>=55296&&vt<=57343||vt>=64976&&vt<=65007||(vt&65535)===65535||(vt&65535)===65534||vt>=0&&vt<=8||vt===11||vt>=14&&vt<=31||vt>=127&&vt<=159||vt>1114111)}function f(vt){if(vt>65535){vt-=65536;var ke=55296+(vt>>10),ne=56320+(vt&1023);return String.fromCharCode(ke,ne)}return String.fromCharCode(vt)}var d=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,v=/&([a-z#][a-z0-9]{1,31});/gi,b=new RegExp(d.source+"|"+v.source,"gi"),k=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,S=Fm;function Q(vt,ke){var ne=0;return i(S,ke)?S[ke]:ke.charCodeAt(0)===35&&k.test(ke)&&(ne=ke[1].toLowerCase()==="x"?parseInt(ke.slice(2),16):parseInt(ke.slice(1),10),h(ne))?f(ne):vt}function Z(vt){return vt.indexOf("\\")<0?vt:vt.replace(d,"$1")}function tt(vt){return vt.indexOf("\\")<0&&vt.indexOf("&")<0?vt:vt.replace(b,function(ke,ne,on){return ne||Q(ke,on)})}var ut=/[&<>"]/,rt=/[&<>"]/g,yt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function wt(vt){return yt[vt]}function Vt(vt){return ut.test(vt)?vt.replace(rt,wt):vt}var _t=/[.?*+^$[\]\\(){}|-]/g;function Yt(vt){return vt.replace(_t,"\\$&")}function we(vt){switch(vt){case 9:case 32:return!0}return!1}function Ue(vt){if(vt>=8192&&vt<=8202)return!0;switch(vt){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var se=Of;function Oe(vt){return se.test(vt)}function pr(vt){switch(vt){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function gr(vt){return vt=vt.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(vt=vt.replace(/ẞ/g,"ß")),vt.toLowerCase().toUpperCase()}e.lib={},e.lib.mdurl=wo,e.lib.ucmicro=xst(),e.assign=o,e.isString=n,e.has=i,e.unescapeMd=Z,e.unescapeAll=tt,e.isValidEntityCode=h,e.fromCodePoint=f,e.escapeHtml=Vt,e.arrayReplaceAt=l,e.isSpace=we,e.isWhiteSpace=Ue,e.isMdAsciiPunct=pr,e.isPunctChar=Oe,e.escapeRE=Yt,e.normalizeReference=gr})(me);var Rc={},Est=function(t,n,r){var i,o,l,h,f=-1,d=t.posMax,v=t.pos;for(t.pos=n+1,i=1;t.pos<d;){if(l=t.src.charCodeAt(t.pos),l===93&&(i--,i===0)){o=!0;break}if(h=t.pos,t.md.inline.skipToken(t),l===91){if(h===t.pos-1)i++;else if(r)return t.pos=v,-1}}return o&&(f=t.pos),t.pos=v,f},n_=me.unescapeAll,Ast=function(t,n,r){var i,o,l=0,h=n,f={ok:!1,pos:0,lines:0,str:""};if(t.charCodeAt(n)===60){for(n++;n<r;){if(i=t.charCodeAt(n),i===10||i===60)return f;if(i===62)return f.pos=n+1,f.str=n_(t.slice(h+1,n)),f.ok=!0,f;if(i===92&&n+1<r){n+=2;continue}n++}return f}for(o=0;n<r&&(i=t.charCodeAt(n),!(i===32||i<32||i===127));){if(i===92&&n+1<r){if(t.charCodeAt(n+1)===32)break;n+=2;continue}if(i===40&&(o++,o>32))return f;if(i===41){if(o===0)break;o--}n++}return h===n||o!==0||(f.str=n_(t.slice(h,n)),f.lines=l,f.pos=n,f.ok=!0),f},Sst=me.unescapeAll,kst=function(t,n,r){var i,o,l=0,h=n,f={ok:!1,pos:0,lines:0,str:""};if(n>=r||(o=t.charCodeAt(n),o!==34&&o!==39&&o!==40))return f;for(n++,o===40&&(o=41);n<r;){if(i=t.charCodeAt(n),i===o)return f.pos=n+1,f.lines=l,f.str=Sst(t.slice(h+1,n)),f.ok=!0,f;if(i===40&&o===41)return f;i===10?l++:i===92&&n+1<r&&(n++,t.charCodeAt(n)===10&&l++),n++}return f};Rc.parseLinkLabel=Est;Rc.parseLinkDestination=Ast;Rc.parseLinkTitle=kst;var Cst=me.assign,Tst=me.unescapeAll,Es=me.escapeHtml,Zr={};Zr.code_inline=function(e,t,n,r,i){var o=e[t];return"<code"+i.renderAttrs(o)+">"+Es(e[t].content)+"</code>"};Zr.code_block=function(e,t,n,r,i){var o=e[t];return"<pre"+i.renderAttrs(o)+"><code>"+Es(e[t].content)+`</code></pre>
`};Zr.fence=function(e,t,n,r,i){var o=e[t],l=o.info?Tst(o.info).trim():"",h="",f="",d,v,b,k,S;return l&&(b=l.split(/(\s+)/g),h=b[0],f=b.slice(2).join("")),n.highlight?d=n.highlight(o.content,h,f)||Es(o.content):d=Es(o.content),d.indexOf("<pre")===0?d+`
`:l?(v=o.attrIndex("class"),k=o.attrs?o.attrs.slice():[],v<0?k.push(["class",n.langPrefix+h]):(k[v]=k[v].slice(),k[v][1]+=" "+n.langPrefix+h),S={attrs:k},"<pre><code"+i.renderAttrs(S)+">"+d+`</code></pre>
`):"<pre><code"+i.renderAttrs(o)+">"+d+`</code></pre>
`};Zr.image=function(e,t,n,r,i){var o=e[t];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(e,t,n)};Zr.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Zr.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Zr.text=function(e,t){return Es(e[t].content)};Zr.html_block=function(e,t){return e[t].content};Zr.html_inline=function(e,t){return e[t].content};function xo(){this.rules=Cst({},Zr)}xo.prototype.renderAttrs=function(t){var n,r,i;if(!t.attrs)return"";for(i="",n=0,r=t.attrs.length;n<r;n++)i+=" "+Es(t.attrs[n][0])+'="'+Es(t.attrs[n][1])+'"';return i};xo.prototype.renderToken=function(t,n,r){var i,o="",l=!1,h=t[n];return h.hidden?"":(h.block&&h.nesting!==-1&&n&&t[n-1].hidden&&(o+=`
`),o+=(h.nesting===-1?"</":"<")+h.tag,o+=this.renderAttrs(h),h.nesting===0&&r.xhtmlOut&&(o+=" /"),h.block&&(l=!0,h.nesting===1&&n+1<t.length&&(i=t[n+1],(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===h.tag)&&(l=!1))),o+=l?`>
`:">",o)};xo.prototype.renderInline=function(e,t,n){for(var r,i="",o=this.rules,l=0,h=e.length;l<h;l++)r=e[l].type,typeof o[r]<"u"?i+=o[r](e,l,t,n,this):i+=this.renderToken(e,l,t);return i};xo.prototype.renderInlineAsText=function(e,t,n){for(var r="",i=0,o=e.length;i<o;i++)e[i].type==="text"?r+=e[i].content:e[i].type==="image"?r+=this.renderInlineAsText(e[i].children,t,n):e[i].type==="softbreak"&&(r+=`
`);return r};xo.prototype.render=function(e,t,n){var r,i,o,l="",h=this.rules;for(r=0,i=e.length;r<i;r++)o=e[r].type,o==="inline"?l+=this.renderInline(e[r].children,t,n):typeof h[o]<"u"?l+=h[e[r].type](e,r,t,n,this):l+=this.renderToken(e,r,t,n);return l};var Ist=xo;function Br(){this.__rules__=[],this.__cache__=null}Br.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Br.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Br.prototype.at=function(e,t,n){var r=this.__find__(e),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Br.prototype.before=function(e,t,n,r){var i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Br.prototype.after=function(e,t,n,r){var i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Br.prototype.push=function(e,t,n){var r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Br.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(r){var i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Br.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Br.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(r){var i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Br.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};var Pf=Br,Rst=/\r\n?|\n/g,Dst=/\0/g,Ost=function(t){var n;n=t.src.replace(Rst,`
`),n=n.replace(Dst,"�"),t.src=n},Pst=function(t){var n;t.inlineMode?(n=new t.Token("inline","",0),n.content=t.src,n.map=[0,1],n.children=[],t.tokens.push(n)):t.md.block.parse(t.src,t.md,t.env,t.tokens)},Mst=function(t){var n=t.tokens,r,i,o;for(i=0,o=n.length;i<o;i++)r=n[i],r.type==="inline"&&t.md.inline.parse(r.content,t.md,t.env,r.children)},Lst=me.arrayReplaceAt;function Nst(e){return/^<a[>\s]/i.test(e)}function Fst(e){return/^<\/a\s*>/i.test(e)}var Vst=function(t){var n,r,i,o,l,h,f,d,v,b,k,S,Q,Z,tt,ut,rt=t.tokens,yt;if(t.md.options.linkify){for(r=0,i=rt.length;r<i;r++)if(!(rt[r].type!=="inline"||!t.md.linkify.pretest(rt[r].content)))for(o=rt[r].children,Q=0,n=o.length-1;n>=0;n--){if(h=o[n],h.type==="link_close"){for(n--;o[n].level!==h.level&&o[n].type!=="link_open";)n--;continue}if(h.type==="html_inline"&&(Nst(h.content)&&Q>0&&Q--,Fst(h.content)&&Q++),!(Q>0)&&h.type==="text"&&t.md.linkify.test(h.content)){for(v=h.content,yt=t.md.linkify.match(v),f=[],S=h.level,k=0,d=0;d<yt.length;d++)Z=yt[d].url,tt=t.md.normalizeLink(Z),t.md.validateLink(tt)&&(ut=yt[d].text,yt[d].schema?yt[d].schema==="mailto:"&&!/^mailto:/i.test(ut)?ut=t.md.normalizeLinkText("mailto:"+ut).replace(/^mailto:/,""):ut=t.md.normalizeLinkText(ut):ut=t.md.normalizeLinkText("http://"+ut).replace(/^http:\/\//,""),b=yt[d].index,b>k&&(l=new t.Token("text","",0),l.content=v.slice(k,b),l.level=S,f.push(l)),l=new t.Token("link_open","a",1),l.attrs=[["href",tt]],l.level=S++,l.markup="linkify",l.info="auto",f.push(l),l=new t.Token("text","",0),l.content=ut,l.level=S,f.push(l),l=new t.Token("link_close","a",-1),l.level=--S,l.markup="linkify",l.info="auto",f.push(l),k=yt[d].lastIndex);k<v.length&&(l=new t.Token("text","",0),l.content=v.slice(k),l.level=S,f.push(l)),rt[r].children=o=Lst(o,n,f)}}}},Bm=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,$st=/\((c|tm|r|p)\)/i,qst=/\((c|tm|r|p)\)/ig,Bst={c:"©",r:"®",p:"§",tm:"™"};function Ust(e,t){return Bst[t.toLowerCase()]}function zst(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)n=e[t],n.type==="text"&&!r&&(n.content=n.content.replace(qst,Ust)),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}function Hst(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)n=e[t],n.type==="text"&&!r&&Bm.test(n.content)&&(n.content=n.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}var Gst=function(t){var n;if(t.md.options.typographer)for(n=t.tokens.length-1;n>=0;n--)t.tokens[n].type==="inline"&&($st.test(t.tokens[n].content)&&zst(t.tokens[n].children),Bm.test(t.tokens[n].content)&&Hst(t.tokens[n].children))},r_=me.isWhiteSpace,i_=me.isPunctChar,s_=me.isMdAsciiPunct,Wst=/['"]/,o_=/['"]/g,a_="’";function Fl(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}function jst(e,t){var n,r,i,o,l,h,f,d,v,b,k,S,Q,Z,tt,ut,rt,yt,wt,Vt,_t;for(wt=[],n=0;n<e.length;n++){for(r=e[n],f=e[n].level,rt=wt.length-1;rt>=0&&!(wt[rt].level<=f);rt--);if(wt.length=rt+1,r.type==="text"){i=r.content,l=0,h=i.length;t:for(;l<h&&(o_.lastIndex=l,o=o_.exec(i),!!o);){if(tt=ut=!0,l=o.index+1,yt=o[0]==="'",v=32,o.index-1>=0)v=i.charCodeAt(o.index-1);else for(rt=n-1;rt>=0&&!(e[rt].type==="softbreak"||e[rt].type==="hardbreak");rt--)if(e[rt].content){v=e[rt].content.charCodeAt(e[rt].content.length-1);break}if(b=32,l<h)b=i.charCodeAt(l);else for(rt=n+1;rt<e.length&&!(e[rt].type==="softbreak"||e[rt].type==="hardbreak");rt++)if(e[rt].content){b=e[rt].content.charCodeAt(0);break}if(k=s_(v)||i_(String.fromCharCode(v)),S=s_(b)||i_(String.fromCharCode(b)),Q=r_(v),Z=r_(b),Z?tt=!1:S&&(Q||k||(tt=!1)),Q?ut=!1:k&&(Z||S||(ut=!1)),b===34&&o[0]==='"'&&v>=48&&v<=57&&(ut=tt=!1),tt&&ut&&(tt=k,ut=S),!tt&&!ut){yt&&(r.content=Fl(r.content,o.index,a_));continue}if(ut){for(rt=wt.length-1;rt>=0&&(d=wt[rt],!(wt[rt].level<f));rt--)if(d.single===yt&&wt[rt].level===f){d=wt[rt],yt?(Vt=t.md.options.quotes[2],_t=t.md.options.quotes[3]):(Vt=t.md.options.quotes[0],_t=t.md.options.quotes[1]),r.content=Fl(r.content,o.index,_t),e[d.token].content=Fl(e[d.token].content,d.pos,Vt),l+=_t.length-1,d.token===n&&(l+=Vt.length-1),i=r.content,h=i.length,wt.length=rt;continue t}}tt?wt.push({token:n,pos:o.index,single:yt,level:f}):ut&&yt&&(r.content=Fl(r.content,o.index,a_))}}}}var Kst=function(t){var n;if(t.md.options.typographer)for(n=t.tokens.length-1;n>=0;n--)t.tokens[n].type!=="inline"||!Wst.test(t.tokens[n].content)||jst(t.tokens[n].children,t)};function Eo(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Eo.prototype.attrIndex=function(t){var n,r,i;if(!this.attrs)return-1;for(n=this.attrs,r=0,i=n.length;r<i;r++)if(n[r][0]===t)return r;return-1};Eo.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Eo.prototype.attrSet=function(t,n){var r=this.attrIndex(t),i=[t,n];r<0?this.attrPush(i):this.attrs[r]=i};Eo.prototype.attrGet=function(t){var n=this.attrIndex(t),r=null;return n>=0&&(r=this.attrs[n][1]),r};Eo.prototype.attrJoin=function(t,n){var r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};var Mf=Eo,Yst=Mf;function Um(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Um.prototype.Token=Yst;var Qst=Um,Zst=Pf,Ah=[["normalize",Ost],["block",Pst],["inline",Mst],["linkify",Vst],["replacements",Gst],["smartquotes",Kst]];function Lf(){this.ruler=new Zst;for(var e=0;e<Ah.length;e++)this.ruler.push(Ah[e][0],Ah[e][1])}Lf.prototype.process=function(e){var t,n,r;for(r=this.ruler.getRules(""),t=0,n=r.length;t<n;t++)r[t](e)};Lf.prototype.State=Qst;var Xst=Lf,Sh=me.isSpace;function kh(e,t){var n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.substr(n,r-n)}function l_(e){var t=[],n=0,r=e.length,i,o=!1,l=0,h="";for(i=e.charCodeAt(n);n<r;)i===124&&(o?(h+=e.substring(l,n-1),l=n):(t.push(h+e.substring(l,n)),h="",l=n+1)),o=i===92,n++,i=e.charCodeAt(n);return t.push(h+e.substring(l)),t}var Jst=function(t,n,r,i){var o,l,h,f,d,v,b,k,S,Q,Z,tt,ut,rt,yt,wt,Vt,_t;if(n+2>r||(v=n+1,t.sCount[v]<t.blkIndent)||t.sCount[v]-t.blkIndent>=4||(h=t.bMarks[v]+t.tShift[v],h>=t.eMarks[v])||(Vt=t.src.charCodeAt(h++),Vt!==124&&Vt!==45&&Vt!==58)||h>=t.eMarks[v]||(_t=t.src.charCodeAt(h++),_t!==124&&_t!==45&&_t!==58&&!Sh(_t))||Vt===45&&Sh(_t))return!1;for(;h<t.eMarks[v];){if(o=t.src.charCodeAt(h),o!==124&&o!==45&&o!==58&&!Sh(o))return!1;h++}for(l=kh(t,n+1),b=l.split("|"),Q=[],f=0;f<b.length;f++){if(Z=b[f].trim(),!Z){if(f===0||f===b.length-1)continue;return!1}if(!/^:?-+:?$/.test(Z))return!1;Z.charCodeAt(Z.length-1)===58?Q.push(Z.charCodeAt(0)===58?"center":"right"):Z.charCodeAt(0)===58?Q.push("left"):Q.push("")}if(l=kh(t,n).trim(),l.indexOf("|")===-1||t.sCount[n]-t.blkIndent>=4||(b=l_(l),b.length&&b[0]===""&&b.shift(),b.length&&b[b.length-1]===""&&b.pop(),k=b.length,k===0||k!==Q.length))return!1;if(i)return!0;for(rt=t.parentType,t.parentType="table",wt=t.md.block.ruler.getRules("blockquote"),S=t.push("table_open","table",1),S.map=tt=[n,0],S=t.push("thead_open","thead",1),S.map=[n,n+1],S=t.push("tr_open","tr",1),S.map=[n,n+1],f=0;f<b.length;f++)S=t.push("th_open","th",1),Q[f]&&(S.attrs=[["style","text-align:"+Q[f]]]),S=t.push("inline","",0),S.content=b[f].trim(),S.children=[],S=t.push("th_close","th",-1);for(S=t.push("tr_close","tr",-1),S=t.push("thead_close","thead",-1),v=n+2;v<r&&!(t.sCount[v]<t.blkIndent);v++){for(yt=!1,f=0,d=wt.length;f<d;f++)if(wt[f](t,v,r,!0)){yt=!0;break}if(yt||(l=kh(t,v).trim(),!l)||t.sCount[v]-t.blkIndent>=4)break;for(b=l_(l),b.length&&b[0]===""&&b.shift(),b.length&&b[b.length-1]===""&&b.pop(),v===n+2&&(S=t.push("tbody_open","tbody",1),S.map=ut=[n+2,0]),S=t.push("tr_open","tr",1),S.map=[v,v+1],f=0;f<k;f++)S=t.push("td_open","td",1),Q[f]&&(S.attrs=[["style","text-align:"+Q[f]]]),S=t.push("inline","",0),S.content=b[f]?b[f].trim():"",S.children=[],S=t.push("td_close","td",-1);S=t.push("tr_close","tr",-1)}return ut&&(S=t.push("tbody_close","tbody",-1),ut[1]=v),S=t.push("table_close","table",-1),tt[1]=v,t.parentType=rt,t.line=v,!0},tot=function(t,n,r){var i,o,l;if(t.sCount[n]-t.blkIndent<4)return!1;for(o=i=n+1;i<r;){if(t.isEmpty(i)){i++;continue}if(t.sCount[i]-t.blkIndent>=4){i++,o=i;continue}break}return t.line=o,l=t.push("code_block","code",0),l.content=t.getLines(n,o,4+t.blkIndent,!1)+`
`,l.map=[n,t.line],!0},eot=function(t,n,r,i){var o,l,h,f,d,v,b,k=!1,S=t.bMarks[n]+t.tShift[n],Q=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||S+3>Q||(o=t.src.charCodeAt(S),o!==126&&o!==96)||(d=S,S=t.skipChars(S,o),l=S-d,l<3)||(b=t.src.slice(d,S),h=t.src.slice(S,Q),o===96&&h.indexOf(String.fromCharCode(o))>=0))return!1;if(i)return!0;for(f=n;f++,!(f>=r||(S=d=t.bMarks[f]+t.tShift[f],Q=t.eMarks[f],S<Q&&t.sCount[f]<t.blkIndent));)if(t.src.charCodeAt(S)===o&&!(t.sCount[f]-t.blkIndent>=4)&&(S=t.skipChars(S,o),!(S-d<l)&&(S=t.skipSpaces(S),!(S<Q)))){k=!0;break}return l=t.sCount[n],t.line=f+(k?1:0),v=t.push("fence","code",0),v.info=h,v.content=t.getLines(n+1,f,l,!0),v.markup=b,v.map=[n,t.line],!0},c_=me.isSpace,not=function(t,n,r,i){var o,l,h,f,d,v,b,k,S,Q,Z,tt,ut,rt,yt,wt,Vt,_t,Yt,we,Ue=t.lineMax,se=t.bMarks[n]+t.tShift[n],Oe=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||t.src.charCodeAt(se++)!==62)return!1;if(i)return!0;for(f=S=t.sCount[n]+1,t.src.charCodeAt(se)===32?(se++,f++,S++,o=!1,wt=!0):t.src.charCodeAt(se)===9?(wt=!0,(t.bsCount[n]+S)%4===3?(se++,f++,S++,o=!1):o=!0):wt=!1,Q=[t.bMarks[n]],t.bMarks[n]=se;se<Oe&&(l=t.src.charCodeAt(se),c_(l));){l===9?S+=4-(S+t.bsCount[n]+(o?1:0))%4:S++;se++}for(Z=[t.bsCount[n]],t.bsCount[n]=t.sCount[n]+1+(wt?1:0),v=se>=Oe,rt=[t.sCount[n]],t.sCount[n]=S-f,yt=[t.tShift[n]],t.tShift[n]=se-t.bMarks[n],_t=t.md.block.ruler.getRules("blockquote"),ut=t.parentType,t.parentType="blockquote",k=n+1;k<r&&(we=t.sCount[k]<t.blkIndent,se=t.bMarks[k]+t.tShift[k],Oe=t.eMarks[k],!(se>=Oe));k++){if(t.src.charCodeAt(se++)===62&&!we){for(f=S=t.sCount[k]+1,t.src.charCodeAt(se)===32?(se++,f++,S++,o=!1,wt=!0):t.src.charCodeAt(se)===9?(wt=!0,(t.bsCount[k]+S)%4===3?(se++,f++,S++,o=!1):o=!0):wt=!1,Q.push(t.bMarks[k]),t.bMarks[k]=se;se<Oe&&(l=t.src.charCodeAt(se),c_(l));){l===9?S+=4-(S+t.bsCount[k]+(o?1:0))%4:S++;se++}v=se>=Oe,Z.push(t.bsCount[k]),t.bsCount[k]=t.sCount[k]+1+(wt?1:0),rt.push(t.sCount[k]),t.sCount[k]=S-f,yt.push(t.tShift[k]),t.tShift[k]=se-t.bMarks[k];continue}if(v)break;for(Vt=!1,h=0,d=_t.length;h<d;h++)if(_t[h](t,k,r,!0)){Vt=!0;break}if(Vt){t.lineMax=k,t.blkIndent!==0&&(Q.push(t.bMarks[k]),Z.push(t.bsCount[k]),yt.push(t.tShift[k]),rt.push(t.sCount[k]),t.sCount[k]-=t.blkIndent);break}Q.push(t.bMarks[k]),Z.push(t.bsCount[k]),yt.push(t.tShift[k]),rt.push(t.sCount[k]),t.sCount[k]=-1}for(tt=t.blkIndent,t.blkIndent=0,Yt=t.push("blockquote_open","blockquote",1),Yt.markup=">",Yt.map=b=[n,0],t.md.block.tokenize(t,n,k),Yt=t.push("blockquote_close","blockquote",-1),Yt.markup=">",t.lineMax=Ue,t.parentType=ut,b[1]=t.line,h=0;h<yt.length;h++)t.bMarks[h+n]=Q[h],t.tShift[h+n]=yt[h],t.sCount[h+n]=rt[h],t.bsCount[h+n]=Z[h];return t.blkIndent=tt,!0},rot=me.isSpace,iot=function(t,n,r,i){var o,l,h,f,d=t.bMarks[n]+t.tShift[n],v=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||(o=t.src.charCodeAt(d++),o!==42&&o!==45&&o!==95))return!1;for(l=1;d<v;){if(h=t.src.charCodeAt(d++),h!==o&&!rot(h))return!1;h===o&&l++}return l<3?!1:(i||(t.line=n+1,f=t.push("hr","hr",0),f.map=[n,t.line],f.markup=Array(l+1).join(String.fromCharCode(o))),!0)},zm=me.isSpace;function u_(e,t){var n,r,i,o;return r=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],n=e.src.charCodeAt(r++),n!==42&&n!==45&&n!==43||r<i&&(o=e.src.charCodeAt(r),!zm(o))?-1:r}function h_(e,t){var n,r=e.bMarks[t]+e.tShift[t],i=r,o=e.eMarks[t];if(i+1>=o||(n=e.src.charCodeAt(i++),n<48||n>57))return-1;for(;;){if(i>=o)return-1;if(n=e.src.charCodeAt(i++),n>=48&&n<=57){if(i-r>=10)return-1;continue}if(n===41||n===46)break;return-1}return i<o&&(n=e.src.charCodeAt(i),!zm(n))?-1:i}function sot(e,t){var n,r,i=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===i&&e.tokens[n].type==="paragraph_open"&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}var oot=function(t,n,r,i){var o,l,h,f,d,v,b,k,S,Q,Z,tt,ut,rt,yt,wt,Vt,_t,Yt,we,Ue,se,Oe,pr,gr,vt,ke,ne,on=!1,ir=!0;if(t.sCount[n]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[n]-t.listIndent>=4&&t.sCount[n]<t.blkIndent)return!1;if(i&&t.parentType==="paragraph"&&t.sCount[n]>=t.blkIndent&&(on=!0),(Oe=h_(t,n))>=0){if(b=!0,gr=t.bMarks[n]+t.tShift[n],ut=Number(t.src.slice(gr,Oe-1)),on&&ut!==1)return!1}else if((Oe=u_(t,n))>=0)b=!1;else return!1;if(on&&t.skipSpaces(Oe)>=t.eMarks[n])return!1;if(tt=t.src.charCodeAt(Oe-1),i)return!0;for(Z=t.tokens.length,b?(ne=t.push("ordered_list_open","ol",1),ut!==1&&(ne.attrs=[["start",ut]])):ne=t.push("bullet_list_open","ul",1),ne.map=Q=[n,0],ne.markup=String.fromCharCode(tt),yt=n,pr=!1,ke=t.md.block.ruler.getRules("list"),_t=t.parentType,t.parentType="list";yt<r;){for(se=Oe,rt=t.eMarks[yt],v=wt=t.sCount[yt]+Oe-(t.bMarks[n]+t.tShift[n]);se<rt;){if(o=t.src.charCodeAt(se),o===9)wt+=4-(wt+t.bsCount[yt])%4;else if(o===32)wt++;else break;se++}if(l=se,l>=rt?d=1:d=wt-v,d>4&&(d=1),f=v+d,ne=t.push("list_item_open","li",1),ne.markup=String.fromCharCode(tt),ne.map=k=[n,0],b&&(ne.info=t.src.slice(gr,Oe-1)),Ue=t.tight,we=t.tShift[n],Yt=t.sCount[n],Vt=t.listIndent,t.listIndent=t.blkIndent,t.blkIndent=f,t.tight=!0,t.tShift[n]=l-t.bMarks[n],t.sCount[n]=wt,l>=rt&&t.isEmpty(n+1)?t.line=Math.min(t.line+2,r):t.md.block.tokenize(t,n,r,!0),(!t.tight||pr)&&(ir=!1),pr=t.line-n>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=Vt,t.tShift[n]=we,t.sCount[n]=Yt,t.tight=Ue,ne=t.push("list_item_close","li",-1),ne.markup=String.fromCharCode(tt),yt=n=t.line,k[1]=yt,l=t.bMarks[n],yt>=r||t.sCount[yt]<t.blkIndent||t.sCount[n]-t.blkIndent>=4)break;for(vt=!1,h=0,S=ke.length;h<S;h++)if(ke[h](t,yt,r,!0)){vt=!0;break}if(vt)break;if(b){if(Oe=h_(t,yt),Oe<0)break;gr=t.bMarks[yt]+t.tShift[yt]}else if(Oe=u_(t,yt),Oe<0)break;if(tt!==t.src.charCodeAt(Oe-1))break}return b?ne=t.push("ordered_list_close","ol",-1):ne=t.push("bullet_list_close","ul",-1),ne.markup=String.fromCharCode(tt),Q[1]=yt,t.line=yt,t.parentType=_t,ir&&sot(t,Z),!0},aot=me.normalizeReference,Vl=me.isSpace,lot=function(t,n,r,i){var o,l,h,f,d,v,b,k,S,Q,Z,tt,ut,rt,yt,wt,Vt=0,_t=t.bMarks[n]+t.tShift[n],Yt=t.eMarks[n],we=n+1;if(t.sCount[n]-t.blkIndent>=4||t.src.charCodeAt(_t)!==91)return!1;for(;++_t<Yt;)if(t.src.charCodeAt(_t)===93&&t.src.charCodeAt(_t-1)!==92){if(_t+1===Yt||t.src.charCodeAt(_t+1)!==58)return!1;break}for(f=t.lineMax,yt=t.md.block.ruler.getRules("reference"),Q=t.parentType,t.parentType="reference";we<f&&!t.isEmpty(we);we++)if(!(t.sCount[we]-t.blkIndent>3)&&!(t.sCount[we]<0)){for(rt=!1,v=0,b=yt.length;v<b;v++)if(yt[v](t,we,f,!0)){rt=!0;break}if(rt)break}for(ut=t.getLines(n,we,t.blkIndent,!1).trim(),Yt=ut.length,_t=1;_t<Yt;_t++){if(o=ut.charCodeAt(_t),o===91)return!1;if(o===93){S=_t;break}else o===10?Vt++:o===92&&(_t++,_t<Yt&&ut.charCodeAt(_t)===10&&Vt++)}if(S<0||ut.charCodeAt(S+1)!==58)return!1;for(_t=S+2;_t<Yt;_t++)if(o=ut.charCodeAt(_t),o===10)Vt++;else if(!Vl(o))break;if(Z=t.md.helpers.parseLinkDestination(ut,_t,Yt),!Z.ok||(d=t.md.normalizeLink(Z.str),!t.md.validateLink(d)))return!1;for(_t=Z.pos,Vt+=Z.lines,l=_t,h=Vt,tt=_t;_t<Yt;_t++)if(o=ut.charCodeAt(_t),o===10)Vt++;else if(!Vl(o))break;for(Z=t.md.helpers.parseLinkTitle(ut,_t,Yt),_t<Yt&&tt!==_t&&Z.ok?(wt=Z.str,_t=Z.pos,Vt+=Z.lines):(wt="",_t=l,Vt=h);_t<Yt&&(o=ut.charCodeAt(_t),!!Vl(o));)_t++;if(_t<Yt&&ut.charCodeAt(_t)!==10&&wt)for(wt="",_t=l,Vt=h;_t<Yt&&(o=ut.charCodeAt(_t),!!Vl(o));)_t++;return _t<Yt&&ut.charCodeAt(_t)!==10||(k=aot(ut.slice(1,S)),!k)?!1:(i||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[k]>"u"&&(t.env.references[k]={title:wt,href:d}),t.parentType=Q,t.line=n+Vt+1),!0)},cot=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Dc={},uot="[a-zA-Z_:][a-zA-Z0-9:._-]*",hot="[^\"'=<>`\\x00-\\x20]+",fot="'[^']*'",dot='"[^"]*"',pot="(?:"+hot+"|"+fot+"|"+dot+")",got="(?:\\s+"+uot+"(?:\\s*=\\s*"+pot+")?)",Hm="<[A-Za-z][A-Za-z0-9\\-]*"+got+"*\\s*\\/?>",Gm="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",_ot="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",mot="<[?][\\s\\S]*?[?]>",vot="<![A-Z]+\\s+[^>]*>",yot="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",bot=new RegExp("^(?:"+Hm+"|"+Gm+"|"+_ot+"|"+mot+"|"+vot+"|"+yot+")"),wot=new RegExp("^(?:"+Hm+"|"+Gm+")");Dc.HTML_TAG_RE=bot;Dc.HTML_OPEN_CLOSE_TAG_RE=wot;var xot=cot,Eot=Dc.HTML_OPEN_CLOSE_TAG_RE,eo=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+xot.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Eot.source+"\\s*$"),/^$/,!1]],Aot=function(t,n,r,i){var o,l,h,f,d=t.bMarks[n]+t.tShift[n],v=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(d)!==60)return!1;for(f=t.src.slice(d,v),o=0;o<eo.length&&!eo[o][0].test(f);o++);if(o===eo.length)return!1;if(i)return eo[o][2];if(l=n+1,!eo[o][1].test(f)){for(;l<r&&!(t.sCount[l]<t.blkIndent);l++)if(d=t.bMarks[l]+t.tShift[l],v=t.eMarks[l],f=t.src.slice(d,v),eo[o][1].test(f)){f.length!==0&&l++;break}}return t.line=l,h=t.push("html_block","",0),h.map=[n,l],h.content=t.getLines(n,l,t.blkIndent,!0),!0},f_=me.isSpace,Sot=function(t,n,r,i){var o,l,h,f,d=t.bMarks[n]+t.tShift[n],v=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||(o=t.src.charCodeAt(d),o!==35||d>=v))return!1;for(l=1,o=t.src.charCodeAt(++d);o===35&&d<v&&l<=6;)l++,o=t.src.charCodeAt(++d);return l>6||d<v&&!f_(o)?!1:(i||(v=t.skipSpacesBack(v,d),h=t.skipCharsBack(v,35,d),h>d&&f_(t.src.charCodeAt(h-1))&&(v=h),t.line=n+1,f=t.push("heading_open","h"+String(l),1),f.markup="########".slice(0,l),f.map=[n,t.line],f=t.push("inline","",0),f.content=t.src.slice(d,v).trim(),f.map=[n,t.line],f.children=[],f=t.push("heading_close","h"+String(l),-1),f.markup="########".slice(0,l)),!0)},kot=function(t,n,r){var i,o,l,h,f,d,v,b,k,S=n+1,Q,Z=t.md.block.ruler.getRules("paragraph");if(t.sCount[n]-t.blkIndent>=4)return!1;for(Q=t.parentType,t.parentType="paragraph";S<r&&!t.isEmpty(S);S++)if(!(t.sCount[S]-t.blkIndent>3)){if(t.sCount[S]>=t.blkIndent&&(d=t.bMarks[S]+t.tShift[S],v=t.eMarks[S],d<v&&(k=t.src.charCodeAt(d),(k===45||k===61)&&(d=t.skipChars(d,k),d=t.skipSpaces(d),d>=v)))){b=k===61?1:2;break}if(!(t.sCount[S]<0)){for(o=!1,l=0,h=Z.length;l<h;l++)if(Z[l](t,S,r,!0)){o=!0;break}if(o)break}}return b?(i=t.getLines(n,S,t.blkIndent,!1).trim(),t.line=S+1,f=t.push("heading_open","h"+String(b),1),f.markup=String.fromCharCode(k),f.map=[n,t.line],f=t.push("inline","",0),f.content=i,f.map=[n,t.line-1],f.children=[],f=t.push("heading_close","h"+String(b),-1),f.markup=String.fromCharCode(k),t.parentType=Q,!0):!1},Cot=function(t,n){var r,i,o,l,h,f,d=n+1,v=t.md.block.ruler.getRules("paragraph"),b=t.lineMax;for(f=t.parentType,t.parentType="paragraph";d<b&&!t.isEmpty(d);d++)if(!(t.sCount[d]-t.blkIndent>3)&&!(t.sCount[d]<0)){for(i=!1,o=0,l=v.length;o<l;o++)if(v[o](t,d,b,!0)){i=!0;break}if(i)break}return r=t.getLines(n,d,t.blkIndent,!1).trim(),t.line=d,h=t.push("paragraph_open","p",1),h.map=[n,t.line],h=t.push("inline","",0),h.content=r,h.map=[n,t.line],h.children=[],h=t.push("paragraph_close","p",-1),t.parentType=f,!0},Wm=Mf,Oc=me.isSpace;function Xr(e,t,n,r){var i,o,l,h,f,d,v,b;for(this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",o=this.src,b=!1,l=h=d=v=0,f=o.length;h<f;h++){if(i=o.charCodeAt(h),!b)if(Oc(i)){d++,i===9?v+=4-v%4:v++;continue}else b=!0;(i===10||h===f-1)&&(i!==10&&h++,this.bMarks.push(l),this.eMarks.push(h),this.tShift.push(d),this.sCount.push(v),this.bsCount.push(0),b=!1,d=0,v=0,l=h+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Xr.prototype.push=function(e,t,n){var r=new Wm(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Xr.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Xr.prototype.skipEmptyLines=function(t){for(var n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Xr.prototype.skipSpaces=function(t){for(var n,r=this.src.length;t<r&&(n=this.src.charCodeAt(t),!!Oc(n));t++);return t};Xr.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Oc(this.src.charCodeAt(--t)))return t+1;return t};Xr.prototype.skipChars=function(t,n){for(var r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Xr.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Xr.prototype.getLines=function(t,n,r,i){var o,l,h,f,d,v,b,k=t;if(t>=n)return"";for(v=new Array(n-t),o=0;k<n;k++,o++){for(l=0,b=f=this.bMarks[k],k+1<n||i?d=this.eMarks[k]+1:d=this.eMarks[k];f<d&&l<r;){if(h=this.src.charCodeAt(f),Oc(h))h===9?l+=4-(l+this.bsCount[k])%4:l++;else if(f-b<this.tShift[k])l++;else break;f++}l>r?v[o]=new Array(l-r+1).join(" ")+this.src.slice(f,d):v[o]=this.src.slice(f,d)}return v.join("")};Xr.prototype.Token=Wm;var Tot=Xr,Iot=Pf,$l=[["table",Jst,["paragraph","reference"]],["code",tot],["fence",eot,["paragraph","reference","blockquote","list"]],["blockquote",not,["paragraph","reference","blockquote","list"]],["hr",iot,["paragraph","reference","blockquote","list"]],["list",oot,["paragraph","reference","blockquote"]],["reference",lot],["html_block",Aot,["paragraph","reference","blockquote"]],["heading",Sot,["paragraph","reference","blockquote"]],["lheading",kot],["paragraph",Cot]];function Pc(){this.ruler=new Iot;for(var e=0;e<$l.length;e++)this.ruler.push($l[e][0],$l[e][1],{alt:($l[e][2]||[]).slice()})}Pc.prototype.tokenize=function(e,t,n){for(var r,i,o=this.ruler.getRules(""),l=o.length,h=t,f=!1,d=e.md.options.maxNesting;h<n&&(e.line=h=e.skipEmptyLines(h),!(h>=n||e.sCount[h]<e.blkIndent));){if(e.level>=d){e.line=n;break}for(i=0;i<l&&(r=o[i](e,h,n,!1),!r);i++);e.tight=!f,e.isEmpty(e.line-1)&&(f=!0),h=e.line,h<n&&e.isEmpty(h)&&(f=!0,h++,e.line=h)}};Pc.prototype.parse=function(e,t,n,r){var i;e&&(i=new this.State(e,t,n,r),this.tokenize(i,i.line,i.lineMax))};Pc.prototype.State=Tot;var Rot=Pc;function Dot(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var Oot=function(t,n){for(var r=t.pos;r<t.posMax&&!Dot(t.src.charCodeAt(r));)r++;return r===t.pos?!1:(n||(t.pending+=t.src.slice(t.pos,r)),t.pos=r,!0)},Pot=me.isSpace,Mot=function(t,n){var r,i,o,l=t.pos;if(t.src.charCodeAt(l)!==10)return!1;if(r=t.pending.length-1,i=t.posMax,!n)if(r>=0&&t.pending.charCodeAt(r)===32)if(r>=1&&t.pending.charCodeAt(r-1)===32){for(o=r-1;o>=1&&t.pending.charCodeAt(o-1)===32;)o--;t.pending=t.pending.slice(0,o),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(l++;l<i&&Pot(t.src.charCodeAt(l));)l++;return t.pos=l,!0},Lot=me.isSpace,Nf=[];for(var d_=0;d_<256;d_++)Nf.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Nf[e.charCodeAt(0)]=1});var Not=function(t,n){var r,i=t.pos,o=t.posMax;if(t.src.charCodeAt(i)!==92)return!1;if(i++,i<o){if(r=t.src.charCodeAt(i),r<256&&Nf[r]!==0)return n||(t.pending+=t.src[i]),t.pos+=2,!0;if(r===10){for(n||t.push("hardbreak","br",0),i++;i<o&&(r=t.src.charCodeAt(i),!!Lot(r));)i++;return t.pos=i,!0}}return n||(t.pending+="\\"),t.pos++,!0},Fot=function(t,n){var r,i,o,l,h,f,d,v,b=t.pos,k=t.src.charCodeAt(b);if(k!==96)return!1;for(r=b,b++,i=t.posMax;b<i&&t.src.charCodeAt(b)===96;)b++;if(o=t.src.slice(r,b),d=o.length,t.backticksScanned&&(t.backticks[d]||0)<=r)return n||(t.pending+=o),t.pos+=d,!0;for(h=f=b;(h=t.src.indexOf("`",f))!==-1;){for(f=h+1;f<i&&t.src.charCodeAt(f)===96;)f++;if(v=f-h,v===d)return n||(l=t.push("code_inline","code",0),l.markup=o,l.content=t.src.slice(b,h).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),t.pos=f,!0;t.backticks[v]=h}return t.backticksScanned=!0,n||(t.pending+=o),t.pos+=d,!0},Mc={};Mc.tokenize=function(t,n){var r,i,o,l,h,f=t.pos,d=t.src.charCodeAt(f);if(n||d!==126||(i=t.scanDelims(t.pos,!0),l=i.length,h=String.fromCharCode(d),l<2))return!1;for(l%2&&(o=t.push("text","",0),o.content=h,l--),r=0;r<l;r+=2)o=t.push("text","",0),o.content=h+h,t.delimiters.push({marker:d,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0};function p_(e,t){var n,r,i,o,l,h=[],f=t.length;for(n=0;n<f;n++)i=t[n],i.marker===126&&i.end!==-1&&(o=t[i.end],l=e.tokens[i.token],l.type="s_open",l.tag="s",l.nesting=1,l.markup="~~",l.content="",l=e.tokens[o.token],l.type="s_close",l.tag="s",l.nesting=-1,l.markup="~~",l.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&h.push(o.token-1));for(;h.length;){for(n=h.pop(),r=n+1;r<e.tokens.length&&e.tokens[r].type==="s_close";)r++;r--,n!==r&&(l=e.tokens[r],e.tokens[r]=e.tokens[n],e.tokens[n]=l)}}Mc.postProcess=function(t){var n,r=t.tokens_meta,i=t.tokens_meta.length;for(p_(t,t.delimiters),n=0;n<i;n++)r[n]&&r[n].delimiters&&p_(t,r[n].delimiters)};var Lc={};Lc.tokenize=function(t,n){var r,i,o,l=t.pos,h=t.src.charCodeAt(l);if(n||h!==95&&h!==42)return!1;for(i=t.scanDelims(t.pos,h===42),r=0;r<i.length;r++)o=t.push("text","",0),o.content=String.fromCharCode(h),t.delimiters.push({marker:h,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0};function g_(e,t){var n,r,i,o,l,h,f=t.length;for(n=f-1;n>=0;n--)r=t[n],!(r.marker!==95&&r.marker!==42)&&r.end!==-1&&(i=t[r.end],h=n>0&&t[n-1].end===r.end+1&&t[n-1].marker===r.marker&&t[n-1].token===r.token-1&&t[r.end+1].token===i.token+1,l=String.fromCharCode(r.marker),o=e.tokens[r.token],o.type=h?"strong_open":"em_open",o.tag=h?"strong":"em",o.nesting=1,o.markup=h?l+l:l,o.content="",o=e.tokens[i.token],o.type=h?"strong_close":"em_close",o.tag=h?"strong":"em",o.nesting=-1,o.markup=h?l+l:l,o.content="",h&&(e.tokens[t[n-1].token].content="",e.tokens[t[r.end+1].token].content="",n--))}Lc.postProcess=function(t){var n,r=t.tokens_meta,i=t.tokens_meta.length;for(g_(t,t.delimiters),n=0;n<i;n++)r[n]&&r[n].delimiters&&g_(t,r[n].delimiters)};var Vot=me.normalizeReference,Ch=me.isSpace,$ot=function(t,n){var r,i,o,l,h,f,d,v,b,k="",S="",Q=t.pos,Z=t.posMax,tt=t.pos,ut=!0;if(t.src.charCodeAt(t.pos)!==91||(h=t.pos+1,l=t.md.helpers.parseLinkLabel(t,t.pos,!0),l<0))return!1;if(f=l+1,f<Z&&t.src.charCodeAt(f)===40){for(ut=!1,f++;f<Z&&(i=t.src.charCodeAt(f),!(!Ch(i)&&i!==10));f++);if(f>=Z)return!1;if(tt=f,d=t.md.helpers.parseLinkDestination(t.src,f,t.posMax),d.ok){for(k=t.md.normalizeLink(d.str),t.md.validateLink(k)?f=d.pos:k="",tt=f;f<Z&&(i=t.src.charCodeAt(f),!(!Ch(i)&&i!==10));f++);if(d=t.md.helpers.parseLinkTitle(t.src,f,t.posMax),f<Z&&tt!==f&&d.ok)for(S=d.str,f=d.pos;f<Z&&(i=t.src.charCodeAt(f),!(!Ch(i)&&i!==10));f++);}(f>=Z||t.src.charCodeAt(f)!==41)&&(ut=!0),f++}if(ut){if(typeof t.env.references>"u")return!1;if(f<Z&&t.src.charCodeAt(f)===91?(tt=f+1,f=t.md.helpers.parseLinkLabel(t,f),f>=0?o=t.src.slice(tt,f++):f=l+1):f=l+1,o||(o=t.src.slice(h,l)),v=t.env.references[Vot(o)],!v)return t.pos=Q,!1;k=v.href,S=v.title}return n||(t.pos=h,t.posMax=l,b=t.push("link_open","a",1),b.attrs=r=[["href",k]],S&&r.push(["title",S]),t.md.inline.tokenize(t),b=t.push("link_close","a",-1)),t.pos=f,t.posMax=Z,!0},qot=me.normalizeReference,Th=me.isSpace,Bot=function(t,n){var r,i,o,l,h,f,d,v,b,k,S,Q,Z,tt="",ut=t.pos,rt=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91||(f=t.pos+2,h=t.md.helpers.parseLinkLabel(t,t.pos+1,!1),h<0))return!1;if(d=h+1,d<rt&&t.src.charCodeAt(d)===40){for(d++;d<rt&&(i=t.src.charCodeAt(d),!(!Th(i)&&i!==10));d++);if(d>=rt)return!1;for(Z=d,b=t.md.helpers.parseLinkDestination(t.src,d,t.posMax),b.ok&&(tt=t.md.normalizeLink(b.str),t.md.validateLink(tt)?d=b.pos:tt=""),Z=d;d<rt&&(i=t.src.charCodeAt(d),!(!Th(i)&&i!==10));d++);if(b=t.md.helpers.parseLinkTitle(t.src,d,t.posMax),d<rt&&Z!==d&&b.ok)for(k=b.str,d=b.pos;d<rt&&(i=t.src.charCodeAt(d),!(!Th(i)&&i!==10));d++);else k="";if(d>=rt||t.src.charCodeAt(d)!==41)return t.pos=ut,!1;d++}else{if(typeof t.env.references>"u")return!1;if(d<rt&&t.src.charCodeAt(d)===91?(Z=d+1,d=t.md.helpers.parseLinkLabel(t,d),d>=0?l=t.src.slice(Z,d++):d=h+1):d=h+1,l||(l=t.src.slice(f,h)),v=t.env.references[qot(l)],!v)return t.pos=ut,!1;tt=v.href,k=v.title}return n||(o=t.src.slice(f,h),t.md.inline.parse(o,t.md,t.env,Q=[]),S=t.push("image","img",0),S.attrs=r=[["src",tt],["alt",""]],S.children=Q,S.content=o,k&&r.push(["title",k])),t.pos=d,t.posMax=rt,!0},Uot=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,zot=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,Hot=function(t,n){var r,i,o,l,h,f,d=t.pos;if(t.src.charCodeAt(d)!==60)return!1;for(h=t.pos,f=t.posMax;;){if(++d>=f||(l=t.src.charCodeAt(d),l===60))return!1;if(l===62)break}return r=t.src.slice(h+1,d),zot.test(r)?(i=t.md.normalizeLink(r),t.md.validateLink(i)?(n||(o=t.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=t.push("text","",0),o.content=t.md.normalizeLinkText(r),o=t.push("link_close","a",-1),o.markup="autolink",o.info="auto"),t.pos+=r.length+2,!0):!1):Uot.test(r)?(i=t.md.normalizeLink("mailto:"+r),t.md.validateLink(i)?(n||(o=t.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=t.push("text","",0),o.content=t.md.normalizeLinkText(r),o=t.push("link_close","a",-1),o.markup="autolink",o.info="auto"),t.pos+=r.length+2,!0):!1):!1},Got=Dc.HTML_TAG_RE;function Wot(e){var t=e|32;return t>=97&&t<=122}var jot=function(t,n){var r,i,o,l,h=t.pos;return!t.md.options.html||(o=t.posMax,t.src.charCodeAt(h)!==60||h+2>=o)||(r=t.src.charCodeAt(h+1),r!==33&&r!==63&&r!==47&&!Wot(r))||(i=t.src.slice(h).match(Got),!i)?!1:(n||(l=t.push("html_inline","",0),l.content=t.src.slice(h,h+i[0].length)),t.pos+=i[0].length,!0)},__=Fm,Kot=me.has,Yot=me.isValidEntityCode,m_=me.fromCodePoint,Qot=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Zot=/^&([a-z][a-z0-9]{1,31});/i,Xot=function(t,n){var r,i,o,l=t.pos,h=t.posMax;if(t.src.charCodeAt(l)!==38)return!1;if(l+1<h){if(r=t.src.charCodeAt(l+1),r===35){if(o=t.src.slice(l).match(Qot),o)return n||(i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),t.pending+=Yot(i)?m_(i):m_(65533)),t.pos+=o[0].length,!0}else if(o=t.src.slice(l).match(Zot),o&&Kot(__,o[1]))return n||(t.pending+=__[o[1]]),t.pos+=o[0].length,!0}return n||(t.pending+="&"),t.pos++,!0};function v_(e,t){var n,r,i,o,l,h,f,d,v={},b=t.length;if(b){var k=0,S=-2,Q=[];for(n=0;n<b;n++)if(i=t[n],Q.push(0),(t[k].marker!==i.marker||S!==i.token-1)&&(k=n),S=i.token,i.length=i.length||0,!!i.close){for(v.hasOwnProperty(i.marker)||(v[i.marker]=[-1,-1,-1,-1,-1,-1]),l=v[i.marker][(i.open?3:0)+i.length%3],r=k-Q[k]-1,h=r;r>l;r-=Q[r]+1)if(o=t[r],o.marker===i.marker&&o.open&&o.end<0&&(f=!1,(o.close||i.open)&&(o.length+i.length)%3===0&&(o.length%3!==0||i.length%3!==0)&&(f=!0),!f)){d=r>0&&!t[r-1].open?Q[r-1]+1:0,Q[n]=n-r+d,Q[r]=d,i.open=!1,o.end=n,o.close=!1,h=-1,S=-2;break}h!==-1&&(v[i.marker][(i.open?3:0)+(i.length||0)%3]=h)}}}var Jot=function(t){var n,r=t.tokens_meta,i=t.tokens_meta.length;for(v_(t,t.delimiters),n=0;n<i;n++)r[n]&&r[n].delimiters&&v_(t,r[n].delimiters)},tat=function(t){var n,r,i=0,o=t.tokens,l=t.tokens.length;for(n=r=0;n<l;n++)o[n].nesting<0&&i--,o[n].level=i,o[n].nesting>0&&i++,o[n].type==="text"&&n+1<l&&o[n+1].type==="text"?o[n+1].content=o[n].content+o[n+1].content:(n!==r&&(o[r]=o[n]),r++);n!==r&&(o.length=r)},Ff=Mf,y_=me.isWhiteSpace,b_=me.isPunctChar,w_=me.isMdAsciiPunct;function Da(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}Da.prototype.pushPending=function(){var e=new Ff("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Da.prototype.push=function(e,t,n){this.pending&&this.pushPending();var r=new Ff(e,t,n),i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};Da.prototype.scanDelims=function(e,t){var n=e,r,i,o,l,h,f,d,v,b,k=!0,S=!0,Q=this.posMax,Z=this.src.charCodeAt(e);for(r=e>0?this.src.charCodeAt(e-1):32;n<Q&&this.src.charCodeAt(n)===Z;)n++;return o=n-e,i=n<Q?this.src.charCodeAt(n):32,d=w_(r)||b_(String.fromCharCode(r)),b=w_(i)||b_(String.fromCharCode(i)),f=y_(r),v=y_(i),v?k=!1:b&&(f||d||(k=!1)),f?S=!1:d&&(v||b||(S=!1)),t?(l=k,h=S):(l=k&&(!S||d),h=S&&(!k||b)),{can_open:l,can_close:h,length:o}};Da.prototype.Token=Ff;var eat=Da,x_=Pf,Ih=[["text",Oot],["newline",Mot],["escape",Not],["backticks",Fot],["strikethrough",Mc.tokenize],["emphasis",Lc.tokenize],["link",$ot],["image",Bot],["autolink",Hot],["html_inline",jot],["entity",Xot]],Rh=[["balance_pairs",Jot],["strikethrough",Mc.postProcess],["emphasis",Lc.postProcess],["text_collapse",tat]];function Oa(){var e;for(this.ruler=new x_,e=0;e<Ih.length;e++)this.ruler.push(Ih[e][0],Ih[e][1]);for(this.ruler2=new x_,e=0;e<Rh.length;e++)this.ruler2.push(Rh[e][0],Rh[e][1])}Oa.prototype.skipToken=function(e){var t,n,r=e.pos,i=this.ruler.getRules(""),o=i.length,l=e.md.options.maxNesting,h=e.cache;if(typeof h[r]<"u"){e.pos=h[r];return}if(e.level<l)for(n=0;n<o&&(e.level++,t=i[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;t||e.pos++,h[r]=e.pos};Oa.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),i=r.length,o=e.posMax,l=e.md.options.maxNesting;e.pos<o;){if(e.level<l)for(n=0;n<i&&(t=r[n](e,!1),!t);n++);if(t){if(e.pos>=o)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};Oa.prototype.parse=function(e,t,n,r){var i,o,l,h=new this.State(e,t,n,r);for(this.tokenize(h),o=this.ruler2.getRules(""),l=o.length,i=0;i<l;i++)o[i](h)};Oa.prototype.State=eat;var nat=Oa,Dh,E_;function rat(){return E_||(E_=1,Dh=function(e){var t={};t.src_Any=Vm().source,t.src_Cc=$m().source,t.src_Z=qm().source,t.src_P=Of.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");var n="[><｜]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+").|;(?!"+t.src_ZCc+").|\\!+(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}),Dh}function Xh(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function Nc(e){return Object.prototype.toString.call(e)}function iat(e){return Nc(e)==="[object String]"}function sat(e){return Nc(e)==="[object Object]"}function oat(e){return Nc(e)==="[object RegExp]"}function A_(e){return Nc(e)==="[object Function]"}function aat(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var jm={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function lat(e){return Object.keys(e||{}).reduce(function(t,n){return t||jm.hasOwnProperty(n)},!1)}var cat={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},uat="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",hat="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function fat(e){e.__index__=-1,e.__text_cache__=""}function dat(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function S_(){return function(e,t){t.normalize(e)}}function ec(e){var t=e.re=rat()(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(uat),n.push(t.src_xn),t.src_tlds=n.join("|");function r(h){return h.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");var i=[];e.__compiled__={};function o(h,f){throw new Error('(LinkifyIt) Invalid schema "'+h+'": '+f)}Object.keys(e.__schemas__).forEach(function(h){var f=e.__schemas__[h];if(f!==null){var d={validate:null,link:null};if(e.__compiled__[h]=d,sat(f)){oat(f.validate)?d.validate=dat(f.validate):A_(f.validate)?d.validate=f.validate:o(h,f),A_(f.normalize)?d.normalize=f.normalize:f.normalize?o(h,f):d.normalize=S_();return}if(iat(f)){i.push(h);return}o(h,f)}}),i.forEach(function(h){e.__compiled__[e.__schemas__[h]]&&(e.__compiled__[h].validate=e.__compiled__[e.__schemas__[h]].validate,e.__compiled__[h].normalize=e.__compiled__[e.__schemas__[h]].normalize)}),e.__compiled__[""]={validate:null,normalize:S_()};var l=Object.keys(e.__compiled__).filter(function(h){return h.length>0&&e.__compiled__[h]}).map(aat).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+l+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+l+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),fat(e)}function pat(e,t){var n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function k_(e,t){var n=new pat(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Tr(e,t){if(!(this instanceof Tr))return new Tr(e,t);t||lat(e)&&(t=e,e={}),this.__opts__=Xh({},jm,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Xh({},cat,e),this.__compiled__={},this.__tlds__=hat,this.__tlds_replaced__=!1,this.re={},ec(this)}Tr.prototype.add=function(t,n){return this.__schemas__[t]=n,ec(this),this};Tr.prototype.set=function(t){return this.__opts__=Xh(this.__opts__,t),this};Tr.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var n,r,i,o,l,h,f,d,v;if(this.re.schema_test.test(t)){for(f=this.re.schema_search,f.lastIndex=0;(n=f.exec(t))!==null;)if(o=this.testSchemaAt(t,n[2],f.lastIndex),o){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(d=t.search(this.re.host_fuzzy_test),d>=0&&(this.__index__<0||d<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(l=r.index+r[1].length,(this.__index__<0||l<this.__index__)&&(this.__schema__="",this.__index__=l,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(v=t.indexOf("@"),v>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(l=i.index+i[1].length,h=i.index+i[0].length,(this.__index__<0||l<this.__index__||l===this.__index__&&h>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=l,this.__last_index__=h))),this.__index__>=0};Tr.prototype.pretest=function(t){return this.re.pretest.test(t)};Tr.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Tr.prototype.match=function(t){var n=0,r=[];this.__index__>=0&&this.__text_cache__===t&&(r.push(k_(this,n)),n=this.__last_index__);for(var i=n?t.slice(n):t;this.test(i);)r.push(k_(this,n)),i=i.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};Tr.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,i,o){return r!==o[i-1]}).reverse(),ec(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,ec(this),this)};Tr.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Tr.prototype.onCompile=function(){};var gat=Tr;const _at={},mat=Object.freeze(Object.defineProperty({__proto__:null,default:_at},Symbol.toStringTag,{value:"Module"})),vat=wS(mat);var yat={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},bat={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}},wat={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}},ia=me,xat=Rc,Eat=Ist,Aat=Xst,Sat=Rot,kat=nat,Cat=gat,gs=wo,Km=vat,Tat={default:yat,zero:bat,commonmark:wat},Iat=/^(vbscript|javascript|file|data):/,Rat=/^data:image\/(gif|png|jpeg|webp);/;function Dat(e){var t=e.trim().toLowerCase();return Iat.test(t)?!!Rat.test(t):!0}var Ym=["http:","https:","mailto:"];function Oat(e){var t=gs.parse(e,!0);if(t.hostname&&(!t.protocol||Ym.indexOf(t.protocol)>=0))try{t.hostname=Km.toASCII(t.hostname)}catch{}return gs.encode(gs.format(t))}function Pat(e){var t=gs.parse(e,!0);if(t.hostname&&(!t.protocol||Ym.indexOf(t.protocol)>=0))try{t.hostname=Km.toUnicode(t.hostname)}catch{}return gs.decode(gs.format(t),gs.decode.defaultChars+"%")}function Ir(e,t){if(!(this instanceof Ir))return new Ir(e,t);t||ia.isString(e)||(t=e||{},e="default"),this.inline=new kat,this.block=new Sat,this.core=new Aat,this.renderer=new Eat,this.linkify=new Cat,this.validateLink=Dat,this.normalizeLink=Oat,this.normalizeLinkText=Pat,this.utils=ia,this.helpers=ia.assign({},xat),this.options={},this.configure(e),t&&this.set(t)}Ir.prototype.set=function(e){return ia.assign(this.options,e),this};Ir.prototype.configure=function(e){var t=this,n;if(ia.isString(e)&&(n=e,e=Tat[n],!e))throw new Error('Wrong `markdown-it` preset "'+n+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&t[r].ruler.enableOnly(e.components[r].rules),e.components[r].rules2&&t[r].ruler2.enableOnly(e.components[r].rules2)}),this};Ir.prototype.enable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));var r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Ir.prototype.disable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));var r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Ir.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Ir.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");var n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Ir.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Ir.prototype.parseInline=function(e,t){var n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Ir.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};var Mat=Ir,Lat=Mat;const Nat=Mm(Lat);var Fat=xS({name:"VueMarkdown",props:{source:{type:String,required:!0},options:{type:Object,required:!1},plugins:{type:Array,required:!1}},setup:function(e){for(var t,n,r=ES(new Nat((t=e.options)!==null&&t!==void 0?t:{})),i=0,o=(n=e.plugins)!==null&&n!==void 0?n:[];i<o.length;i++){var l=o[i];r.value.use(l)}var h=AS(function(){return r.value.render(e.source)});return function(){return SS("div",{innerHTML:h.value})}}});const ua=Fat,Vat={key:0},$at=ot("br",null,null,-1),qat=ot("hr",null,null,-1),Bat=ot("br",null,null,-1),Uat={key:2,class:"modal br-pill-ns"},zat={components:{VueMarkdown:ua},props:["config","instructions_open","toggle_instructions"],mounted(){$(".container").removeClass("container-extra-space"),this.config.prepend_instructions&&$(".container").addClass("container-extra-space")}},Hat=Object.assign(zat,{__name:"Instructions",setup(e){return(t,n)=>(Ft(),zt("main",null,[e.config.instructions&&e.config.prepend_instructions?(Ft(),zt("section",Vat,[er(Qh(ua),{source:e.config.instructions,options:t.options,class:"mt0 mb0"},null,8,["source","options"]),$at,qat,Bat])):Ae("",!0),e.instructions_open?(Ft(),zt("div",{key:1,class:"overlay",onClick:n[0]||(n[0]=(...r)=>e.toggle_instructions&&e.toggle_instructions(...r))})):Ae("",!0),e.instructions_open?(Ft(),zt("section",Uat,[er(Qh(ua),{source:e.config.instructions,options:t.options,class:"mt0 mb0"},null,8,["source","options"])])):Ae("",!0)]))}}),Gat={data(){return{source_html:""}},props:["hits_data","current_hit","edits_dict","selected_state","selected_edits_html","selected_edits","set_selected_edits","set_span_text","set_span_indices","set_span_category","remove_selected","lines","set_lines","handle_tokenization_rendering","process_edit_list","hasAnnotations","is_selected","get_selected_index","multi_select_enabled","render_sentence","click_span","hover_span","un_hover_span","hit_box_config","config"],watch:{current_hit(){this.process_source_html()},hits_data(){this.process_source_html()},set_span_text(){this.process_source_html()},selected_state(){this.process_source_html_with_selected_span(this.selected_state.source_category)}},methods:{process_source_html(){try{this.process_source_html_with_selected_span(null)}catch(e){this.source_html="",console.warn(e)}},process_source_html_with_selected_span(e){const t="input_idx",n="source_span",r=this.hits_data[this.current_hit-1].source;try{this.source_html=this.render_sentence(r,t,n,e)}catch(i){this.source_html="",console.warn(i)}},select_source_html(){if(!this.hit_box_config.enable_select_source_sentence)return;let e=$("input[name=edit_cotegory]:checked").val(),t=window.getSelection(),n=this.hits_data[this.current_hit-1].source,r=t.getRangeAt(0),[i,o]=[r.startOffset,r.endOffset];if(i==o||!n.substring(i,o).trim()){this.process_source_html(null);return}if(t.anchorNode!=t.focusNode||t.anchorNode==null){this.process_source_html_with_selected_span(e);return}$("#source-sentence").addClass(`select-color-${e}`);let l=[" ",`
`];if(this.config.tokenization&&this.config.tokenization=="tokenized"&&(l=["Ġ"," ",`
`]),!this.config.tokenization||this.config.tokenization!="char"){for(o-=1;l.includes(n.charAt(i));)i+=1;for(;i-1>=0&&!l.includes(n.charAt(i-1));)i-=1;for(;l.includes(n.charAt(o));)o-=1;for(;o+1<=n.length-1&&!l.includes(n.charAt(o+1));)o+=1;o+=1}if(i>=o){this.process_source_html_with_selected_span(e);return}let h=`<span class="selected-span-text bg-${e}-light"> ${n.substring(i,o)} </span>`;if(this.set_span_text(h,"source"),this.hit_box_config.enable_multi_select_source_sentence){let f=this.selected_state.source_idx;(f==null||f.length==0)&&(f=[]),f.push([i,o]),this.set_span_indices(f,"source");let d="";for(let v=0;v<f.length;v++){let[b,k]=f[v];d+=`
                    <span class="selected-span-text bg-${e}-light"> 
                        <span @click="remove_selected('${e}', ${b}, ${k})" class="hover-white black br-pill mr1 pointer">✘</span>
                            ${n.substring(b,k)} </span>&nbsp&nbsp`}this.set_span_text(d,"source")}else this.set_span_indices([i,o],"source");this.set_span_category(e,"source"),this.process_source_html_with_selected_span(e)},deselect_source_html(){this.hit_box_config.enable_select_source_sentence&&($("#source-sentence").html(this.hits_data[this.current_hit-1].source),this.source_html=this.hits_data[this.current_hit-1].source)}},computed:{get_source_html(){return{template:`<pre @mousedown='deselect_source_html' @mouseup='select_source_html' id="source-sentence" class="f4 lh-paras sans-serif selection-area">${this.source_html}</pre>`,methods:{select_source_html:this.select_source_html,deselect_source_html:this.deselect_source_html,remove_selected:this.remove_selected,hover_span:this.hover_span,un_hover_span:this.un_hover_span,click_span:this.click_span,handle_tokenization_rendering:this.handle_tokenization_rendering},mounted(){this.handle_tokenization_rendering()}}}}},Wat=Object.assign(Gat,{__name:"SourceSent",setup(e){return(t,n)=>(Ft(),Rf(Df(t.get_source_html)))}}),jat={data(){return{target_html:""}},props:["hits_data","current_hit","edits_dict","selected_edits_html","selected_edits","set_selected_edits","selected_state","set_span_text","set_span_indices","set_span_category","remove_selected","lines","set_lines","handle_tokenization_rendering","process_edit_list","hasAnnotations","is_selected","get_selected_index","multi_select_enabled","render_sentence","click_span","hover_span","un_hover_span","hit_box_config","config"],watch:{current_hit(){this.process_target_html()},hits_data(){this.process_target_html()},set_span_text(){this.process_target_html()},selected_state(){this.process_target_html_with_selected_span(this.selected_state.target_category)}},methods:{process_target_html(){const e="output_idx",t="target_span",n=this.hits_data[this.current_hit-1].target;try{this.target_html=this.render_sentence(n,e,t,null)}catch(r){this.target_html="",console.warn(r)}},process_target_html_with_selected_span(e){const t="output_idx",n="target_span",r=this.hits_data[this.current_hit-1].target;try{this.target_html=this.render_sentence(r,t,n,e)}catch(i){this.target_html="",console.warn(i)}},select_target_html(e){if(!this.hit_box_config.enable_select_target_sentence)return;let t=$("input[name=edit_cotegory]:checked").val(),n=window.getSelection(),r=this.hits_data[this.current_hit-1].target,i=n.getRangeAt(0),[o,l]=[i.startOffset,i.endOffset];if(o==l||!r.substring(o,l).trim()){this.process_target_html(null);return}if(n.anchorNode!=n.focusNode||n.anchorNode==null){this.process_target_html_with_selected_span(t);return}$("#target-sentence").addClass(`select-color-${t}`);let h=[" ",`
`];if(this.config.tokenization&&this.config.tokenization=="tokenized"&&(h=["Ġ"," ",`
`]),!this.config.tokenization||this.config.tokenization!="char"){for(l-=1;h.includes(r.charAt(o));)o+=1;for(;o-1>=0&&!h.includes(r.charAt(o-1));)o-=1;for(;h.includes(r.charAt(l));)l-=1;for(;l+1<=r.length-1&&!h.includes(r.charAt(l+1));)l+=1;l+=1}if(o>=l){this.process_target_html_with_selected_span(t);return}let f=`<span class="selected-span-text bg-${t}-light"> ${r.substring(o,l)} </span>`;if(this.set_span_text(f,"target"),this.hit_box_config.enable_multi_select_target_sentence){let d=this.selected_state.target_idx;(d==null||d.length==0)&&(d=[]),d.push([o,l]),this.set_span_indices(d,"target");let v="";for(let b=0;b<d.length;b++){let[k,S]=d[b];v+=`<span class="selected-span-text bg-${t}-light"> 
                        <span @click="remove_selected('${t}',${k},${S})" class="hover-white black br-pill mr1 pointer">✘</span>
                            ${r.substring(k,S)} </span>&nbsp&nbsp`}this.set_span_text(v,"target")}else this.set_span_indices([o,l],"target");this.set_span_category(t,"target"),this.process_target_html_with_selected_span(t)},deselect_target_html(e){this.hit_box_config.enable_select_target_sentence&&($("#target-sentence").html(this.hits_data[this.current_hit-1].target),this.target_html=this.hits_data[this.current_hit-1].target)}},computed:{get_target_html(){return{template:`<pre @mousedown='deselect_target_html' @mouseup='select_target_html' id="target-sentence" class="f4 lh-paras sans-serif selection-area"> ${this.target_html} </pre> `,methods:{select_target_html:this.select_target_html,deselect_target_html:this.deselect_target_html,remove_selected:this.remove_selected,hover_span:this.hover_span,un_hover_span:this.un_hover_span,click_span:this.click_span,handle_tokenization_rendering:this.handle_tokenization_rendering},mounted(){this.handle_tokenization_rendering()}}}}},Kat=Object.assign(jat,{__name:"TargetSent",setup(e){return(t,n)=>(Ft(),Rf(Df(t.get_target_html)))}}),Yat={key:0,class:"f4 lh-paras context-span"},Qat={key:1,class:"f4 lh-paras context-span"},Zat={key:0,class:"f4 lh-paras context-span"},Xat={key:1,class:"f4 lh-paras context-span"},Jat={data(){return{}},props:["hits_data","current_hit","edits_dict","selected_edits_html","selected_edits","set_selected_edits","set_span_text","set_span_indices","set_span_category","remove_selected","lines","set_lines","set_edit_html","hit_box_config","config","sent_type","selected_state"],methods:{process_edit_list(e,t){return e=e.map(n=>{let r=[];if(n.hasOwnProperty("constituent_edits")){for(const i of n.constituent_edits)if(i.hasOwnProperty(t))for(const o of i[t])r.push({[t]:o,category:n.category,child_category:i.category,id:n.id,child_id:i.id,annotation:n.annotation})}if(n.hasOwnProperty(t))for(const i of n[t])r.push({[t]:i,category:n.category,id:n.id,annotation:n.annotation});return r}),e=[].concat(...e),e.sort(function(n,r){return n[t][0]-r[t][0]||n[t][1]-r[t][1]}),e},hasAnnotations(e){return"annotation"in e&&e.annotation!=null&&e.annotation!=""||this.config.disable&&Object.values(this.config.disable).includes("annotation")},is_selected(e,t,n){let r;const i=this.get_selected_index(t);return this.multi_select_enabled(t)?r=i.some(o=>e[t][0]==o[0]&&e[t][1]==o[1]&&e.category==n):r=e[t][0]==i[0]&&e[t][1]==i[1]&&e.category==n,r},get_selected_index(e){if(e=="input_idx")return tn.cloneDeep(this.selected_state.source_idx);if(e=="output_idx")return tn.cloneDeep(this.selected_state.target_idx)},multi_select_enabled(e){if(e=="input_idx")return this.hit_box_config.enable_multi_select_source_sentence;if(e=="output_idx")return this.hit_box_config.enable_multi_select_target_sentence},hover_span(e){if($(".quality-selection").is(":visible"))return;const t=e.target.dataset.category,n=e.target.dataset.id,r=n.split("-")[1];let i,o;e.target.classList.contains(`border-${t}-light`)?(i=`bg-${t}-light`,o="rgba(173, 197, 250, 1.0)"):(i=`bg-${t}`,o="rgba(33, 134, 235, 1.0)");let l=$(`.${t}[data-id=${n}]`),h=$(`.${t}_below[data-id=${n}]`);l.addClass(`white ${i}`),h.addClass(`white ${i}`),h.removeClass(`txt-${t} txt-${t}-light`);try{t=="substitution"&&(this.lines[t][r].color=o)}catch(f){console.log(f)}},un_hover_span(e){if($(".quality-selection").is(":visible"))return;const t=e.target.dataset.category,n=e.target.dataset.id,r=n.split("-")[1];let i,o;e.target.classList.contains(`border-${t}-light`)?(i="rgba(173, 197, 250, 0.4)",o=`txt-${t}-light`):(i="rgba(33, 134, 235, 0.46)",o=`txt-${t}`);let l=$(`.${t}[data-id=${n}]`),h=$(`.${t}_below[data-id=${n}]`);h.addClass(o),l.removeClass(`white bg-${t} bg-${t}-light`),h.removeClass(`white bg-${t} bg-${t}-light`);try{t=="substitution"&&(this.lines[t][r].color=i)}catch(f){console.log(f)}},getEditConfig(e){return this.config.edits.find(function(t){return t.name===e})},click_span(e){this.edits_dict;const t=e.target.dataset.category,n=e.target.dataset.id,r=n.split("-")[1];if($(".quality-selection").is(":visible")){if(this.getEditConfig(t).type&&this.getEditConfig(t).type=="composite")return;const i=this.hits_data[this.current_hit-1].edits.find(function(f){return f.category===t&&f.id===parseInt(r)}),o=this.selected_edits.find(function(f){return f.category===t&&f.id===parseInt(r)})!==void 0;if($("input[name=edit_cotegory]:checked").val()=="split"){let f=parseInt(r)+1;e.target.classList.contains("split-sign")&&(f==1?this.selected_state.selected_split="the 1st split":f==2?this.selected_state.selected_split="the 2nd split":f==3?this.selected_state.selected_split="the 3rd split":this.selected_state.selected_split=`the ${f}th split`,this.selected_state.split_id=parseInt(r))}let l=tn.cloneDeep(this.selected_edits);o?l=l.filter(f=>f.category!==t||f.id!==parseInt(r)):l.push(i);let h="";for(const f of l)h+=this.render_selected_constituent_edit(f);this.set_selected_edits(l),this.set_edit_html(h)}else $(`.annotation-icon[data-id=${n}]`).click()},render_selected_constituent_edit(e){let t="";const n=e.category;if(this.getEditConfig(n).type=="multi_span"){t+=`<span class="edit-type txt-${n}">substitute </span>`;let r=e.input_idx;for(let o=0;o<r.length;o++)o!=0&&(t+=`<span class="edit-type txt-${n}"> and </span>`),t+=`<span class="pa1 edit-text br-pill-ns txt-${n} border-${n}-all">
                        &nbsp${this.hits_data[this.current_hit-1].source.substring(r[o][0],r[o][1])}&nbsp</span>`;t+=`<span class="edit-type txt-${n}"> with </span>`;let i=e.output_idx;for(let o=0;o<i.length;o++)o!=0&&(t+=`<span class="edit-type txt-${n}"> and </span>`),t+=`<span class="pa1 edit-text br-pill-ns txt-${n} border-${n}-all">
                        &nbsp${this.hits_data[this.current_hit-1].target.substring(i[o][0],i[o][1])}&nbsp</span>`;t+=",&nbsp&nbsp"}else{if(e.hasOwnProperty("input_idx")){let r=e.input_idx[0];t+=`<span class="edit-type txt-${n}">${n} </span>
                        <span class="pa1 edit-text br-pill-ns txt-${n} border-${n}-all">
                            &nbsp${this.hits_data[this.current_hit-1].source.substring(r[0],r[1])}&nbsp</span>,&nbsp&nbsp`}if(e.hasOwnProperty("output_idx")){let r=e.output_idx[0];t+=`<span class="edit-type txt-${n}">${n} </span>
                        <span class="pa1 edit-text br-pill-ns txt-${n} border-${n}-all">
                            &nbsp${this.hits_data[this.current_hit-1].target.substring(r[0],r[1])}&nbsp</span>,&nbsp&nbsp`}}return t},handle_tokenization_rendering(){this.config.tokenization&&this.config.tokenization=="tokenized"?$("span#source-sentence, span#target-sentence, .edit-text, .selected-span-text").addClass("hide-tokenization-chars"):$("span#source-sentence, span#target-sentence, .edit-text, .selected-span-text").removeClass("hide-tokenization-chars")},render_sentence(e,t,n,r){let i=0,o="",l=tn.cloneDeep(this.hits_data[this.current_hit-1].edits);const h=r!=null&&r!="";if(h){const d=this.get_selected_index(t);if(this.multi_select_enabled(t)&&Array.isArray(d[0]))for(let v=0;v<d.length;v++)l.push({category:r,[t]:[d[v]]});else l.push({category:r,[t]:[d]})}const f=this.process_edit_list(l,t);for(let d=0;d<f.length;d++){let v=f[d],b=f[d+1];o+=e.substring(i,v[t][0]);let k=this.hasAnnotations(v)?"":"-light",S=d<f.length-1&&b[t][0]<=v[t][1]?"outside":"",Q=v.hasOwnProperty("child_category")?`data-childcategory=${v.child_category} data-childid=${v.child_id}`:"";h&&this.is_selected(v,t,r)?o+=`<span @mouseover.stop @mouseout.stop class="bg-${v.category}-light span ${S}">`:o+=`<span @click="click_span" @mouseover="hover_span" @mouseout="un_hover_span" class="${v.category} border-${v.category}${k} pointer span ${n} ${S}" data-category="${v.category}" data-id="${v.category}-${v.id}" ${Q}>`;let Z=d,tt=!1;for(;d<f.length-1&&b[t][0]<=f[Z][t][1];){if(d==Z)o+=e.substring(v[t][0],b[t][0]);else{let wt=d;tt&&(wt-=1),o+=e.substring(f[wt][t][1],b[t][0])}tt=!1;let ut=d<f.length-2&&f[d+2][t][0]<=b[t][1]?"middleside":"",rt=this.hasAnnotations(v)?"":"-light",yt=v.hasOwnProperty("child_category")?`data-childcategory=${v.child_category} data-childid=${v.child_id}`:"";if(h&&this.is_selected(v,t,r)?o+=`
                            <span @mouseover.stop @mouseout.stop class="bg-${v.category}-light span ${ut}">`:o+=`
                            <span @mouseover.stop @mouseout.stop @click.stop @click="click_span" @mouseover="hover_span" @mouseout="un_hover_span" class="${b.category} border-${b.category}${rt} pointer span ${n} ${ut}" data-category="${b.category}" data-id="${b.category}-${b.id}" ${yt}>`,d++,v=f[d],b=f[d+1],d<f.length-1&&b[t][0]<=v[t][1]){tt=!0;let wt=f[d+1];o+=e.substring(v[t][0],wt[t][0]);let Vt=this.hasAnnotations(wt)?"":"-light";yt=wt.hasOwnProperty("child_category")?`data-childcategory=${wt.child_category} data-childid=${wt.child_id}`:"",h&&this.is_selected(v,t,r)?o+=`
                                <span @mouseover.stop @mouseout.stop class="bg-${next_category}-light span">`:o+=`
                                <span @mouseover.stop @mouseout.stop @click.stop @click="click_span" @mouseover="hover_span" @mouseout="un_hover_span" class="${wt.category} border-${wt.category}${Vt} pointer span ${n}" data-category="${wt.category}" data-id="${wt.category}-${wt.id}" ${yt}>`,o+=`
                                ${e.substring(wt[t][0],wt[t][1])}</span>
                            ${e.substring(wt[t][1],v[t][1])}</span>`,d++,v=f[d],b=f[d+1]}else b=f[d+1],o+=`
                            ${e.substring(b[t][0],b[t][1])}</span>`}if(Z!=d){let ut=d;Z!=d&&tt&&(ut-=1),o+=`${e.substring(f[ut][t][1],f[Z][t][1])}</span>`,i=f[Z][t][1]}else o+=`${e.substring(f[Z][t][0],f[Z][t][1])}</span>`,i=f[Z][t][1]}return o+=e.substring(i),o}}},C_=Object.assign(Jat,{__name:"Sent",setup(e){return(t,n)=>(Ft(),zt("div",null,[e.sent_type==="source"?(Ft(),zt(_i,{key:0},[e.hits_data&&e.hits_data[e.current_hit-1]&&e.hits_data[e.current_hit-1].source_context_before?(Ft(),zt("span",Yat,Ut(e.hits_data[e.current_hit-1].source_context_before)+"  ",1)):Ae("",!0),er(Wat,mi({sent_type:"source"},t.$props,{remove_selected:e.remove_selected,process_edit_list:t.process_edit_list,handle_tokenization_rendering:t.handle_tokenization_rendering,hasAnnotations:t.hasAnnotations,is_selected:t.is_selected,get_selected_index:t.get_selected_index,multi_select_enabled:t.multi_select_enabled,render_sentence:t.render_sentence,click_span:t.click_span,hover_span:t.hover_span,un_hover_span:t.un_hover_span,config:e.config}),null,16,["remove_selected","process_edit_list","handle_tokenization_rendering","hasAnnotations","is_selected","get_selected_index","multi_select_enabled","render_sentence","click_span","hover_span","un_hover_span","config"]),e.hits_data&&e.hits_data[e.current_hit-1]&&e.hits_data[e.current_hit-1].source_context_after?(Ft(),zt("span",Qat,"  "+Ut(e.hits_data[e.current_hit-1].source_context_after),1)):Ae("",!0)],64)):e.sent_type==="target"?(Ft(),zt(_i,{key:1},[e.hits_data&&e.hits_data[e.current_hit-1]&&e.hits_data[e.current_hit-1].target_context_before?(Ft(),zt("span",Zat,Ut(e.hits_data[e.current_hit-1].target_context_before)+"  ",1)):Ae("",!0),er(Kat,mi({sent_type:"target"},t.$props,{remove_selected:e.remove_selected,process_edit_list:t.process_edit_list,handle_tokenization_rendering:t.handle_tokenization_rendering,hasAnnotations:t.hasAnnotations,is_selected:t.is_selected,get_selected_index:t.get_selected_index,multi_select_enabled:t.multi_select_enabled,render_sentence:t.render_sentence,click_span:t.click_span,hover_span:t.hover_span,un_hover_span:t.un_hover_span,config:e.config}),null,16,["remove_selected","process_edit_list","handle_tokenization_rendering","hasAnnotations","is_selected","get_selected_index","multi_select_enabled","render_sentence","click_span","hover_span","un_hover_span","config"]),e.hits_data&&e.hits_data[e.current_hit-1]&&e.hits_data[e.current_hit-1].target_context_after?(Ft(),zt("span",Xat,"  "+Ut(e.hits_data[e.current_hit-1].target_context_after),1)):Ae("",!0)],64)):Ae("",!0)]))}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},tlt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],l=e[n++],h=e[n++],f=((i&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;t[r++]=String.fromCharCode(55296+(f>>10)),t[r++]=String.fromCharCode(56320+(f&1023))}else{const o=e[n++],l=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return t.join("")},Zm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],l=i+1<e.length,h=l?e[i+1]:0,f=i+2<e.length,d=f?e[i+2]:0,v=o>>2,b=(o&3)<<4|h>>4;let k=(h&15)<<2|d>>6,S=d&63;f||(S=64,l||(k=64)),r.push(n[v],n[b],n[k],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Qm(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):tlt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],h=i<e.length?n[e.charAt(i)]:0;++i;const d=i<e.length?n[e.charAt(i)]:64;++i;const b=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||h==null||d==null||b==null)throw new elt;const k=o<<2|h>>4;if(r.push(k),d!==64){const S=h<<4&240|d>>2;if(r.push(S),b!==64){const Q=d<<6&192|b;r.push(Q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class elt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nlt=function(e){const t=Qm(e);return Zm.encodeByteArray(t,!0)},nc=function(e){return nlt(e).replace(/\./g,"")},rlt=function(e){try{return Zm.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ilt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const slt=()=>ilt().__FIREBASE_DEFAULTS__,olt=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},alt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&rlt(e[1]);return t&&JSON.parse(t)},Xm=()=>{try{return slt()||olt()||alt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},llt=e=>{var t,n;return(n=(t=Xm())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},clt=e=>{const t=llt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Jm=()=>{var e;return(e=Xm())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ult{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hlt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e),h="";return[nc(JSON.stringify(n)),nc(JSON.stringify(l)),h].join(".")}function flt(){try{return typeof indexedDB=="object"}catch{return!1}}function dlt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const plt="FirebaseError";class Ao extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=plt,Object.setPrototypeOf(this,Ao.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t0.prototype.create)}}class t0{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],l=o?glt(o,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new Ao(i,h,r)}}function glt(e,t){return e.replace(_lt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const _lt=/\{\$([^}]+)}/g;function Jh(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],l=t[i];if(T_(o)&&T_(l)){if(!Jh(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function T_(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(e){return e&&e._delegate?e._delegate:e}class ha{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mlt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new ult;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ylt(t))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=ds){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ds){return this.instances.has(t)}getOptions(t=ds){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&l.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&t(l,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vlt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ds){return this.component?this.component.multipleInstances?t:ds:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vlt(e){return e===ds?void 0:e}function ylt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class blt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new mlt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(de||(de={}));const wlt={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},xlt=de.INFO,Elt={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},Alt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Elt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class e0{constructor(t){this.name=t,this._logLevel=xlt,this._logHandler=Alt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in de))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?wlt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...t),this._logHandler(this,de.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...t),this._logHandler(this,de.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,de.INFO,...t),this._logHandler(this,de.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,de.WARN,...t),this._logHandler(this,de.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...t),this._logHandler(this,de.ERROR,...t)}}const Slt=(e,t)=>t.some(n=>e instanceof n);let I_,R_;function klt(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Clt(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n0=new WeakMap,tf=new WeakMap,r0=new WeakMap,Oh=new WeakMap,Vf=new WeakMap;function Tlt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",l)},o=()=>{n(Ui(e.result)),i()},l=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",l)});return t.then(n=>{n instanceof IDBCursor&&n0.set(n,e)}).catch(()=>{}),Vf.set(t,e),t}function Ilt(e){if(tf.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",l),e.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",l),e.addEventListener("abort",l)});tf.set(e,t)}let ef={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return tf.get(e);if(t==="objectStoreNames")return e.objectStoreNames||r0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ui(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Rlt(e){ef=e(ef)}function Dlt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Ph(this),t,...n);return r0.set(r,t.sort?t.sort():[t]),Ui(r)}:Clt().includes(e)?function(...t){return e.apply(Ph(this),t),Ui(n0.get(this))}:function(...t){return Ui(e.apply(Ph(this),t))}}function Olt(e){return typeof e=="function"?Dlt(e):(e instanceof IDBTransaction&&Ilt(e),Slt(e,klt())?new Proxy(e,ef):e)}function Ui(e){if(e instanceof IDBRequest)return Tlt(e);if(Oh.has(e))return Oh.get(e);const t=Olt(e);return t!==e&&(Oh.set(e,t),Vf.set(t,e)),t}const Ph=e=>Vf.get(e);function Plt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(e,t),h=Ui(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Ui(l.result),f.oldVersion,f.newVersion,Ui(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),h}const Mlt=["get","getKey","getAll","getAllKeys","count"],Llt=["put","add","delete","clear"],Mh=new Map;function D_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Mh.get(t))return Mh.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Llt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Mlt.includes(n)))return;const o=async function(l,...h){const f=this.transaction(l,i?"readwrite":"readonly");let d=f.store;return r&&(d=d.index(h.shift())),(await Promise.all([d[n](...h),i&&f.done]))[0]};return Mh.set(t,o),o}Rlt(e=>({...e,get:(t,n,r)=>D_(t,n)||e.get(t,n,r),has:(t,n)=>!!D_(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nlt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Flt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Flt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const nf="@firebase/app",O_="0.9.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new e0("@firebase/app"),Vlt="@firebase/app-compat",$lt="@firebase/analytics-compat",qlt="@firebase/analytics",Blt="@firebase/app-check-compat",Ult="@firebase/app-check",zlt="@firebase/auth",Hlt="@firebase/auth-compat",Glt="@firebase/database",Wlt="@firebase/database-compat",jlt="@firebase/functions",Klt="@firebase/functions-compat",Ylt="@firebase/installations",Qlt="@firebase/installations-compat",Zlt="@firebase/messaging",Xlt="@firebase/messaging-compat",Jlt="@firebase/performance",tct="@firebase/performance-compat",ect="@firebase/remote-config",nct="@firebase/remote-config-compat",rct="@firebase/storage",ict="@firebase/storage-compat",sct="@firebase/firestore",oct="@firebase/firestore-compat",act="firebase",lct="10.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",cct={[nf]:"fire-core",[Vlt]:"fire-core-compat",[qlt]:"fire-analytics",[$lt]:"fire-analytics-compat",[Ult]:"fire-app-check",[Blt]:"fire-app-check-compat",[zlt]:"fire-auth",[Hlt]:"fire-auth-compat",[Glt]:"fire-rtdb",[Wlt]:"fire-rtdb-compat",[jlt]:"fire-fn",[Klt]:"fire-fn-compat",[Ylt]:"fire-iid",[Qlt]:"fire-iid-compat",[Zlt]:"fire-fcm",[Xlt]:"fire-fcm-compat",[Jlt]:"fire-perf",[tct]:"fire-perf-compat",[ect]:"fire-rc",[nct]:"fire-rc-compat",[rct]:"fire-gcs",[ict]:"fire-gcs-compat",[sct]:"fire-fst",[oct]:"fire-fst-compat","fire-js":"fire-js",[act]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Map,sf=new Map;function uct(e,t){try{e.container.addComponent(t)}catch(n){Ss.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ic(e){const t=e.name;if(sf.has(t))return Ss.debug(`There were multiple attempts to register component ${t}.`),!1;sf.set(t,e);for(const n of rc.values())uct(n,e);return!0}function hct(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fct={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},zi=new t0("app","Firebase",fct);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dct{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pct=lct;function i0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:rf,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw zi.create("bad-app-name",{appName:String(i)});if(n||(n=Jm()),!n)throw zi.create("no-options");const o=rc.get(i);if(o){if(Jh(n,o.options)&&Jh(r,o.config))return o;throw zi.create("duplicate-app",{appName:i})}const l=new blt(i);for(const f of sf.values())l.addComponent(f);const h=new dct(n,r,l);return rc.set(i,h),h}function gct(e=rf){const t=rc.get(e);if(!t&&e===rf&&Jm())return i0();if(!t)throw zi.create("no-app",{appName:e});return t}function co(e,t,n){var r;let i=(r=cct[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),l=t.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${t}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ss.warn(h.join(" "));return}ic(new ha(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ct="firebase-heartbeat-database",mct=1,fa="firebase-heartbeat-store";let Lh=null;function s0(){return Lh||(Lh=Plt(_ct,mct,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(fa)}}}).catch(e=>{throw zi.create("idb-open",{originalErrorMessage:e.message})})),Lh}async function vct(e){try{return await(await s0()).transaction(fa).objectStore(fa).get(o0(e))}catch(t){if(t instanceof Ao)Ss.warn(t.message);else{const n=zi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ss.warn(n.message)}}}async function P_(e,t){try{const r=(await s0()).transaction(fa,"readwrite");await r.objectStore(fa).put(t,o0(e)),await r.done}catch(n){if(n instanceof Ao)Ss.warn(n.message);else{const r=zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ss.warn(r.message)}}}function o0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yct=1024,bct=30*24*60*60*1e3;class wct{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ect(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=M_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=bct}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=M_(),{heartbeatsToSend:n,unsentEntries:r}=xct(this._heartbeatsCache.heartbeats),i=nc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function M_(){return new Date().toISOString().substring(0,10)}function xct(e,t=yct){const n=[];let r=e.slice();for(const i of e){const o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),L_(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),L_(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ect{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return flt()?dlt().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await vct(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return P_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return P_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function L_(e){return nc(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Act(e){ic(new ha("platform-logger",t=>new Nlt(t),"PRIVATE")),ic(new ha("heartbeat",t=>new wct(t),"PRIVATE")),co(nf,O_,e),co(nf,O_,"esm2017"),co("fire-js","")}Act("");var Sct="firebase",kct="10.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */co(Sct,kct,"app");var Cct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},At,$f=$f||{},Zt=Cct||self;function Fc(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Pa(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function Tct(e){return Object.prototype.hasOwnProperty.call(e,Nh)&&e[Nh]||(e[Nh]=++Ict)}var Nh="closure_uid_"+(1e9*Math.random()>>>0),Ict=0;function Rct(e,t,n){return e.call.apply(e.bind,arguments)}function Dct(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Fn(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Fn=Rct:Fn=Dct,Fn.apply(null,arguments)}function ql(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function En(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,o){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return t.prototype[i].apply(r,l)}}function Yi(){this.s=this.s,this.o=this.o}var Oct=0;Yi.prototype.s=!1;Yi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Oct!=0)&&Tct(this)};Yi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const a0=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function qf(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function N_(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Fc(r)){const i=e.length||0,o=r.length||0;e.length=i+o;for(let l=0;l<o;l++)e[i+l]=r[l]}else e.push(r)}}function Vn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Vn.prototype.h=function(){this.defaultPrevented=!0};var Pct=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Zt.addEventListener("test",()=>{},t),Zt.removeEventListener("test",()=>{},t)}catch{}return e}();function da(e){return/^[\s\xa0]*$/.test(e)}function Vc(){var e=Zt.navigator;return e&&(e=e.userAgent)?e:""}function Gr(e){return Vc().indexOf(e)!=-1}function Bf(e){return Bf[" "](e),e}Bf[" "]=function(){};function Mct(e,t){var n=kut;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var Lct=Gr("Opera"),fo=Gr("Trident")||Gr("MSIE"),l0=Gr("Edge"),of=l0||fo,c0=Gr("Gecko")&&!(Vc().toLowerCase().indexOf("webkit")!=-1&&!Gr("Edge"))&&!(Gr("Trident")||Gr("MSIE"))&&!Gr("Edge"),Nct=Vc().toLowerCase().indexOf("webkit")!=-1&&!Gr("Edge");function u0(){var e=Zt.document;return e?e.documentMode:void 0}var af;t:{var Fh="",Vh=function(){var e=Vc();if(c0)return/rv:([^\);]+)(\)|;)/.exec(e);if(l0)return/Edge\/([\d\.]+)/.exec(e);if(fo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(Nct)return/WebKit\/(\S+)/.exec(e);if(Lct)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Vh&&(Fh=Vh?Vh[1]:""),fo){var $h=u0();if($h!=null&&$h>parseFloat(Fh)){af=String($h);break t}}af=Fh}var lf;if(Zt.document&&fo){var F_=u0();lf=F_||parseInt(af,10)||void 0}else lf=void 0;var Fct=lf;function pa(e,t){if(Vn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(c0){t:{try{Bf(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Vct[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&pa.$.h.call(this)}}En(pa,Vn);var Vct={2:"touch",3:"pen",4:"mouse"};pa.prototype.h=function(){pa.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ma="closure_listenable_"+(1e6*Math.random()|0),$ct=0;function qct(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++$ct,this.fa=this.ia=!1}function $c(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Uf(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Bct(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function h0(e){const t={};for(const n in e)t[n]=e[n];return t}const V_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function f0(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let o=0;o<V_.length;o++)n=V_[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function qc(e){this.src=e,this.g={},this.h=0}qc.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var l=uf(e,t,r,i);return-1<l?(t=e[l],n||(t.ia=!1)):(t=new qct(t,this.src,o,!!r,i),t.ia=n,e.push(t)),t};function cf(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=a0(r,t),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&($c(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function uf(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}var zf="closure_lm_"+(1e6*Math.random()|0),qh={};function d0(e,t,n,r,i){if(r&&r.once)return g0(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)d0(e,t[o],n,r,i);return null}return n=Wf(n),e&&e[Ma]?e.O(t,n,Pa(r)?!!r.capture:!!r,i):p0(e,t,n,!1,r,i)}function p0(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var l=Pa(i)?!!i.capture:!!i,h=Gf(e);if(h||(e[zf]=h=new qc(e)),n=h.add(t,n,r,l,o),n.proxy)return n;if(r=Uct(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Pct||(i=l),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(m0(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Uct(){function e(n){return t.call(e.src,e.listener,n)}const t=zct;return e}function g0(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)g0(e,t[o],n,r,i);return null}return n=Wf(n),e&&e[Ma]?e.P(t,n,Pa(r)?!!r.capture:!!r,i):p0(e,t,n,!0,r,i)}function _0(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)_0(e,t[o],n,r,i);else r=Pa(r)?!!r.capture:!!r,n=Wf(n),e&&e[Ma]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],n=uf(o,n,r,i),-1<n&&($c(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete e.g[t],e.h--)))):e&&(e=Gf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=uf(t,n,r,i)),(n=-1<e?t[e]:null)&&Hf(n))}function Hf(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Ma])cf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(m0(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Gf(t))?(cf(n,e),n.h==0&&(n.src=null,t[zf]=null)):$c(e)}}}function m0(e){return e in qh?qh[e]:qh[e]="on"+e}function zct(e,t){if(e.fa)e=!0;else{t=new pa(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Hf(e),e=n.call(r,t)}return e}function Gf(e){return e=e[zf],e instanceof qc?e:null}var Bh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wf(e){return typeof e=="function"?e:(e[Bh]||(e[Bh]=function(t){return e.handleEvent(t)}),e[Bh])}function wn(){Yi.call(this),this.i=new qc(this),this.S=this,this.J=null}En(wn,Yi);wn.prototype[Ma]=!0;wn.prototype.removeEventListener=function(e,t,n,r){_0(this,e,t,n,r)};function In(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Vn(t,e);else if(t instanceof Vn)t.target=t.target||e;else{var i=t;t=new Vn(r,e),f0(t,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var l=t.g=n[o];i=Bl(l,r,!0,t)&&i}if(l=t.g=e,i=Bl(l,r,!0,t)&&i,i=Bl(l,r,!1,t)&&i,n)for(o=0;o<n.length;o++)l=t.g=n[o],i=Bl(l,r,!1,t)&&i}wn.prototype.N=function(){if(wn.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)$c(n[r]);delete e.g[t],e.h--}}this.J=null};wn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};wn.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Bl(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var l=t[o];if(l&&!l.fa&&l.capture==n){var h=l.listener,f=l.la||l.src;l.ia&&cf(e.i,l),i=h.call(f,r)!==!1&&i}}return i&&!r.defaultPrevented}var jf=Zt.JSON.stringify;class Hct{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function Gct(){var e=Kf;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class Wct{constructor(){this.h=this.g=null}add(t,n){const r=v0.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var v0=new Hct(()=>new jct,e=>e.reset());class jct{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Kct(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Yct(e){Zt.setTimeout(()=>{throw e},0)}let ga,_a=!1,Kf=new Wct,y0=()=>{const e=Zt.Promise.resolve(void 0);ga=()=>{e.then(Qct)}};var Qct=()=>{for(var e;e=Gct();){try{e.h.call(e.g)}catch(n){Yct(n)}var t=v0;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_a=!1};function Bc(e,t){wn.call(this),this.h=e||1,this.g=t||Zt,this.j=Fn(this.qb,this),this.l=Date.now()}En(Bc,wn);At=Bc.prototype;At.ga=!1;At.T=null;At.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),In(this,"tick"),this.ga&&(Yf(this),this.start()))}};At.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Yf(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}At.N=function(){Bc.$.N.call(this),Yf(this),delete this.g};function Qf(e,t,n){if(typeof e=="function")n&&(e=Fn(e,n));else if(e&&typeof e.handleEvent=="function")e=Fn(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Zt.setTimeout(e,t||0)}function b0(e){e.g=Qf(()=>{e.g=null,e.i&&(e.i=!1,b0(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class Zct extends Yi{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:b0(this)}N(){super.N(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ma(e){Yi.call(this),this.h=e,this.g={}}En(ma,Yi);var $_=[];function w0(e,t,n,r){Array.isArray(n)||(n&&($_[0]=n.toString()),n=$_);for(var i=0;i<n.length;i++){var o=d0(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function x0(e){Uf(e.g,function(t,n){this.g.hasOwnProperty(n)&&Hf(t)},e),e.g={}}ma.prototype.N=function(){ma.$.N.call(this),x0(this)};ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Uc(){this.g=!0}Uc.prototype.Ea=function(){this.g=!1};function Xct(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var l="",h=o.split("&"),f=0;f<h.length;f++){var d=h[f].split("=");if(1<d.length){var v=d[0];d=d[1];var b=v.split("_");l=2<=b.length&&b[1]=="type"?l+(v+"="+d+"&"):l+(v+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+l})}function Jct(e,t,n,r,i,o,l){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+o+" "+l})}function oo(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+eut(e,n)+(r?" "+r:"")})}function tut(e,t){e.info(function(){return"TIMEOUT: "+t})}Uc.prototype.info=function(){};function eut(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var l=1;l<i.length;l++)i[l]=""}}}}return jf(n)}catch{return t}}var Is={},q_=null;function zc(){return q_=q_||new wn}Is.Ta="serverreachability";function E0(e){Vn.call(this,Is.Ta,e)}En(E0,Vn);function va(e){const t=zc();In(t,new E0(t))}Is.STAT_EVENT="statevent";function A0(e,t){Vn.call(this,Is.STAT_EVENT,e),this.stat=t}En(A0,Vn);function Qn(e){const t=zc();In(t,new A0(t,e))}Is.Ua="timingevent";function S0(e,t){Vn.call(this,Is.Ua,e),this.size=t}En(S0,Vn);function La(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){e()},t)}var Hc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},k0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zf(){}Zf.prototype.h=null;function B_(e){return e.h||(e.h=e.i())}function C0(){}var Na={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Xf(){Vn.call(this,"d")}En(Xf,Vn);function Jf(){Vn.call(this,"c")}En(Jf,Vn);var hf;function Gc(){}En(Gc,Zf);Gc.prototype.g=function(){return new XMLHttpRequest};Gc.prototype.i=function(){return{}};hf=new Gc;function Fa(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ma(this),this.P=nut,e=of?125:void 0,this.V=new Bc(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new T0}function T0(){this.i=null,this.g="",this.h=!1}var nut=45e3,ff={},sc={};At=Fa.prototype;At.setTimeout=function(e){this.P=e};function df(e,t,n){e.L=1,e.v=jc(wi(t)),e.s=n,e.S=!0,I0(e,null)}function I0(e,t){e.G=Date.now(),Va(e),e.A=wi(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),F0(n.i,"t",r),e.C=0,n=e.l.J,e.h=new T0,e.g=iv(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Zct(Fn(e.Pa,e,e.g),e.O)),w0(e.U,e.g,"readystatechange",e.nb),t=e.I?h0(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),va(),Xct(e.j,e.u,e.A,e.m,e.W,e.s)}At.nb=function(e){e=e.target;const t=this.M;t&&Wr(e)==3?t.l():this.Pa(e)};At.Pa=function(e){try{if(e==this.g)t:{const v=Wr(this.g);var t=this.g.Ia();const b=this.g.da();if(!(3>v)&&(v!=3||of||this.g&&(this.h.h||this.g.ja()||G_(this.g)))){this.J||v!=4||t==7||(t==8||0>=b?va(3):va(2)),Wc(this);var n=this.g.da();this.ca=n;e:if(R0(this)){var r=G_(this.g);e="";var i=r.length,o=Wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_s(this),sa(this);var l="";break e}this.h.i=new Zt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=n==200,Jct(this.j,this.u,this.A,this.m,this.W,v,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var h,f=this.g;if((h=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!da(h)){var d=h;break e}}d=null}if(n=d)oo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pf(this,n);else{this.i=!1,this.o=3,Qn(12),_s(this),sa(this);break t}}this.S?(D0(this,v,l),of&&this.i&&v==3&&(w0(this.U,this.V,"tick",this.mb),this.V.start())):(oo(this.j,this.m,l,null),pf(this,l)),v==4&&_s(this),this.i&&!this.J&&(v==4?tv(this.l,this):(this.i=!1,Va(this)))}else Eut(this.g),n==400&&0<l.indexOf("Unknown SID")?(this.o=3,Qn(12)):(this.o=0,Qn(13)),_s(this),sa(this)}}}catch{}finally{}};function R0(e){return e.g?e.u=="GET"&&e.L!=2&&e.l.Ha:!1}function D0(e,t,n){let r=!0,i;for(;!e.J&&e.C<n.length;)if(i=rut(e,n),i==sc){t==4&&(e.o=4,Qn(14),r=!1),oo(e.j,e.m,null,"[Incomplete Response]");break}else if(i==ff){e.o=4,Qn(15),oo(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else oo(e.j,e.m,i,null),pf(e,i);R0(e)&&i!=sc&&i!=ff&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,Qn(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),sd(t),t.M=!0,Qn(11))):(oo(e.j,e.m,n,"[Invalid Chunked Response]"),_s(e),sa(e))}At.mb=function(){if(this.g){var e=Wr(this.g),t=this.g.ja();this.C<t.length&&(Wc(this),D0(this,e,t),this.i&&e!=4&&Va(this))}};function rut(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?sc:(n=Number(t.substring(n,r)),isNaN(n)?ff:(r+=1,r+n>t.length?sc:(t=t.slice(r,r+n),e.C=r+n,t)))}At.cancel=function(){this.J=!0,_s(this)};function Va(e){e.Y=Date.now()+e.P,O0(e,e.P)}function O0(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=La(Fn(e.lb,e),t)}function Wc(e){e.B&&(Zt.clearTimeout(e.B),e.B=null)}At.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(tut(this.j,this.A),this.L!=2&&(va(),Qn(17)),_s(this),this.o=2,sa(this)):O0(this,this.Y-e)};function sa(e){e.l.H==0||e.J||tv(e.l,e)}function _s(e){Wc(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Yf(e.V),x0(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function pf(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||gf(n.i,e))){if(!e.K&&gf(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)lc(n),Zc(n);else break t;id(n),Qn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=La(Fn(n.ib,n),6e3));if(1>=q0(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ms(n,11)}else if((e.K||n.g==e)&&lc(n),!da(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let d=i[t];if(n.V=d[0],d=d[1],n.H==2)if(d[0]=="c"){n.K=d[1],n.pa=d[2];const v=d[3];v!=null&&(n.ra=v,n.l.info("VER="+n.ra));const b=d[4];b!=null&&(n.Ga=b,n.l.info("SVER="+n.Ga));const k=d[5];k!=null&&typeof k=="number"&&0<k&&(r=1.5*k,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const S=e.g;if(S){const Q=S.g?S.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var o=r.i;o.g||Q.indexOf("spdy")==-1&&Q.indexOf("quic")==-1&&Q.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(td(o,o.h),o.h=null))}if(r.F){const Z=S.g?S.g.getResponseHeader("X-HTTP-Session-Id"):null;Z&&(r.Da=Z,Fe(r.I,r.F,Z))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var l=e;if(r.wa=rv(r,r.J?r.pa:null,r.Y),l.K){B0(r.i,l);var h=l,f=r.L;f&&h.setTimeout(f),h.B&&(Wc(h),Va(h)),r.g=l}else X0(r);0<n.j.length&&Xc(n)}else d[0]!="stop"&&d[0]!="close"||ms(n,7);else n.H==3&&(d[0]=="stop"||d[0]=="close"?d[0]=="stop"?ms(n,7):rd(n):d[0]!="noop"&&n.h&&n.h.Aa(d),n.A=0)}}va(4)}catch{}}function iut(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Fc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function sut(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Fc(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function P0(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Fc(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=sut(e),r=iut(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}var M0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function out(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ys(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ys){this.h=e.h,oc(this,e.j),this.s=e.s,this.g=e.g,ac(this,e.m),this.l=e.l;var t=e.i,n=new ya;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),U_(this,n),this.o=e.o}else e&&(t=String(e).match(M0))?(this.h=!1,oc(this,t[1]||"",!0),this.s=ea(t[2]||""),this.g=ea(t[3]||"",!0),ac(this,t[4]),this.l=ea(t[5]||"",!0),U_(this,t[6]||"",!0),this.o=ea(t[7]||"")):(this.h=!1,this.i=new ya(null,this.h))}ys.prototype.toString=function(){var e=[],t=this.j;t&&e.push(na(t,z_,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(na(t,z_,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(na(n,n.charAt(0)=="/"?cut:lut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",na(n,hut)),e.join("")};function wi(e){return new ys(e)}function oc(e,t,n){e.j=n?ea(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ac(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function U_(e,t,n){t instanceof ya?(e.i=t,fut(e.i,e.h)):(n||(t=na(t,uut)),e.i=new ya(t,e.h))}function Fe(e,t,n){e.i.set(t,n)}function jc(e){return Fe(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ea(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function na(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,aut),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function aut(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var z_=/[#\/\?@]/g,lut=/[#\?:]/g,cut=/[#\?]/g,uut=/[#\?@]/g,hut=/#/g;function ya(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qi(e){e.g||(e.g=new Map,e.h=0,e.i&&out(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}At=ya.prototype;At.add=function(e,t){Qi(this),this.i=null,e=So(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function L0(e,t){Qi(e),t=So(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function N0(e,t){return Qi(e),t=So(e,t),e.g.has(t)}At.forEach=function(e,t){Qi(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};At.ta=function(){Qi(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let o=0;o<i.length;o++)n.push(t[r])}return n};At.Z=function(e){Qi(this);let t=[];if(typeof e=="string")N0(this,e)&&(t=t.concat(this.g.get(So(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};At.set=function(e,t){return Qi(this),this.i=null,e=So(this,e),N0(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};At.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function F0(e,t,n){L0(e,t),0<n.length&&(e.i=null,e.g.set(So(e,t),qf(n)),e.h+=n.length)}At.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=o;l[r]!==""&&(i+="="+encodeURIComponent(String(l[r]))),e.push(i)}}return this.i=e.join("&")};function So(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function fut(e,t){t&&!e.j&&(Qi(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(L0(this,r),F0(this,i,n))},e)),e.j=t}var dut=class{constructor(e,t){this.g=e,this.map=t}};function V0(e){this.l=e||put,Zt.PerformanceNavigationTiming?(e=Zt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Zt.g&&Zt.g.Ka&&Zt.g.Ka()&&Zt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var put=10;function $0(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function q0(e){return e.h?1:e.g?e.g.size:0}function gf(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function td(e,t){e.g?e.g.add(t):e.h=t}function B0(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}V0.prototype.cancel=function(){if(this.i=U0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function U0(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return qf(e.i)}var gut=class{stringify(e){return Zt.JSON.stringify(e,void 0)}parse(e){return Zt.JSON.parse(e,void 0)}};function _ut(){this.g=new gut}function mut(e,t,n){const r=n||"";try{P0(e,function(i,o){let l=i;Pa(i)&&(l=jf(i)),t.push(r+o+"="+encodeURIComponent(l))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function vut(e,t){const n=new Uc;if(Zt.Image){const r=new Image;r.onload=ql(Ul,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ql(Ul,n,r,"TestLoadImage: error",!1,t),r.onabort=ql(Ul,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ql(Ul,n,r,"TestLoadImage: timeout",!1,t),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Ul(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function Kc(e){this.l=e.ec||null,this.j=e.ob||!1}En(Kc,Zf);Kc.prototype.g=function(){return new Yc(this.l,this.j)};Kc.prototype.i=function(e){return function(){return e}}({});function Yc(e,t){wn.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ed,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}En(Yc,wn);var ed=0;At=Yc.prototype;At.open=function(e,t){if(this.readyState!=ed)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ba(this)};At.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Zt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};At.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=ed};At.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ba(this)),this.g&&(this.readyState=3,ba(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;z0(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function z0(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}At.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?$a(this):ba(this),this.readyState==3&&z0(this)}};At.Za=function(e){this.g&&(this.response=this.responseText=e,$a(this))};At.Ya=function(e){this.g&&(this.response=e,$a(this))};At.ka=function(){this.g&&$a(this)};function $a(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ba(e)}At.setRequestHeader=function(e,t){this.v.append(e,t)};At.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};At.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function ba(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Yc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var yut=Zt.JSON.parse;function Qe(e){wn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=H0,this.L=this.M=!1}En(Qe,wn);var H0="",but=/^https?$/i,wut=["POST","PUT"];At=Qe.prototype;At.Oa=function(e){this.M=e};At.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hf.g(),this.C=this.u?B_(this.u):B_(hf),this.g.onreadystatechange=Fn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){H_(this,o);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=Zt.FormData&&e instanceof Zt.FormData,!(0<=a0(wut,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of n)this.g.setRequestHeader(o,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{j0(this),0<this.B&&((this.L=xut(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fn(this.ua,this)):this.A=Qf(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){H_(this,o)}};function xut(e){return fo&&typeof e.timeout=="number"&&e.ontimeout!==void 0}At.ua=function(){typeof $f<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,In(this,"timeout"),this.abort(8))};function H_(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,G0(e),Qc(e)}function G0(e){e.F||(e.F=!0,In(e,"complete"),In(e,"error"))}At.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,In(this,"complete"),In(this,"abort"),Qc(this))};At.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qc(this,!0)),Qe.$.N.call(this)};At.La=function(){this.s||(this.G||this.v||this.l?W0(this):this.kb())};At.kb=function(){W0(this)};function W0(e){if(e.h&&typeof $f<"u"&&(!e.C[1]||Wr(e)!=4||e.da()!=2)){if(e.v&&Wr(e)==4)Qf(e.La,0,e);else if(In(e,"readystatechange"),Wr(e)==4){e.h=!1;try{const l=e.da();t:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=l===0){var i=String(e.I).match(M0)[1]||null;!i&&Zt.self&&Zt.self.location&&(i=Zt.self.location.protocol.slice(0,-1)),r=!but.test(i?i.toLowerCase():"")}n=r}if(n)In(e,"complete"),In(e,"success");else{e.m=6;try{var o=2<Wr(e)?e.g.statusText:""}catch{o=""}e.j=o+" ["+e.da()+"]",G0(e)}}finally{Qc(e)}}}}function Qc(e,t){if(e.g){j0(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||In(e,"ready");try{n.onreadystatechange=r}catch{}}}function j0(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Zt.clearTimeout(e.A),e.A=null)}At.isActive=function(){return!!this.g};function Wr(e){return e.g?e.g.readyState:0}At.da=function(){try{return 2<Wr(this)?this.g.status:-1}catch{return-1}};At.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};At.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),yut(t)}};function G_(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case H0:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Eut(e){const t={};e=(e.g&&2<=Wr(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(da(e[r]))continue;var n=Kct(e[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}Bct(t,function(r){return r.join(", ")})}At.Ia=function(){return this.m};At.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function K0(e){let t="";return Uf(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function nd(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=K0(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Fe(e,t,n))}function Qo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Y0(e){this.Ga=0,this.j=[],this.l=new Uc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Qo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Qo("baseRetryDelayMs",5e3,e),this.hb=Qo("retryDelaySeedMs",1e4,e),this.eb=Qo("forwardChannelMaxRetries",2,e),this.xa=Qo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new V0(e&&e.concurrentRequestLimit),this.Ja=new _ut,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}At=Y0.prototype;At.ra=8;At.H=1;function rd(e){if(Q0(e),e.H==3){var t=e.W++,n=wi(e.I);if(Fe(n,"SID",e.K),Fe(n,"RID",t),Fe(n,"TYPE","terminate"),qa(e,n),t=new Fa(e,e.l,t),t.L=2,t.v=jc(wi(n)),n=!1,Zt.navigator&&Zt.navigator.sendBeacon)try{n=Zt.navigator.sendBeacon(t.v.toString(),"")}catch{}!n&&Zt.Image&&(new Image().src=t.v,n=!0),n||(t.g=iv(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Va(t)}nv(e)}function Zc(e){e.g&&(sd(e),e.g.cancel(),e.g=null)}function Q0(e){Zc(e),e.u&&(Zt.clearTimeout(e.u),e.u=null),lc(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Zt.clearTimeout(e.m),e.m=null)}function Xc(e){if(!$0(e.i)&&!e.m){e.m=!0;var t=e.Na;ga||y0(),_a||(ga(),_a=!0),Kf.add(t,e),e.C=0}}function Aut(e,t){return q0(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=La(Fn(e.Na,e,t),ev(e,e.C)),e.C++,!0)}At.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Fa(this,this.l,e);let o=this.s;if(this.U&&(o?(o=h0(o),f0(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Z0(this,i,t),n=wi(this.I),Fe(n,"RID",e),Fe(n,"CVER",22),this.F&&Fe(n,"X-HTTP-Session-Id",this.F),qa(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(K0(o)))+"&"+t:this.o&&nd(n,this.o,o)),td(this.i,i),this.bb&&Fe(n,"TYPE","init"),this.P?(Fe(n,"$req",t),Fe(n,"SID","null"),i.aa=!0,df(i,n,null)):df(i,n,t),this.H=2}}else this.H==3&&(e?W_(this,e):this.j.length==0||$0(this.i)||W_(this))};function W_(e,t){var n;t?n=t.m:n=e.W++;const r=wi(e.I);Fe(r,"SID",e.K),Fe(r,"RID",n),Fe(r,"AID",e.V),qa(e,r),e.o&&e.s&&nd(r,e.o,e.s),n=new Fa(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Z0(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),td(e.i,n),df(n,r,t)}function qa(e,t){e.na&&Uf(e.na,function(n,r){Fe(t,r,n)}),e.h&&P0({},function(n,r){Fe(t,r,n)})}function Z0(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Fn(e.h.Va,e.h,e):null;t:{var i=e.j;let o=-1;for(;;){const l=["count="+n];o==-1?0<n?(o=i[0].g,l.push("ofs="+o)):o=0:l.push("ofs="+o);let h=!0;for(let f=0;f<n;f++){let d=i[f].g;const v=i[f].map;if(d-=o,0>d)o=Math.max(0,i[f].g-100),h=!1;else try{mut(v,l,"req"+d+"_")}catch{r&&r(v)}}if(h){r=l.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function X0(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ga||y0(),_a||(ga(),_a=!0),Kf.add(t,e),e.A=0}}function id(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=La(Fn(e.Ma,e),ev(e,e.A)),e.A++,!0)}At.Ma=function(){if(this.u=null,J0(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=La(Fn(this.jb,this),e)}};At.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Qn(10),Zc(this),J0(this))};function sd(e){e.B!=null&&(Zt.clearTimeout(e.B),e.B=null)}function J0(e){e.g=new Fa(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=wi(e.wa);Fe(t,"RID","rpc"),Fe(t,"SID",e.K),Fe(t,"AID",e.V),Fe(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Fe(t,"TO",e.qa),Fe(t,"TYPE","xmlhttp"),qa(e,t),e.o&&e.s&&nd(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=jc(wi(t)),n.s=null,n.S=!0,I0(n,e)}At.ib=function(){this.v!=null&&(this.v=null,Zc(this),id(this),Qn(19))};function lc(e){e.v!=null&&(Zt.clearTimeout(e.v),e.v=null)}function tv(e,t){var n=null;if(e.g==t){lc(e),sd(e),e.g=null;var r=2}else if(gf(e.i,t))n=t.F,B0(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;r=zc(),In(r,new S0(r,n)),Xc(e)}else X0(e);else if(i=t.o,i==3||i==0&&0<t.ca||!(r==1&&Aut(e,t)||r==2&&id(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ms(e,5);break;case 4:ms(e,10);break;case 3:ms(e,6);break;default:ms(e,2)}}}function ev(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ms(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Fn(e.pb,e);n||(n=new ys("//www.google.com/images/cleardot.gif"),Zt.location&&Zt.location.protocol=="http"||oc(n,"https"),jc(n)),vut(n.toString(),r)}else Qn(2);e.H=0,e.h&&e.h.za(t),nv(e),Q0(e)}At.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Qn(2)):(this.l.info("Failed to ping google.com"),Qn(1))};function nv(e){if(e.H=0,e.ma=[],e.h){const t=U0(e.i);(t.length!=0||e.j.length!=0)&&(N_(e.ma,t),N_(e.ma,e.j),e.i.i.length=0,qf(e.j),e.j.length=0),e.h.ya()}}function rv(e,t,n){var r=n instanceof ys?wi(n):new ys(n);if(r.g!="")t&&(r.g=t+"."+r.g),ac(r,r.m);else{var i=Zt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new ys(null);r&&oc(o,r),t&&(o.g=t),i&&ac(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Fe(r,n,t),Fe(r,"VER",e.ra),qa(e,r),r}function iv(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ha&&!e.va?new Qe(new Kc({ob:!0})):new Qe(e.va),t.Oa(e.J),t}At.isActive=function(){return!!this.h&&this.h.isActive(this)};function sv(){}At=sv.prototype;At.Ba=function(){};At.Aa=function(){};At.za=function(){};At.ya=function(){};At.isActive=function(){return!0};At.Va=function(){};function cc(){if(fo&&!(10<=Number(Fct)))throw Error("Environmental error: no available transport.")}cc.prototype.g=function(e,t){return new dr(e,t)};function dr(e,t){wn.call(this),this.g=new Y0(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!da(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!da(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new ko(this)}En(dr,wn);dr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Qn(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=rv(e,null,e.Y),Xc(e)};dr.prototype.close=function(){rd(this.g)};dr.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=jf(e),e=n);t.j.push(new dut(t.fb++,e)),t.H==3&&Xc(t)};dr.prototype.N=function(){this.g.h=null,delete this.j,rd(this.g),delete this.g,dr.$.N.call(this)};function ov(e){Xf.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}En(ov,Xf);function av(){Jf.call(this),this.status=1}En(av,Jf);function ko(e){this.g=e}En(ko,sv);ko.prototype.Ba=function(){In(this.g,"a")};ko.prototype.Aa=function(e){In(this.g,new ov(e))};ko.prototype.za=function(e){In(this.g,new av)};ko.prototype.ya=function(){In(this.g,"b")};function Sut(){this.blockSize=-1}function Yr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}En(Yr,Sut);Yr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Uh(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],l=t+(o^n&(i^o))+r[0]+3614090360&4294967295;t=n+(l<<7&4294967295|l>>>25),l=o+(i^t&(n^i))+r[1]+3905402710&4294967295,o=t+(l<<12&4294967295|l>>>20),l=i+(n^o&(t^n))+r[2]+606105819&4294967295,i=o+(l<<17&4294967295|l>>>15),l=n+(t^i&(o^t))+r[3]+3250441966&4294967295,n=i+(l<<22&4294967295|l>>>10),l=t+(o^n&(i^o))+r[4]+4118548399&4294967295,t=n+(l<<7&4294967295|l>>>25),l=o+(i^t&(n^i))+r[5]+1200080426&4294967295,o=t+(l<<12&4294967295|l>>>20),l=i+(n^o&(t^n))+r[6]+2821735955&4294967295,i=o+(l<<17&4294967295|l>>>15),l=n+(t^i&(o^t))+r[7]+4249261313&4294967295,n=i+(l<<22&4294967295|l>>>10),l=t+(o^n&(i^o))+r[8]+1770035416&4294967295,t=n+(l<<7&4294967295|l>>>25),l=o+(i^t&(n^i))+r[9]+2336552879&4294967295,o=t+(l<<12&4294967295|l>>>20),l=i+(n^o&(t^n))+r[10]+4294925233&4294967295,i=o+(l<<17&4294967295|l>>>15),l=n+(t^i&(o^t))+r[11]+2304563134&4294967295,n=i+(l<<22&4294967295|l>>>10),l=t+(o^n&(i^o))+r[12]+1804603682&4294967295,t=n+(l<<7&4294967295|l>>>25),l=o+(i^t&(n^i))+r[13]+4254626195&4294967295,o=t+(l<<12&4294967295|l>>>20),l=i+(n^o&(t^n))+r[14]+2792965006&4294967295,i=o+(l<<17&4294967295|l>>>15),l=n+(t^i&(o^t))+r[15]+1236535329&4294967295,n=i+(l<<22&4294967295|l>>>10),l=t+(i^o&(n^i))+r[1]+4129170786&4294967295,t=n+(l<<5&4294967295|l>>>27),l=o+(n^i&(t^n))+r[6]+3225465664&4294967295,o=t+(l<<9&4294967295|l>>>23),l=i+(t^n&(o^t))+r[11]+643717713&4294967295,i=o+(l<<14&4294967295|l>>>18),l=n+(o^t&(i^o))+r[0]+3921069994&4294967295,n=i+(l<<20&4294967295|l>>>12),l=t+(i^o&(n^i))+r[5]+3593408605&4294967295,t=n+(l<<5&4294967295|l>>>27),l=o+(n^i&(t^n))+r[10]+38016083&4294967295,o=t+(l<<9&4294967295|l>>>23),l=i+(t^n&(o^t))+r[15]+3634488961&4294967295,i=o+(l<<14&4294967295|l>>>18),l=n+(o^t&(i^o))+r[4]+3889429448&4294967295,n=i+(l<<20&4294967295|l>>>12),l=t+(i^o&(n^i))+r[9]+568446438&4294967295,t=n+(l<<5&4294967295|l>>>27),l=o+(n^i&(t^n))+r[14]+3275163606&4294967295,o=t+(l<<9&4294967295|l>>>23),l=i+(t^n&(o^t))+r[3]+4107603335&4294967295,i=o+(l<<14&4294967295|l>>>18),l=n+(o^t&(i^o))+r[8]+1163531501&4294967295,n=i+(l<<20&4294967295|l>>>12),l=t+(i^o&(n^i))+r[13]+2850285829&4294967295,t=n+(l<<5&4294967295|l>>>27),l=o+(n^i&(t^n))+r[2]+4243563512&4294967295,o=t+(l<<9&4294967295|l>>>23),l=i+(t^n&(o^t))+r[7]+1735328473&4294967295,i=o+(l<<14&4294967295|l>>>18),l=n+(o^t&(i^o))+r[12]+2368359562&4294967295,n=i+(l<<20&4294967295|l>>>12),l=t+(n^i^o)+r[5]+4294588738&4294967295,t=n+(l<<4&4294967295|l>>>28),l=o+(t^n^i)+r[8]+2272392833&4294967295,o=t+(l<<11&4294967295|l>>>21),l=i+(o^t^n)+r[11]+1839030562&4294967295,i=o+(l<<16&4294967295|l>>>16),l=n+(i^o^t)+r[14]+4259657740&4294967295,n=i+(l<<23&4294967295|l>>>9),l=t+(n^i^o)+r[1]+2763975236&4294967295,t=n+(l<<4&4294967295|l>>>28),l=o+(t^n^i)+r[4]+1272893353&4294967295,o=t+(l<<11&4294967295|l>>>21),l=i+(o^t^n)+r[7]+4139469664&4294967295,i=o+(l<<16&4294967295|l>>>16),l=n+(i^o^t)+r[10]+3200236656&4294967295,n=i+(l<<23&4294967295|l>>>9),l=t+(n^i^o)+r[13]+681279174&4294967295,t=n+(l<<4&4294967295|l>>>28),l=o+(t^n^i)+r[0]+3936430074&4294967295,o=t+(l<<11&4294967295|l>>>21),l=i+(o^t^n)+r[3]+3572445317&4294967295,i=o+(l<<16&4294967295|l>>>16),l=n+(i^o^t)+r[6]+76029189&4294967295,n=i+(l<<23&4294967295|l>>>9),l=t+(n^i^o)+r[9]+3654602809&4294967295,t=n+(l<<4&4294967295|l>>>28),l=o+(t^n^i)+r[12]+3873151461&4294967295,o=t+(l<<11&4294967295|l>>>21),l=i+(o^t^n)+r[15]+530742520&4294967295,i=o+(l<<16&4294967295|l>>>16),l=n+(i^o^t)+r[2]+3299628645&4294967295,n=i+(l<<23&4294967295|l>>>9),l=t+(i^(n|~o))+r[0]+4096336452&4294967295,t=n+(l<<6&4294967295|l>>>26),l=o+(n^(t|~i))+r[7]+1126891415&4294967295,o=t+(l<<10&4294967295|l>>>22),l=i+(t^(o|~n))+r[14]+2878612391&4294967295,i=o+(l<<15&4294967295|l>>>17),l=n+(o^(i|~t))+r[5]+4237533241&4294967295,n=i+(l<<21&4294967295|l>>>11),l=t+(i^(n|~o))+r[12]+1700485571&4294967295,t=n+(l<<6&4294967295|l>>>26),l=o+(n^(t|~i))+r[3]+2399980690&4294967295,o=t+(l<<10&4294967295|l>>>22),l=i+(t^(o|~n))+r[10]+4293915773&4294967295,i=o+(l<<15&4294967295|l>>>17),l=n+(o^(i|~t))+r[1]+2240044497&4294967295,n=i+(l<<21&4294967295|l>>>11),l=t+(i^(n|~o))+r[8]+1873313359&4294967295,t=n+(l<<6&4294967295|l>>>26),l=o+(n^(t|~i))+r[15]+4264355552&4294967295,o=t+(l<<10&4294967295|l>>>22),l=i+(t^(o|~n))+r[6]+2734768916&4294967295,i=o+(l<<15&4294967295|l>>>17),l=n+(o^(i|~t))+r[13]+1309151649&4294967295,n=i+(l<<21&4294967295|l>>>11),l=t+(i^(n|~o))+r[4]+4149444226&4294967295,t=n+(l<<6&4294967295|l>>>26),l=o+(n^(t|~i))+r[11]+3174756917&4294967295,o=t+(l<<10&4294967295|l>>>22),l=i+(t^(o|~n))+r[2]+718787259&4294967295,i=o+(l<<15&4294967295|l>>>17),l=n+(o^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}Yr.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(i==0)for(;o<=n;)Uh(this,e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Uh(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Uh(this,r),i=0;break}}this.h=i,this.i+=t};Yr.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function Se(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=e[i]|0;r&&o==t||(n[i]=o,r=!1)}this.g=n}var kut={};function od(e){return-128<=e&&128>e?Mct(e,function(t){return new Se([t|0],0>t?-1:0)}):new Se([e|0],0>e?-1:0)}function jr(e){if(isNaN(e)||!isFinite(e))return uo;if(0>e)return Cn(jr(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=_f;return new Se(t,0)}function lv(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Cn(lv(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=jr(Math.pow(t,8)),r=uo,i=0;i<e.length;i+=8){var o=Math.min(8,e.length-i),l=parseInt(e.substring(i,i+o),t);8>o?(o=jr(Math.pow(t,o)),r=r.R(o).add(jr(l))):(r=r.R(n),r=r.add(jr(l)))}return r}var _f=4294967296,uo=od(0),mf=od(1),j_=od(16777216);At=Se.prototype;At.ea=function(){if(kr(this))return-Cn(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:_f+r)*t,t*=_f}return e};At.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(vi(this))return"0";if(kr(this))return"-"+Cn(this).toString(e);for(var t=jr(Math.pow(e,6)),n=this,r="";;){var i=hc(n,t).g;n=uc(n,i.R(t));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,vi(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};At.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function vi(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function kr(e){return e.h==-1}At.X=function(e){return e=uc(this,e),kr(e)?-1:vi(e)?0:1};function Cn(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Se(n,~e.h).add(mf)}At.abs=function(){return kr(this)?Cn(this):this};At.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(this.D(i)&65535)+(e.D(i)&65535),l=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=l>>>16,o&=65535,l&=65535,n[i]=l<<16|o}return new Se(n,n[n.length-1]&-2147483648?-1:0)};function uc(e,t){return e.add(Cn(t))}At.R=function(e){if(vi(this)||vi(e))return uo;if(kr(this))return kr(e)?Cn(this).R(Cn(e)):Cn(Cn(this).R(e));if(kr(e))return Cn(this.R(Cn(e)));if(0>this.X(j_)&&0>e.X(j_))return jr(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,l=this.D(r)&65535,h=e.D(i)>>>16,f=e.D(i)&65535;n[2*r+2*i]+=l*f,zl(n,2*r+2*i),n[2*r+2*i+1]+=o*f,zl(n,2*r+2*i+1),n[2*r+2*i+1]+=l*h,zl(n,2*r+2*i+1),n[2*r+2*i+2]+=o*h,zl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Se(n,0)};function zl(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Zo(e,t){this.g=e,this.h=t}function hc(e,t){if(vi(t))throw Error("division by zero");if(vi(e))return new Zo(uo,uo);if(kr(e))return t=hc(Cn(e),t),new Zo(Cn(t.g),Cn(t.h));if(kr(t))return t=hc(e,Cn(t)),new Zo(Cn(t.g),t.h);if(30<e.g.length){if(kr(e)||kr(t))throw Error("slowDivide_ only works with positive integers.");for(var n=mf,r=t;0>=r.X(e);)n=K_(n),r=K_(r);var i=no(n,1),o=no(r,1);for(r=no(r,2),n=no(n,2);!vi(r);){var l=o.add(r);0>=l.X(e)&&(i=i.add(n),o=l),r=no(r,1),n=no(n,1)}return t=uc(e,i.R(t)),new Zo(i,t)}for(i=uo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=jr(n),l=o.R(t);kr(l)||0<l.X(e);)n-=r,o=jr(n),l=o.R(t);vi(o)&&(o=mf),i=i.add(o),e=uc(e,l)}return new Zo(i,e)}At.gb=function(e){return hc(this,e).h};At.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Se(n,this.h&e.h)};At.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Se(n,this.h|e.h)};At.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Se(n,this.h^e.h)};function K_(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Se(n,e.h)}function no(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new Se(i,e.h)}cc.prototype.createWebChannel=cc.prototype.g;dr.prototype.send=dr.prototype.u;dr.prototype.open=dr.prototype.m;dr.prototype.close=dr.prototype.close;Hc.NO_ERROR=0;Hc.TIMEOUT=8;Hc.HTTP_ERROR=6;k0.COMPLETE="complete";C0.EventType=Na;Na.OPEN="a";Na.CLOSE="b";Na.ERROR="c";Na.MESSAGE="d";wn.prototype.listen=wn.prototype.O;Qe.prototype.listenOnce=Qe.prototype.P;Qe.prototype.getLastError=Qe.prototype.Sa;Qe.prototype.getLastErrorCode=Qe.prototype.Ia;Qe.prototype.getStatus=Qe.prototype.da;Qe.prototype.getResponseJson=Qe.prototype.Wa;Qe.prototype.getResponseText=Qe.prototype.ja;Qe.prototype.send=Qe.prototype.ha;Qe.prototype.setWithCredentials=Qe.prototype.Oa;Yr.prototype.digest=Yr.prototype.l;Yr.prototype.reset=Yr.prototype.reset;Yr.prototype.update=Yr.prototype.j;Se.prototype.add=Se.prototype.add;Se.prototype.multiply=Se.prototype.R;Se.prototype.modulo=Se.prototype.gb;Se.prototype.compare=Se.prototype.X;Se.prototype.toNumber=Se.prototype.ea;Se.prototype.toString=Se.prototype.toString;Se.prototype.getBits=Se.prototype.D;Se.fromNumber=jr;Se.fromString=lv;var Cut=function(){return new cc},Tut=function(){return zc()},zh=Hc,Iut=k0,Rut=Is,Y_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Hl=C0,Dut=Qe,Out=Se;const Q_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co="10.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new e0("@firebase/firestore");function Xo(){return ks.logLevel}function Nt(e,...t){if(ks.logLevel<=de.DEBUG){const n=t.map(ad);ks.debug(`Firestore (${Co}): ${e}`,...n)}}function Cs(e,...t){if(ks.logLevel<=de.ERROR){const n=t.map(ad);ks.error(`Firestore (${Co}): ${e}`,...n)}}function fc(e,...t){if(ks.logLevel<=de.WARN){const n=t.map(ad);ks.warn(`Firestore (${Co}): ${e}`,...n)}}function ad(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(e="Unexpected state"){const t=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: `+e;throw Cs(t),new Error(t)}function xn(e,t){e||he()}function Ve(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends Ao{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Put{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ln.UNAUTHENTICATED))}shutdown(){}}class Mut{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Lut{constructor(t){this.t=t,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new bs,t.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const f=o;t.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},h=f=>{Nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(Nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new bs)}},0),l()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xn(typeof r.accessToken=="string"),new cv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return xn(t===null||typeof t=="string"),new Ln(t)}}class Nut{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Fut{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Nut(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vut{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $ut{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=o=>{o.error!=null&&Nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,Nt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{Nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(xn(typeof n.token=="string"),this.R=n.token,new Vut(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qut(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{static V(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=qut(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=t.charAt(i[o]%t.length))}return r}}function Pe(e,t){return e<t?-1:e>t?1:0}function po(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Xt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Xt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Xt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return bn.fromMillis(Date.now())}static fromDate(t){return bn.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new bn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Pe(this.nanoseconds,t.nanoseconds):Pe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.timestamp=t}static fromTimestamp(t){return new We(t)}static min(){return new We(new bn(0,0))}static max(){return new We(new bn(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(t,n,r){n===void 0?n=0:n>t.length&&he(),r===void 0?r=t.length-n:r>t.length-n&&he(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return wa.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof wa?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const o=t.get(i),l=n.get(i);if(o<l)return-1;if(o>l)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class rn extends wa{construct(t,n,r){return new rn(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Xt(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new rn(n)}static emptyPath(){return new rn([])}}const But=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends wa{construct(t,n,r){return new Tn(t,n,r)}static isValidIdentifier(t){return But.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tn(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Xt(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<t.length;){const h=t[i];if(h==="\\"){if(i+1===t.length)throw new Xt(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Xt(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=f,i+=2}else h==="`"?(l=!l,i++):h!=="."||l?(r+=h,i++):(o(),i++)}if(o(),l)throw new Xt(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Tn(n)}static emptyPath(){return new Tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.path=t}static fromPath(t){return new ae(rn.fromString(t))}static fromName(t){return new ae(rn.fromString(t).popFirst(5))}static empty(){return new ae(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&rn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return rn.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ae(new rn(t.slice()))}}function Uut(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=We.fromTimestamp(r===1e9?new bn(n+1,0):new bn(n,r));return new Gi(i,ae.empty(),t)}function zut(e){return new Gi(e.readTime,e.key,-1)}class Gi{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Gi(We.min(),ae.empty(),-1)}static max(){return new Gi(We.max(),ae.empty(),-1)}}function Hut(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ae.comparator(e.documentKey,t.documentKey),n!==0?n:Pe(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gut="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wut{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hv(e){if(e.code!==dt.FAILED_PRECONDITION||e.message!==Gut)throw e;Nt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ft((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof ft?n:ft.resolve(n)}catch(n){return ft.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):ft.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):ft.reject(n)}static resolve(t){return new ft((n,r)=>{n(t)})}static reject(t){return new ft((n,r)=>{r(t)})}static waitFor(t){return new ft((n,r)=>{let i=0,o=0,l=!1;t.forEach(h=>{++i,h.next(()=>{++o,l&&o===i&&n()},f=>r(f))}),l=!0,o===i&&n()})}static or(t){let n=ft.resolve(!1);for(const r of t)n=n.next(i=>i?ft.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(t,n){return new ft((r,i)=>{const o=t.length,l=new Array(o);let h=0;for(let f=0;f<o;f++){const d=f;n(t[d]).next(v=>{l[d]=v,++h,h===o&&r(l)},v=>i(v))}})}static doWhile(t,n){return new ft((r,i)=>{const o=()=>{t()===!0?n().next(()=>{o()},i):r()};o()})}}function Jc(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}fv.ae=-1;function ld(e){return e==null}function dc(e){return e===0&&1/e==-1/0}function jut(e){return typeof e=="number"&&Number.isInteger(e)&&!dc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function To(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t,n){this.comparator=t,this.root=n||Sn.EMPTY}insert(t,n){return new rr(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(t){return new rr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Gl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Gl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Gl(this.root,t,this.comparator,!0)}}class Gl{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Sn{constructor(t,n,r,i,o){this.key=t,this.value=n,this.color=r??Sn.RED,this.left=i??Sn.EMPTY,this.right=o??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,o){return new Sn(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Sn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const t=this.left.check();if(t!==this.right.check())throw he();return t+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(t,n,r,i,o){return this}insert(t,n,r){return new Sn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t){this.comparator=t,this.data=new rr(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new X_(this.data.getIterator())}getIteratorFrom(t){return new X_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $n)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $n(this.comparator);return n.data=t,n}}class X_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(t){this.fields=t,t.sort(Tn.comparator)}static empty(){return new qr([])}unionWith(t){let n=new $n(Tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new qr(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return po(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kut extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Kut("Invalid base64 string: "+o):o}}(t);return new xi(n)}static fromUint8Array(t){const n=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(t);return new xi(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}xi.EMPTY_BYTE_STRING=new xi("");const Yut=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(e){if(xn(!!e),typeof e=="string"){let t=0;const n=Yut.exec(e);if(xn(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:kn(e.seconds),nanos:kn(e.nanos)}}function kn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function xa(e){return typeof e=="string"?xi.fromBase64String(e):xi.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function pv(e){const t=e.mapValue.fields.__previous_value__;return cd(t)?pv(t):t}function pc(e){const t=Ts(e.mapValue.fields.__local_write_time__.timestampValue);return new bn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qut{constructor(t,n,r,i,o,l,h,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=d}}class gc{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof gc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function go(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cd(e)?4:Zut(e)?9007199254740991:10:he()}function Qr(e,t){if(e===t)return!0;const n=go(e);if(n!==go(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pc(e).isEqual(pc(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Ts(i.timestampValue),h=Ts(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,o){return xa(i.bytesValue).isEqual(xa(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,o){return kn(i.geoPointValue.latitude)===kn(o.geoPointValue.latitude)&&kn(i.geoPointValue.longitude)===kn(o.geoPointValue.longitude)}(e,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return kn(i.integerValue)===kn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=kn(i.doubleValue),h=kn(o.doubleValue);return l===h?dc(l)===dc(h):isNaN(l)&&isNaN(h)}return!1}(e,t);case 9:return po(e.arrayValue.values||[],t.arrayValue.values||[],Qr);case 10:return function(i,o){const l=i.mapValue.fields||{},h=o.mapValue.fields||{};if(Z_(l)!==Z_(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!Qr(l[f],h[f])))return!1;return!0}(e,t);default:return he()}}function Ea(e,t){return(e.values||[]).find(n=>Qr(n,t))!==void 0}function _o(e,t){if(e===t)return 0;const n=go(e),r=go(t);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(e.booleanValue,t.booleanValue);case 2:return function(o,l){const h=kn(o.integerValue||o.doubleValue),f=kn(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(e,t);case 3:return J_(e.timestampValue,t.timestampValue);case 4:return J_(pc(e),pc(t));case 5:return Pe(e.stringValue,t.stringValue);case 6:return function(o,l){const h=xa(o),f=xa(l);return h.compareTo(f)}(e.bytesValue,t.bytesValue);case 7:return function(o,l){const h=o.split("/"),f=l.split("/");for(let d=0;d<h.length&&d<f.length;d++){const v=Pe(h[d],f[d]);if(v!==0)return v}return Pe(h.length,f.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,l){const h=Pe(kn(o.latitude),kn(l.latitude));return h!==0?h:Pe(kn(o.longitude),kn(l.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(o,l){const h=o.values||[],f=l.values||[];for(let d=0;d<h.length&&d<f.length;++d){const v=_o(h[d],f[d]);if(v)return v}return Pe(h.length,f.length)}(e.arrayValue,t.arrayValue);case 10:return function(o,l){if(o===Wl.mapValue&&l===Wl.mapValue)return 0;if(o===Wl.mapValue)return 1;if(l===Wl.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),d=l.fields||{},v=Object.keys(d);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const k=Pe(f[b],v[b]);if(k!==0)return k;const S=_o(h[f[b]],d[v[b]]);if(S!==0)return S}return Pe(f.length,v.length)}(e.mapValue,t.mapValue);default:throw he()}}function J_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Pe(e,t);const n=Ts(e),r=Ts(t),i=Pe(n.seconds,r.seconds);return i!==0?i:Pe(n.nanos,r.nanos)}function mo(e){return vf(e)}function vf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Ts(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return xa(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ae.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=vf(o);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${vf(n.fields[l])}`;return i+"}"}(e.mapValue):he()}function yf(e){return!!e&&"integerValue"in e}function ud(e){return!!e&&"arrayValue"in e}function Yl(e){return!!e&&"mapValue"in e}function oa(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return To(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=oa(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=oa(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Zut(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(t){this.value=t}static empty(){return new Cr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Yl(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=oa(n)}setAll(t){let n=Tn.emptyPath(),r={},i=[];t.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=h.popLast()}l?r[h.lastSegment()]=oa(l):i.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(t){const n=this.field(t.popLast());Yl(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Qr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];Yl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){To(n,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new Cr(oa(this.value))}}function gv(e){const t=[];return To(e.fields,(n,r)=>{const i=new Tn([n]);if(Yl(r)){const o=gv(r.mapValue).fields;if(o.length===0)t.push(i);else for(const l of o)t.push(i.child(l))}else t.push(i)}),new qr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(t,n,r,i,o,l,h){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(t){return new Vr(t,0,We.min(),We.min(),We.min(),Cr.empty(),0)}static newFoundDocument(t,n,r,i){return new Vr(t,1,n,We.min(),r,i,0)}static newNoDocument(t,n){return new Vr(t,2,n,We.min(),We.min(),Cr.empty(),0)}static newUnknownDocument(t,n){return new Vr(t,3,n,We.min(),We.min(),Cr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Cr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Vr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Vr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(t,n){this.position=t,this.inclusive=n}}function tm(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],l=e.position[i];if(o.field.isKeyField()?r=ae.comparator(ae.fromName(l.referenceValue),n.key):r=_o(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function em(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Qr(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(t,n="asc"){this.field=t,this.dir=n}}function Xut(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{}class yn extends _v{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new tht(t,n,r):n==="array-contains"?new rht(t,r):n==="in"?new iht(t,r):n==="not-in"?new sht(t,r):n==="array-contains-any"?new oht(t,r):new yn(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new eht(t,r):new nht(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_o(n,this.value)):n!==null&&go(this.value)===go(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wi extends _v{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new Wi(t,n)}matches(t){return mv(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function mv(e){return e.op==="and"}function vv(e){return Jut(e)&&mv(e)}function Jut(e){for(const t of e.filters)if(t instanceof Wi)return!1;return!0}function bf(e){if(e instanceof yn)return e.field.canonicalString()+e.op.toString()+mo(e.value);if(vv(e))return e.filters.map(t=>bf(t)).join(",");{const t=e.filters.map(n=>bf(n)).join(",");return`${e.op}(${t})`}}function yv(e,t){return e instanceof yn?function(r,i){return i instanceof yn&&r.op===i.op&&r.field.isEqual(i.field)&&Qr(r.value,i.value)}(e,t):e instanceof Wi?function(r,i){return i instanceof Wi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,h)=>o&&yv(l,i.filters[h]),!0):!1}(e,t):void he()}function bv(e){return e instanceof yn?function(n){return`${n.field.canonicalString()} ${n.op} ${mo(n.value)}`}(e):e instanceof Wi?function(n){return n.op.toString()+" {"+n.getFilters().map(bv).join(" ,")+"}"}(e):"Filter"}class tht extends yn{constructor(t,n,r){super(t,n,r),this.key=ae.fromName(r.referenceValue)}matches(t){const n=ae.comparator(t.key,this.key);return this.matchesComparison(n)}}class eht extends yn{constructor(t,n){super(t,"in",n),this.keys=wv("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class nht extends yn{constructor(t,n){super(t,"not-in",n),this.keys=wv("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function wv(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class rht extends yn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ud(n)&&Ea(n.arrayValue,this.value)}}class iht extends yn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ea(this.value.arrayValue,n)}}class sht extends yn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ea(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Ea(this.value.arrayValue,n)}}class oht extends yn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ud(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ea(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aht{constructor(t,n=null,r=[],i=[],o=null,l=null,h=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=h,this.le=null}}function nm(e,t=null,n=[],r=[],i=null,o=null,l=null){return new aht(e,t,n,r,i,o,l)}function hd(e){const t=Ve(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>bf(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ld(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>mo(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>mo(r)).join(",")),t.le=n}return t.le}function fd(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Xut(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!yv(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!em(e.startAt,t.startAt)&&em(e.endAt,t.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(t,n=null,r=[],i=[],o=null,l="F",h=null,f=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=f,this.he=null,this.Pe=null,this.Ie=null,this.startAt,this.endAt}}function lht(e,t,n,r,i,o,l,h){return new tu(e,t,n,r,i,o,l,h)}function cht(e){return new tu(e)}function rm(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function uht(e){return e.collectionGroup!==null}function aa(e){const t=Ve(e);if(t.he===null){t.he=[];const n=new Set;for(const o of t.explicitOrderBy)t.he.push(o),n.add(o.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new $n(Tn.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(d=>{d.isInequality()&&(h=h.add(d.field))})}),h})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.he.push(new mc(o,r))}),n.has(Tn.keyField().canonicalString())||t.he.push(new mc(Tn.keyField(),r))}return t.he}function ws(e){const t=Ve(e);return t.Pe||(t.Pe=hht(t,aa(e))),t.Pe}function hht(e,t){if(e.limitType==="F")return nm(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new mc(i.field,o)});const n=e.endAt?new _c(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new _c(e.startAt.position,e.startAt.inclusive):null;return nm(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function wf(e,t,n){return new tu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xv(e,t){return fd(ws(e),ws(t))&&e.limitType===t.limitType}function Ev(e){return`${hd(ws(e))}|lt:${e.limitType}`}function Jo(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>bv(i)).join(", ")}]`),ld(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>mo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>mo(i)).join(",")),`Target(${r})`}(ws(e))}; limitType=${e.limitType})`}function dd(e,t){return t.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(e,t)&&function(r,i){for(const o of aa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(l,h,f){const d=tm(l,h,f);return l.inclusive?d<=0:d<0}(r.startAt,aa(r),i)||r.endAt&&!function(l,h,f){const d=tm(l,h,f);return l.inclusive?d>=0:d>0}(r.endAt,aa(r),i))}(e,t)}function fht(e){return(t,n)=>{let r=!1;for(const i of aa(e)){const o=dht(i,t,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function dht(e,t,n){const r=e.field.isKeyField()?ae.comparator(t.key,n.key):function(o,l,h){const f=l.data.field(o),d=h.data.field(o);return f!==null&&d!==null?_o(f,d):he()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){To(this.inner,(n,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return dv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pht=new rr(ae.comparator);function vc(){return pht}const Av=new rr(ae.comparator);function jl(...e){let t=Av;for(const n of e)t=t.insert(n.key,n);return t}function Sv(e){let t=Av;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function vs(){return la()}function kv(){return la()}function la(){return new Io(e=>e.toString(),(e,t)=>e.isEqual(t))}const ght=new rr(ae.comparator),_ht=new $n(ae.comparator);function Nn(...e){let t=_ht;for(const n of e)t=t.add(n);return t}const mht=new $n(Pe);function vht(){return mht}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(t)?"-0":t}}function Tv(e){return{integerValue:""+e}}function yht(e,t){return jut(t)?Tv(t):Cv(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this._=void 0}}function bht(e,t,n){return e instanceof yc?function(i,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&cd(o)&&(o=pv(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,t):e instanceof vo?Rv(e,t):e instanceof Aa?Dv(e,t):function(i,o){const l=Iv(i,o),h=im(l)+im(i.Te);return yf(l)&&yf(i.Te)?Tv(h):Cv(i.serializer,h)}(e,t)}function wht(e,t,n){return e instanceof vo?Rv(e,t):e instanceof Aa?Dv(e,t):n}function Iv(e,t){return e instanceof bc?function(r){return yf(r)||function(o){return!!o&&"doubleValue"in o}(r)}(t)?t:{integerValue:0}:null}class yc extends eu{}class vo extends eu{constructor(t){super(),this.elements=t}}function Rv(e,t){const n=Ov(t);for(const r of e.elements)n.some(i=>Qr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Aa extends eu{constructor(t){super(),this.elements=t}}function Dv(e,t){let n=Ov(t);for(const r of e.elements)n=n.filter(i=>!Qr(i,r));return{arrayValue:{values:n}}}class bc extends eu{constructor(t,n){super(),this.serializer=t,this.Te=n}}function im(e){return kn(e.integerValue||e.doubleValue)}function Ov(e){return ud(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xht{constructor(t,n){this.field=t,this.transform=n}}function Eht(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof vo&&i instanceof vo||r instanceof Aa&&i instanceof Aa?po(r.elements,i.elements,Qr):r instanceof bc&&i instanceof bc?Qr(r.Te,i.Te):r instanceof yc&&i instanceof yc}(e.transform,t.transform)}class Aht{constructor(t,n){this.version=t,this.transformResults=n}}class yi{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new yi}static exists(t){return new yi(void 0,t)}static updateTime(t){return new yi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ql(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class nu{}function Pv(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Lv(e.key,yi.none()):new ru(e.key,e.data,yi.none());{const n=e.data,r=Cr.empty();let i=new $n(Tn.comparator);for(let o of t.fields)if(!i.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Rs(e.key,r,new qr(i.toArray()),yi.none())}}function Sht(e,t,n){e instanceof ru?function(i,o,l){const h=i.value.clone(),f=om(i.fieldTransforms,o,l.transformResults);h.setAll(f),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(e,t,n):e instanceof Rs?function(i,o,l){if(!Ql(i.precondition,o))return void o.convertToUnknownDocument(l.version);const h=om(i.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(Mv(i)),f.setAll(h),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(e,t,n):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,t,n)}function ca(e,t,n,r){return e instanceof ru?function(o,l,h,f){if(!Ql(o.precondition,l))return h;const d=o.value.clone(),v=am(o.fieldTransforms,f,l);return d.setAll(v),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(e,t,n,r):e instanceof Rs?function(o,l,h,f){if(!Ql(o.precondition,l))return h;const d=am(o.fieldTransforms,f,l),v=l.data;return v.setAll(Mv(o)),v.setAll(d),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))}(e,t,n,r):function(o,l,h){return Ql(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(e,t,n)}function kht(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),o=Iv(r.transform,i||null);o!=null&&(n===null&&(n=Cr.empty()),n.set(r.field,o))}return n||null}function sm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&po(r,i,(o,l)=>Eht(o,l))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ru extends nu{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rs extends nu{constructor(t,n,r,i,o=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Mv(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function om(e,t,n){const r=new Map;xn(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],l=o.transform,h=t.data.field(o.field);r.set(o.field,wht(l,h,n[i]))}return r}function am(e,t,n){const r=new Map;for(const i of e){const o=i.transform,l=n.data.field(i.field);r.set(i.field,bht(o,l,t))}return r}class Lv extends nu{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cht extends nu{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tht{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&Sht(o,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ca(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ca(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=kv();return this.mutations.forEach(i=>{const o=t.get(i.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(i.key)?null:h;const f=Pv(l,h);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(We.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Nn())}isEqual(t){return this.batchId===t.batchId&&po(this.mutations,t.mutations,(n,r)=>sm(n,r))&&po(this.baseMutations,t.baseMutations,(n,r)=>sm(n,r))}}class pd{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){xn(t.mutations.length===r.length);let i=function(){return ght}();const o=t.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new pd(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iht{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,fe;function Rht(e){switch(e){default:return he();case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0}}function Dht(e){if(e===void 0)return Cs("GRPC error has no .code"),dt.UNKNOWN;switch(e){case nn.OK:return dt.OK;case nn.CANCELLED:return dt.CANCELLED;case nn.UNKNOWN:return dt.UNKNOWN;case nn.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case nn.INTERNAL:return dt.INTERNAL;case nn.UNAVAILABLE:return dt.UNAVAILABLE;case nn.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case nn.NOT_FOUND:return dt.NOT_FOUND;case nn.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case nn.ABORTED:return dt.ABORTED;case nn.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case nn.DATA_LOSS:return dt.DATA_LOSS;default:return he()}}(fe=nn||(nn={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Out([4294967295,4294967295],0);class Oht{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function xf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Pht(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Mht(e,t){return xf(e,t.toTimestamp())}function ho(e){return xn(!!e),We.fromTimestamp(function(n){const r=Ts(n);return new bn(r.seconds,r.nanos)}(e))}function Nv(e,t){return function(r){return new rn(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function Lht(e){const t=rn.fromString(e);return xn(zht(t)),t}function Ef(e,t){return Nv(e.databaseId,t.path)}function Nht(e){const t=Lht(e);return t.length===4?rn.emptyPath():Vht(t)}function Fht(e){return new rn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Vht(e){return xn(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function lm(e,t,n){return{name:Ef(e,t),fields:n.value.mapValue.fields}}function $ht(e,t){let n;if(t instanceof ru)n={update:lm(e,t.key,t.value)};else if(t instanceof Lv)n={delete:Ef(e,t.key)};else if(t instanceof Rs)n={update:lm(e,t.key,t.data),updateMask:Uht(t.fieldMask)};else{if(!(t instanceof Cht))return he();n={verify:Ef(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof yc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof vo)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Aa)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof bc)return{fieldPath:l.field.canonicalString(),increment:h.Te};throw he()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Mht(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:he()}(e,t.precondition)),n}function qht(e,t){return e&&e.length>0?(xn(t!==void 0),e.map(n=>function(i,o){let l=i.updateTime?ho(i.updateTime):ho(o);return l.isEqual(We.min())&&(l=ho(o)),new Aht(l,i.transformResults||[])}(n,t))):[]}function Bht(e){let t=Nht(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xn(r===1);const v=n.from[0];v.allDescendants?i=v.collectionId:t=t.child(v.collectionId)}let o=[];n.where&&(o=function(b){const k=Fv(b);return k instanceof Wi&&vv(k)?k.getFilters():[k]}(n.where));let l=[];n.orderBy&&(l=function(b){return b.map(k=>function(Q){return new mc(io(Q.field),function(tt){switch(tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Q.direction))}(k))}(n.orderBy));let h=null;n.limit&&(h=function(b){let k;return k=typeof b=="object"?b.value:b,ld(k)?null:k}(n.limit));let f=null;n.startAt&&(f=function(b){const k=!!b.before,S=b.values||[];return new _c(S,k)}(n.startAt));let d=null;return n.endAt&&(d=function(b){const k=!b.before,S=b.values||[];return new _c(S,k)}(n.endAt)),lht(t,i,l,o,h,"F",f,d)}function Fv(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=io(n.unaryFilter.field);return yn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=io(n.unaryFilter.field);return yn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=io(n.unaryFilter.field);return yn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=io(n.unaryFilter.field);return yn.create(l,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(e):e.fieldFilter!==void 0?function(n){return yn.create(io(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Wi.create(n.compositeFilter.filters.map(r=>Fv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he()}}(n.compositeFilter.op))}(e):he()}function io(e){return Tn.fromServerFormat(e.fieldPath)}function Uht(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function zht(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hht{constructor(t){this.ct=t}}function Ght(e){const t=Bht({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?wf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wht{constructor(){this._n=new jht}addToCollectionParentIndex(t,n){return this._n.add(n),ft.resolve()}getCollectionParents(t,n){return ft.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return ft.resolve()}deleteFieldIndex(t,n){return ft.resolve()}deleteAllFieldIndexes(t){return ft.resolve()}createTargetIndexes(t,n){return ft.resolve()}getDocumentsMatchingTarget(t,n){return ft.resolve(null)}getIndexType(t,n){return ft.resolve(0)}getFieldIndexes(t,n){return ft.resolve([])}getNextCollectionGroupToUpdate(t){return ft.resolve(null)}getMinOffset(t,n){return ft.resolve(Gi.min())}getMinOffsetFromCollectionGroup(t,n){return ft.resolve(Gi.min())}updateCollectionGroup(t,n,r){return ft.resolve()}updateIndexEntries(t,n){return ft.resolve()}}class jht{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new $n(rn.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new $n(rn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new yo(0)}static Bn(){return new yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kht{constructor(){this.changes=new Io(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Vr.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ft.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yht{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qht{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&ca(r.mutation,i,qr.empty(),bn.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Nn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Nn()){const i=vs();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(o=>{let l=jl();return o.forEach((h,f)=>{l=l.insert(h,f.overlayedDocument)}),l}))}getOverlayedDocuments(t,n){const r=vs();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Nn()))}populateOverlays(t,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(t,n,r,i){let o=vc();const l=la(),h=function(){return la()}();return n.forEach((f,d)=>{const v=r.get(d.key);i.has(d.key)&&(v===void 0||v.mutation instanceof Rs)?o=o.insert(d.key,d):v!==void 0?(l.set(d.key,v.mutation.getFieldMask()),ca(v.mutation,d,v.mutation.getFieldMask(),bn.now())):l.set(d.key,qr.empty())}),this.recalculateAndSaveOverlays(t,o).next(f=>(f.forEach((d,v)=>l.set(d,v)),n.forEach((d,v)=>{var b;return h.set(d,new Yht(v,(b=l.get(d))!==null&&b!==void 0?b:null))}),h))}recalculateAndSaveOverlays(t,n){const r=la();let i=new rr((l,h)=>l-h),o=Nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(l=>{for(const h of l)h.keys().forEach(f=>{const d=n.get(f);if(d===null)return;let v=r.get(f)||qr.empty();v=h.applyToLocalView(d,v),r.set(f,v);const b=(i.get(h.batchId)||Nn()).add(f);i=i.insert(h.batchId,b)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),d=f.key,v=f.value,b=kv();v.forEach(k=>{if(!o.has(k)){const S=Pv(n.get(k),r.get(k));S!==null&&b.set(k,S),o=o.add(k)}}),l.push(this.documentOverlayCache.saveOverlays(t,d,b))}return ft.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(l){return ae.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):uht(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-o.size):ft.resolve(vs());let h=-1,f=o;return l.next(d=>ft.forEach(d,(v,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),o.get(v)?ft.resolve():this.remoteDocumentCache.getEntry(t,v).next(k=>{f=f.insert(v,k)}))).next(()=>this.populateOverlays(t,d,o)).next(()=>this.computeViews(t,f,d,Nn())).next(v=>({batchId:h,changes:Sv(v)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ae(n)).next(r=>{let i=jl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const o=n.collectionGroup;let l=jl();return this.indexManager.getCollectionParents(t,o).next(h=>ft.forEach(h,f=>{const d=function(b,k){return new tu(k,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,d,r,i).next(v=>{v.forEach((b,k)=>{l=l.insert(b,k)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(t,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,o,i))).next(l=>{o.forEach((f,d)=>{const v=d.getKey();l.get(v)===null&&(l=l.insert(v,Vr.newInvalidDocument(v)))});let h=jl();return l.forEach((f,d)=>{const v=o.get(f);v!==void 0&&ca(v.mutation,d,qr.empty(),bn.now()),dd(n,d)&&(h=h.insert(f,d))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zht{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return ft.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ho(i.createTime)}}(n)),ft.resolve()}getNamedQuery(t,n){return ft.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Ght(i.bundledQuery),readTime:ho(i.readTime)}}(n)),ft.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xht{constructor(){this.overlays=new rr(ae.comparator),this.hr=new Map}getOverlay(t,n){return ft.resolve(this.overlays.get(n))}getOverlays(t,n){const r=vs();return ft.forEach(n,i=>this.getOverlay(t,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,o)=>{this.ht(t,n,o)}),ft.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),ft.resolve()}getOverlaysForCollection(t,n,r){const i=vs(),o=n.length+1,l=new ae(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,d=f.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return ft.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let o=new rr((d,v)=>d-v);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let v=o.get(d.largestBatchId);v===null&&(v=vs(),o=o.insert(d.largestBatchId,v)),v.set(d.getKey(),d)}}const h=vs(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((d,v)=>h.set(d,v)),!(h.size()>=i)););return ft.resolve(h)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Iht(n,r));let o=this.hr.get(n);o===void 0&&(o=Nn(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this.Pr=new $n(vn.Ir),this.Tr=new $n(vn.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new vn(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new vn(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new ae(new rn([])),r=new vn(n,t),i=new vn(n,t+1),o=[];return this.Tr.forEachInRange([r,i],l=>{this.Ar(l),o.push(l.key)}),o}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new ae(new rn([])),r=new vn(n,t),i=new vn(n,t+1);let o=Nn();return this.Tr.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(t){const n=new vn(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class vn{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return ae.comparator(t.key,n.key)||Pe(t.pr,n.pr)}static Er(t,n){return Pe(t.pr,n.pr)||ae.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jht{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new $n(vn.Ir)}checkEmpty(t){return ft.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Tht(o,n,r,i);this.mutationQueue.push(l);for(const h of i)this.wr=this.wr.add(new vn(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return ft.resolve(l)}lookupMutationBatch(t,n){return ft.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),o=i<0?0:i;return ft.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ft.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new vn(n,0),i=new vn(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],l=>{const h=this.Sr(l.pr);o.push(h)}),ft.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $n(Pe);return n.forEach(i=>{const o=new vn(i,0),l=new vn(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,l],h=>{r=r.add(h.pr)})}),ft.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let o=r;ae.isDocumentKey(o)||(o=o.child(""));const l=new vn(new ae(o),0);let h=new $n(Pe);return this.wr.forEachWhile(f=>{const d=f.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(h=h.add(f.pr)),!0)},l),ft.resolve(this.Dr(h))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){xn(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return ft.forEach(n.mutations,i=>{const o=new vn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new vn(n,0),i=this.wr.firstAfterOrEqual(r);return ft.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,ft.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tft{constructor(t){this.vr=t,this.docs=function(){return new rr(ae.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,l=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return ft.resolve(r?r.document.mutableCopy():Vr.newInvalidDocument(n))}getEntries(t,n){let r=vc();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Vr.newInvalidDocument(i))}),ft.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let o=vc();const l=n.path,h=new ae(l.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:d,value:{document:v}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||Hut(zut(v),r)<=0||(i.has(v.key)||dd(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return ft.resolve(o)}getAllFromCollectionGroup(t,n,r,i){he()}Fr(t,n){return ft.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new eft(this)}getSize(t){return ft.resolve(this.size)}}class eft extends Kht{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),ft.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nft{constructor(t){this.persistence=t,this.Mr=new Io(n=>hd(n),fd),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.Or=0,this.Nr=new gd,this.targetCount=0,this.Br=yo.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),ft.resolve()}getLastRemoteSnapshotVersion(t){return ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ft.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),ft.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),ft.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Br=new yo(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,ft.resolve()}updateTargetData(t,n){return this.qn(n),ft.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,ft.resolve()}removeTargets(t,n,r){let i=0;const o=[];return this.Mr.forEach((l,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.Mr.delete(l),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),i++)}),ft.waitFor(o).next(()=>i)}getTargetCount(t){return ft.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return ft.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),ft.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(l=>{o.push(i.markPotentiallyOrphaned(t,l))}),ft.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),ft.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return ft.resolve(r)}containsKey(t,n){return ft.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rft{constructor(t,n){this.Lr={},this.overlays={},this.kr=new fv(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new nft(this),this.indexManager=new Wht,this.remoteDocumentCache=function(i){return new tft(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Hht(n),this.$r=new Zht(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Xht,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Lr[t.toKey()];return r||(r=new Jht(n,this.referenceDelegate),this.Lr[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Nt("MemoryPersistence","Starting transaction:",t);const i=new ift(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(t,n){return ft.or(Object.values(this.Lr).map(r=>()=>r.containsKey(t,n)))}}class ift extends Wut{constructor(t){super(),this.currentSequenceNumber=t}}class _d{constructor(t){this.persistence=t,this.zr=new gd,this.jr=null}static Hr(t){return new _d(t)}get Jr(){if(this.jr)return this.jr;throw he()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),ft.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),ft.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),ft.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ft.forEach(this.Jr,r=>{const i=ae.fromPath(r);return this.Yr(t,i).next(o=>{o||n.removeEntry(i,We.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return ft.or([()=>ft.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Nn(),i=Nn();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new md(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sft{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oft{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=8}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const o={result:null};return this.ji(t,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Hi(t,n,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new sft;return this.Ji(t,n,l).next(h=>{if(o.result=h,this.Ui)return this.Yi(t,n,l,h.size)})}).next(()=>o.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(Xo()<=de.DEBUG&&Nt("QueryEngine","SDK will not create cache indexes for query:",Jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ft.resolve()):(Xo()<=de.DEBUG&&Nt("QueryEngine","Query:",Jo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Xo()<=de.DEBUG&&Nt("QueryEngine","The SDK decides to create cache indexes for query:",Jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ws(n))):ft.resolve())}ji(t,n){if(rm(n))return ft.resolve(null);let r=ws(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wf(n,null,"F"),r=ws(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const l=Nn(...o);return this.zi.getDocuments(t,l).next(h=>this.indexManager.getMinOffset(t,r).next(f=>{const d=this.Zi(n,h);return this.Xi(n,d,l,f.readTime)?this.ji(t,wf(n,null,"F")):this.es(t,d,n,f)}))})))}Hi(t,n,r,i){return rm(n)||i.isEqual(We.min())?ft.resolve(null):this.zi.getDocuments(t,r).next(o=>{const l=this.Zi(n,o);return this.Xi(n,l,r,i)?ft.resolve(null):(Xo()<=de.DEBUG&&Nt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jo(n)),this.es(t,l,n,Uut(i,-1)).next(h=>h))})}Zi(t,n){let r=new $n(fht(t));return n.forEach((i,o)=>{dd(t,o)&&(r=r.add(o))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(t,n,r){return Xo()<=de.DEBUG&&Nt("QueryEngine","Using full collection scan to execute query:",Jo(n)),this.zi.getDocumentsMatchingQuery(t,n,Gi.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aft{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new rr(Pe),this.rs=new Io(o=>hd(o),fd),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Qht(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function lft(e,t,n,r){return new aft(e,t,n,r)}async function Vv(e,t){const n=Ve(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let f=Nn();for(const d of i){l.push(d.batchId);for(const v of d.mutations)f=f.add(v.key)}for(const d of o){h.push(d.batchId);for(const v of d.mutations)f=f.add(v.key)}return n.localDocuments.getDocuments(r,f).next(d=>({us:d,removedBatchIds:l,addedBatchIds:h}))})})}function cft(e,t){const n=Ve(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(h,f,d,v){const b=d.batch,k=b.keys();let S=ft.resolve();return k.forEach(Q=>{S=S.next(()=>v.getEntry(f,Q)).next(Z=>{const tt=d.docVersions.get(Q);xn(tt!==null),Z.version.compareTo(tt)<0&&(b.applyToRemoteDocument(Z,d),Z.isValidDocument()&&(Z.setReadTime(d.commitVersion),v.addEntry(Z)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(f,b))}(n,r,t,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Nn();for(let d=0;d<h.mutationResults.length;++d)h.mutationResults[d].transformResults.length>0&&(f=f.add(h.batch.mutations[d].key));return f}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function uft(e){const t=Ve(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function hft(e,t){const n=Ve(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}class cm{constructor(){this.activeTargetIds=vht()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fft{constructor(){this.no=new cm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new cm,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dft{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl=null;function Hh(){return Kl===null?Kl=function(){return 268435456+Math.round(2147483648*Math.random())}():Kl++,"0x"+Kl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pft={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gft{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection";class _ft extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,l){const h=Hh(),f=this.bo(n,r);Nt("RestConnection",`Sending RPC '${n}' ${h}:`,f,i);const d={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(d,o,l),this.Co(n,f,d,i).then(v=>(Nt("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw fc("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",f,"request:",i),v})}vo(n,r,i,o,l,h){return this.So(n,r,i,o,l)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Co}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,l)=>n[l]=o),i&&i.headers.forEach((o,l)=>n[l]=o)}bo(n,r){const i=pft[n];return`${this.fo}/v1/${r}:${i}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,i){const o=Hh();return new Promise((l,h)=>{const f=new Dut;f.setWithCredentials(!0),f.listenOnce(Iut.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case zh.NO_ERROR:const v=f.getResponseJson();Nt(Mn,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(v)),l(v);break;case zh.TIMEOUT:Nt(Mn,`RPC '${t}' ${o} timed out`),h(new Xt(dt.DEADLINE_EXCEEDED,"Request time out"));break;case zh.HTTP_ERROR:const b=f.getStatus();if(Nt(Mn,`RPC '${t}' ${o} failed with status:`,b,"response text:",f.getResponseText()),b>0){let k=f.getResponseJson();Array.isArray(k)&&(k=k[0]);const S=k==null?void 0:k.error;if(S&&S.status&&S.message){const Q=function(tt){const ut=tt.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(ut)>=0?ut:dt.UNKNOWN}(S.status);h(new Xt(Q,S.message))}else h(new Xt(dt.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new Xt(dt.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{Nt(Mn,`RPC '${t}' ${o} completed.`)}});const d=JSON.stringify(i);Nt(Mn,`RPC '${t}' ${o} sending request:`,i),f.send(n,"POST",d,r,15)})}Fo(t,n,r){const i=Hh(),o=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=Cut(),h=Tut(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Do(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const v=o.join("");Nt(Mn,`Creating RPC '${t}' stream ${i}: ${v}`,f);const b=l.createWebChannel(v,f);let k=!1,S=!1;const Q=new gft({lo:tt=>{S?Nt(Mn,`Not sending because RPC '${t}' stream ${i} is closed:`,tt):(k||(Nt(Mn,`Opening RPC '${t}' stream ${i} transport.`),b.open(),k=!0),Nt(Mn,`RPC '${t}' stream ${i} sending:`,tt),b.send(tt))},ho:()=>b.close()}),Z=(tt,ut,rt)=>{tt.listen(ut,yt=>{try{rt(yt)}catch(wt){setTimeout(()=>{throw wt},0)}})};return Z(b,Hl.EventType.OPEN,()=>{S||Nt(Mn,`RPC '${t}' stream ${i} transport opened.`)}),Z(b,Hl.EventType.CLOSE,()=>{S||(S=!0,Nt(Mn,`RPC '${t}' stream ${i} transport closed`),Q.Vo())}),Z(b,Hl.EventType.ERROR,tt=>{S||(S=!0,fc(Mn,`RPC '${t}' stream ${i} transport errored:`,tt),Q.Vo(new Xt(dt.UNAVAILABLE,"The operation could not be completed")))}),Z(b,Hl.EventType.MESSAGE,tt=>{var ut;if(!S){const rt=tt.data[0];xn(!!rt);const yt=rt,wt=yt.error||((ut=yt[0])===null||ut===void 0?void 0:ut.error);if(wt){Nt(Mn,`RPC '${t}' stream ${i} received error:`,wt);const Vt=wt.status;let _t=function(Ue){const se=nn[Ue];if(se!==void 0)return Dht(se)}(Vt),Yt=wt.message;_t===void 0&&(_t=dt.INTERNAL,Yt="Unknown error status: "+Vt+" with message "+wt.message),S=!0,Q.Vo(new Xt(_t,Yt)),b.close()}else Nt(Mn,`RPC '${t}' stream ${i} received:`,rt),Q.mo(rt)}}),Z(h,Rut.STAT_EVENT,tt=>{tt.stat===Y_.PROXY?Nt(Mn,`RPC '${t}' stream ${i} detected buffering proxy`):tt.stat===Y_.NOPROXY&&Nt(Mn,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Q.Ro()},0),Q}}function Gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(e){return new Oht(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(t,n,r=1e3,i=1.5,o=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&Nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mft{constructor(t,n,r,i,o,l,h,f){this.oi=t,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new $v(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===dt.RESOURCE_EXHAUSTED?(Cs(n.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(n)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{t(()=>{const i=new Xt(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(t,n){const r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(t){return Nt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(Nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vft extends mft{constructor(t,n,r,i,o,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(xn(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const n=qht(t.writeResults,t.commitTime),r=ho(t.commitTime);return this.listener.T_(r,n)}return xn(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=Fht(this.serializer),this.t_(t)}I_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>$ht(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yft extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new Xt(dt.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(t,n,r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Xt(dt.UNKNOWN,i.toString())})}vo(t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.vo(t,n,r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Xt(dt.UNKNOWN,o.toString())})}terminate(){this.A_=!0}}class bft{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Cs(n),this.g_=!1):Nt("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wft{constructor(t,n,r,i,o){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(l=>{r.enqueueAndForget(async()=>{Ua(this)&&(Nt("RemoteStore","Restarting streams for network reachability change."),await async function(f){const d=Ve(f);d.v_.add(4),await Ba(d),d.x_.set("Unknown"),d.v_.delete(4),await su(d)}(this))})}),this.x_=new bft(r,i)}}async function su(e){if(Ua(e))for(const t of e.F_)await t(!0)}async function Ba(e){for(const t of e.F_)await t(!1)}function Ua(e){return Ve(e).v_.size===0}async function qv(e,t,n){if(!Jc(t))throw t;e.v_.add(1),await Ba(e),e.x_.set("Offline"),n||(n=()=>uft(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Nt("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await su(e)})}function Bv(e,t){return t().catch(n=>qv(e,n,t))}async function ou(e){const t=Ve(e),n=ji(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;xft(t);)try{const i=await hft(t.localStore,r);if(i===null){t.D_.length===0&&n.Xo();break}r=i.batchId,Eft(t,i)}catch(i){await qv(t,i)}Uv(t)&&zv(t)}function xft(e){return Ua(e)&&e.D_.length<10}function Eft(e,t){e.D_.push(t);const n=ji(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Uv(e){return Ua(e)&&!ji(e).Ho()&&e.D_.length>0}function zv(e){ji(e).start()}async function Aft(e){ji(e).d_()}async function Sft(e){const t=ji(e);for(const n of e.D_)t.I_(n.mutations)}async function kft(e,t,n){const r=e.D_.shift(),i=pd.from(r,t,n);await Bv(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await ou(e)}async function Cft(e,t){t&&ji(e).P_&&await async function(r,i){if(function(l){return Rht(l)&&l!==dt.ABORTED}(i.code)){const o=r.D_.shift();ji(r).Zo(),await Bv(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await ou(r)}}(e,t),Uv(e)&&zv(e)}async function hm(e,t){const n=Ve(e);n.asyncQueue.verifyOperationInProgress(),Nt("RemoteStore","RemoteStore received new credentials");const r=Ua(n);n.v_.add(3),await Ba(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await su(n)}async function Tft(e,t){const n=Ve(e);t?(n.v_.delete(2),await su(n)):t||(n.v_.add(2),await Ba(n),n.x_.set("Unknown"))}function ji(e){return e.B_||(e.B_=function(n,r,i){const o=Ve(n);return o.R_(),new vft(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{Po:Aft.bind(null,e),To:Cft.bind(null,e),E_:Sft.bind(null,e),T_:kft.bind(null,e)}),e.F_.push(async t=>{t?(e.B_.Zo(),await ou(e)):(await e.B_.stop(),e.D_.length>0&&(Nt("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))})),e.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(t,n,r,i,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,o){const l=Date.now()+r,h=new vd(t,n,l,i,o);return h.start(r),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hv(e,t){if(Cs("AsyncQueue",`${t}: ${e}`),Jc(e))return new Xt(dt.UNAVAILABLE,`${t}: ${e}`);throw e}class Ift{constructor(){this.queries=new Io(t=>Ev(t),xv),this.onlineState="Unknown",this.Q_=new Set}}function Rft(e){e.Q_.forEach(t=>{t.next()})}class Dft{constructor(t,n,r,i,o,l){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.ma={},this.fa=new Io(h=>Ev(h),xv),this.ga=new Map,this.pa=new Set,this.ya=new rr(ae.comparator),this.wa=new Map,this.Sa=new gd,this.ba={},this.Da=new Map,this.Ca=yo.Bn(),this.onlineState="Unknown",this.va=void 0}get isPrimaryClient(){return this.va===!0}}async function Oft(e,t,n){const r=Nft(e);try{const i=await function(l,h){const f=Ve(l),d=bn.now(),v=h.reduce((S,Q)=>S.add(Q.key),Nn());let b,k;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>{let Q=vc(),Z=Nn();return f.os.getEntries(S,v).next(tt=>{Q=tt,Q.forEach((ut,rt)=>{rt.isValidDocument()||(Z=Z.add(ut))})}).next(()=>f.localDocuments.getOverlayedDocuments(S,Q)).next(tt=>{b=tt;const ut=[];for(const rt of h){const yt=kht(rt,b.get(rt.key).overlayedDocument);yt!=null&&ut.push(new Rs(rt.key,yt,gv(yt.value.mapValue),yi.exists(!0)))}return f.mutationQueue.addMutationBatch(S,d,ut,h)}).next(tt=>{k=tt;const ut=tt.applyToLocalDocumentSet(b,Z);return f.documentOverlayCache.saveOverlays(S,tt.batchId,ut)})}).then(()=>({batchId:k.batchId,changes:Sv(b)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(l,h,f){let d=l.ba[l.currentUser.toKey()];d||(d=new rr(Pe)),d=d.insert(h,f),l.ba[l.currentUser.toKey()]=d}(r,i.batchId,n),await au(r,i.changes),await ou(r.remoteStore)}catch(i){const o=Hv(i,"Failed to persist write");n.reject(o)}}function fm(e,t,n){const r=Ve(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.fa.forEach((o,l)=>{const h=l.view.K_(t);h.snapshot&&i.push(h.snapshot)}),function(l,h){const f=Ve(l);f.onlineState=h;let d=!1;f.queries.forEach((v,b)=>{for(const k of b.listeners)k.K_(h)&&(d=!0)}),d&&Rft(f)}(r.eventManager,t),i.length&&r.ma.u_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Pft(e,t){const n=Ve(e),r=t.batch.batchId;try{const i=await cft(n.localStore,t);Wv(n,r,null),Gv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await au(n,i)}catch(i){await hv(i)}}async function Mft(e,t,n){const r=Ve(e);try{const i=await function(l,h){const f=Ve(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let v;return f.mutationQueue.lookupMutationBatch(d,h).next(b=>(xn(b!==null),v=b.keys(),f.mutationQueue.removeMutationBatch(d,b))).next(()=>f.mutationQueue.performConsistencyCheck(d)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(d,v,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,v)).next(()=>f.localDocuments.getDocuments(d,v))})}(r.localStore,t);Wv(r,t,n),Gv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await au(r,i)}catch(i){await hv(i)}}function Gv(e,t){(e.Da.get(t)||[]).forEach(n=>{n.resolve()}),e.Da.delete(t)}function Wv(e,t,n){const r=Ve(e);let i=r.ba[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.ba[r.currentUser.toKey()]=i}}async function au(e,t,n){const r=Ve(e),i=[],o=[],l=[];r.fa.isEmpty()||(r.fa.forEach((h,f)=>{l.push(r.Fa(f,t,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,d!=null&&d.fromCache?"not-current":"current"),d){i.push(d);const v=md.Ki(f.targetId,d);o.push(v)}}))}),await Promise.all(l),r.ma.u_(i),await async function(f,d){const v=Ve(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ft.forEach(d,k=>ft.forEach(k.qi,S=>v.persistence.referenceDelegate.addReference(b,k.targetId,S)).next(()=>ft.forEach(k.Qi,S=>v.persistence.referenceDelegate.removeReference(b,k.targetId,S)))))}catch(b){if(!Jc(b))throw b;Nt("LocalStore","Failed to update sequence numbers: "+b)}for(const b of d){const k=b.targetId;if(!b.fromCache){const S=v.ns.get(k),Q=S.snapshotVersion,Z=S.withLastLimboFreeSnapshotVersion(Q);v.ns=v.ns.insert(k,Z)}}}(r.localStore,o))}async function Lft(e,t){const n=Ve(e);if(!n.currentUser.isEqual(t)){Nt("SyncEngine","User change. New user:",t.toKey());const r=await Vv(n.localStore,t);n.currentUser=t,function(o,l){o.Da.forEach(h=>{h.forEach(f=>{f.reject(new Xt(dt.CANCELLED,l))})}),o.Da.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await au(n,r.us)}}function Nft(e){const t=Ve(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Pft.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Mft.bind(null,t),t}class dm{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=iu(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return lft(this.persistence,new oft,t.initialUser,this.serializer)}createPersistence(t){return new rft(_d.Hr,this.serializer)}createSharedClientState(t){return new fft}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fft{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lft.bind(null,this.syncEngine),await Tft(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Ift}()}createDatastore(t){const n=iu(t.databaseInfo.databaseId),r=function(o){return new _ft(o)}(t.databaseInfo);return function(o,l,h,f){return new yft(o,l,h,f)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,o,l,h){return new wft(r,i,o,l,h)}(this.localStore,this.datastore,t.asyncQueue,n=>fm(this.syncEngine,n,0),function(){return um.C()?new um:new dft}())}createSyncEngine(t,n){return function(i,o,l,h,f,d,v){const b=new Dft(i,o,l,h,f,d);return v&&(b.va=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=Ve(n);Nt("RemoteStore","RemoteStore shutting down."),r.v_.add(5),await Ba(r),r.M_.shutdown(),r.x_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vft{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ln.UNAUTHENTICATED,this.clientId=uv.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{Nt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Nt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Xt(dt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Hv(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Wh(e,t){e.asyncQueue.verifyOperationInProgress(),Nt("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Vv(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function pm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await qft(e);Nt("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(i=>hm(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,o)=>hm(t.remoteStore,o)),e._onlineComponents=t}function $ft(e){return e.name==="FirebaseError"?e.code===dt.FAILED_PRECONDITION||e.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function qft(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Nt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!$ft(n))throw n;fc("Error using user provided cache. Falling back to memory cache: "+n),await Wh(e,new dm)}}else Nt("FirestoreClient","Using default OfflineComponentProvider"),await Wh(e,new dm);return e._offlineComponents}async function Bft(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Nt("FirestoreClient","Using user provided OnlineComponentProvider"),await pm(e,e._uninitializedComponentsProvider._online)):(Nt("FirestoreClient","Using default OnlineComponentProvider"),await pm(e,new Fft))),e._onlineComponents}function Uft(e){return Bft(e).then(t=>t.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zft(e,t,n){if(!n)throw new Xt(dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Hft(e,t,n,r){if(t===!0&&r===!0)throw new Xt(dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function _m(e){if(!ae.isDocumentKey(e))throw new Xt(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function yd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":he()}function Af(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xt(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yd(e);throw new Xt(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Xt(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Xt(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Hft("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jv((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Xt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Xt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Xt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class bd{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Xt(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Xt(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mm(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Put;switch(r.type){case"firstParty":return new Fut(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Xt(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gm.get(n);r&&(Nt("ComponentProvider","Removing Datastore"),gm.delete(n),r.terminate())}(this),Promise.resolve()}}function Gft(e,t,n,r={}){var i;const o=(e=Af(e,bd))._getSettings(),l=`${t}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&fc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ln.MOCK_USER;else{h=hlt(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Xt(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ln(d)}e._authCredentials=new Mut(new cv(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new wd(this.firestore,t,this._query)}}class bi{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new bi(this.firestore,t,this._key)}}class Sa extends wd{constructor(t,n,r){super(t,n,cht(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new bi(this.firestore,null,new ae(t))}withConverter(t){return new Sa(this.firestore,t,this._path)}}function Wft(e,t,...n){if(e=As(e),arguments.length===1&&(t=uv.V()),zft("doc","path",t),e instanceof bd){const r=rn.fromString(t,...n);return _m(r),new bi(e,null,new ae(r))}{if(!(e instanceof bi||e instanceof Sa))throw new Xt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(rn.fromString(t,...n));return _m(r),new bi(e.firestore,e instanceof Sa?e.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jft{constructor(){this.Ya=Promise.resolve(),this.Za=[],this.Xa=!1,this.eu=[],this.tu=null,this.nu=!1,this.ru=!1,this.iu=[],this.jo=new $v(this,"async_queue_retry"),this.su=()=>{const n=Gh();n&&Nt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const t=Gh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.su)}get isShuttingDown(){return this.Xa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ou(),this._u(t)}enterRestrictedMode(t){if(!this.Xa){this.Xa=!0,this.ru=t||!1;const n=Gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.su)}}enqueue(t){if(this.ou(),this.Xa)return new Promise(()=>{});const n=new bs;return this._u(()=>this.Xa&&this.ru?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Za.push(t),this.au()))}async au(){if(this.Za.length!==0){try{await this.Za[0](),this.Za.shift(),this.jo.reset()}catch(t){if(!Jc(t))throw t;Nt("AsyncQueue","Operation failed with retryable error: "+t)}this.Za.length>0&&this.jo.qo(()=>this.au())}}_u(t){const n=this.Ya.then(()=>(this.nu=!0,t().catch(r=>{this.tu=r,this.nu=!1;const i=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(r);throw Cs("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.nu=!1,r))));return this.Ya=n,n}enqueueAfterDelay(t,n,r){this.ou(),this.iu.indexOf(t)>-1&&(n=0);const i=vd.createAndSchedule(this,t,n,r,o=>this.uu(o));return this.eu.push(i),i}ou(){this.tu&&he()}verifyOperationInProgress(){}async cu(){let t;do t=this.Ya,await t;while(t!==this.Ya)}lu(t){for(const n of this.eu)if(n.timerId===t)return!0;return!1}hu(t){return this.cu().then(()=>{this.eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.cu()})}Pu(t){this.iu.push(t)}uu(t){const n=this.eu.indexOf(t);this.eu.splice(n,1)}}class Kv extends bd{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new jft}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Yv(this),this._firestoreClient.terminate()}}function Kft(e,t){const n=typeof e=="object"?e:gct(),r=typeof e=="string"?e:t||"(default)",i=hct(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=clt("firestore");o&&Gft(i,...o)}return i}function Yft(e){return e._firestoreClient||Yv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Yv(e){var t,n,r;const i=e._freezeSettings(),o=function(h,f,d,v){return new Qut(h,f,d,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,jv(v.experimentalLongPollingOptions),v.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Vft(e._authCredentials,e._appCheckCredentials,e._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ka(xi.fromBase64String(t))}catch(n){throw new Xt(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ka(xi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Xt(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Xt(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Xt(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Pe(this._lat,t._lat)||Pe(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qft=/^__.*__$/;class Zv{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Rs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Xv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class cu{constructor(t,n,r,i,o,l){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Iu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(t){return new cu(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}du(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Eu({path:r,Au:!1});return i.Ru(t),i}Vu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Eu({path:r,Au:!1});return i.Iu(),i}mu(t){return this.Eu({path:void 0,Au:!0})}fu(t){return wc(t,this.settings.methodName,this.settings.gu||!1,this.path,this.settings.pu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Iu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ru(this.path.get(t))}Ru(t){if(t.length===0)throw this.fu("Document fields must not be empty");if(Xv(this.Tu)&&Qft.test(t))throw this.fu('Document fields cannot begin and end with "__"')}}class Zft{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||iu(t)}yu(t,n,r,i=!1){return new cu({Tu:t,methodName:n,pu:r,path:Tn.emptyPath(),Au:!1,gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xft(e){const t=e._freezeSettings(),n=iu(e._databaseId);return new Zft(e._databaseId,!!t.ignoreUndefinedProperties,n)}class uu extends lu{_toFieldTransform(t){if(t.Tu!==2)throw t.Tu===1?t.fu(`${this._methodName}() can only appear at the top level of your update data`):t.fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof uu}}function Jft(e,t,n){return new cu({Tu:3,pu:t.settings.pu,methodName:e._methodName,Au:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class tdt extends lu{constructor(t,n){super(t),this.wu=n}_toFieldTransform(t){const n=Jft(this,t,!0),r=this.wu.map(o=>za(o,n)),i=new vo(r);return new xht(t.path,i)}isEqual(t){return this===t}}function edt(e,t,n,r){const i=e.yu(1,t,n);ty("Data must be an object, but it was:",i,r);const o=[],l=Cr.empty();To(r,(f,d)=>{const v=ey(t,f,n);d=As(d);const b=i.Vu(v);if(d instanceof uu)o.push(v);else{const k=za(d,b);k!=null&&(o.push(v),l.set(v,k))}});const h=new qr(o);return new Zv(l,h,i.fieldTransforms)}function ndt(e,t,n,r,i,o){const l=e.yu(1,t,n),h=[vm(t,r,n)],f=[i];if(o.length%2!=0)throw new Xt(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<o.length;k+=2)h.push(vm(t,o[k])),f.push(o[k+1]);const d=[],v=Cr.empty();for(let k=h.length-1;k>=0;--k)if(!sdt(d,h[k])){const S=h[k];let Q=f[k];Q=As(Q);const Z=l.Vu(S);if(Q instanceof uu)d.push(S);else{const tt=za(Q,Z);tt!=null&&(d.push(S),v.set(S,tt))}}const b=new qr(d);return new Zv(v,b,l.fieldTransforms)}function za(e,t){if(Jv(e=As(e)))return ty("Unsupported field value:",t,e),rdt(e,t);if(e instanceof lu)return function(r,i){if(!Xv(i.Tu))throw i.fu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.fu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Au&&t.Tu!==4)throw t.fu("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const h of r){let f=za(h,i.mu(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}}(e,t)}return function(r,i){if((r=As(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yht(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=bn.fromDate(r);return{timestampValue:xf(i.serializer,o)}}if(r instanceof bn){const o=new bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xf(i.serializer,o)}}if(r instanceof Qv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ka)return{bytesValue:Pht(i.serializer,r._byteString)};if(r instanceof bi){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.fu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Nv(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.fu(`Unsupported field value: ${yd(r)}`)}(e,t)}function rdt(e,t){const n={};return dv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):To(e,(r,i)=>{const o=za(i,t.du(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Jv(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof bn||e instanceof Qv||e instanceof ka||e instanceof bi||e instanceof lu)}function ty(e,t,n){if(!Jv(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=yd(n);throw r==="an object"?t.fu(e+" a custom object"):t.fu(e+" "+r)}}function vm(e,t,n){if((t=As(t))instanceof xd)return t._internalPath;if(typeof t=="string")return ey(e,t);throw wc("Field path arguments must be of type string or ",e,!1,void 0,n)}const idt=new RegExp("[~\\*/\\[\\]]");function ey(e,t,n){if(t.search(idt)>=0)throw wc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new xd(...t.split("."))._internalPath}catch{throw wc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function wc(e,t,n,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let h=`Function ${t}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new Xt(dt.INVALID_ARGUMENT,h+e+f)}function sdt(e,t){return e.some(n=>n.isEqual(t))}function odt(e,t,n,...r){e=Af(e,bi);const i=Af(e.firestore,Kv),o=Xft(i);let l;return l=typeof(t=As(t))=="string"||t instanceof xd?ndt(o,"updateDoc",e._key,t,n,r):edt(o,"updateDoc",e._key,t),adt(i,[l.toMutation(e._key,yi.exists(!0))])}function adt(e,t){return function(r,i){const o=new bs;return r.asyncQueue.enqueueAndForget(async()=>Oft(await Uft(r),i,o)),o.promise}(Yft(e),t)}function ldt(...e){return new tdt("arrayUnion",e)}(function(t,n=!0){(function(i){Co=i})(pct),ic(new ha("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),h=new Kv(new Lut(r.getProvider("auth-internal")),new $ut(r.getProvider("app-check-internal")),function(d,v){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Xt(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(d.options.projectId,v)}(l,i),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),co(Q_,"4.3.0",t),co(Q_,"4.3.0","esm2017")})();const cdt={id:"hit"},udt={class:"cf mt1 hit-header"},hdt={class:"tc f3 mt1 hit-selector"},fdt={class:"hit-instructions"},ddt={class:"f4"},pdt={class:"mr3 hit-browser"},gdt={class:"hit-browser-inner"},_dt=["id","onClick"],mdt={class:"tooltiptext"},vdt={class:"fr hit-file-buttons"},ydt={class:"mt1 mr1 fr"},bdt=ot("i",{class:"fa fa-arrow-down"},null,-1),wdt=[bdt],xdt={class:"mt1 mr2 ml2 fr"},Edt=ot("i",{class:"fa fa-arrow-up"},null,-1),Adt=[Edt],Sdt={class:"ba b--black-80 br2 pa2"},kdt={class:"fr"},Cdt={key:0,class:"mb2"},Tdt={key:0,class:"cf"},Idt={class:"fl f3 mt1 mb1"},Rdt={class:"f5"},Ddt={key:1,class:"cf"},Odt={class:"fl f3 mt1 mb1 orig-sentence-header"},Pdt={class:"f5"},Mdt={class:"f5"},Ldt={components:{VueMarkdown:ua},props:["hits_data","current_hit","total_hits","edits_dict","set_hit","selected_state","selected_edits_html","selected_edits","set_selected_edits","set_span_text","set_span_indices","set_edit_html","set_span_category","refresh_interface_edit","set_hits_data","lines","set_lines","config","hit_box_config","toggle_instructions"],data(){return{}},watch:{current_hit(){this.setup_hit_box()},hits_data(){this.setup_hit_box()}},methods:{setup_hit_box(){$("#comment_area").val(""),"comment"in this.hits_data[this.current_hit-1]&&$("#comment_area").val(this.hits_data[this.current_hit-1].comment)},get_circle_class(e){let t="circle-"+e;return e==this.current_hit&&(t+=" circle-active"),this.hits_data&&"bookmark"in this.hits_data[e-1]&&this.hits_data[e-1].bookmark&&(t+=" circle-bookmark"),t},get_bookmark_class(){return this.hits_data&&"bookmark"in this.hits_data[this.current_hit-1]&&this.hits_data[this.current_hit-1].bookmark?"bookmark-active":""},go_to_hit(e){e>this.total_hits?this.set_hit(this.total_hits):e<1?this.set_hit(1):this.set_hit(e),this.setup_hit_box()},go_to_hit_circle(e){e>this.total_hits?this.set_hit(this.total_hits):e<1?this.set_hit(1):this.set_hit(e),this.setup_hit_box()},bookmark_hit(){let e=tn.cloneDeep(this.hits_data);"bookmark"in this.hits_data[this.current_hit-1]?(e[this.current_hit-1].bookmark=!this.hits_data[this.current_hit-1].bookmark,this.set_hits_data(e)):(e[this.current_hit-1].bookmark=!0,this.set_hits_data(e))},restart_hit(){let e=tn.cloneDeep(this.hits_data);e[this.current_hit-1].edits=[],this.set_hits_data(e),this.refresh_interface_edit(),this.setup_hit_box()},remove_selected(e,t,n){if(this.span_type=="source"){let r=this.hits_data[this.current_hit-1].source,i=this.selected_state.source_idx;for(let l in i){let h=i[l];if(h[0]==t&&h[1]==n){i.splice(l,1);break}}this.set_span_indices(i,"source");let o="";for(let l=0;l<i.length;l++){let[h,f]=i[l];o+=`<span class="bg-${e}-light"> `,o+=`<span @click="remove_selected('${e}',${h},${f})" class="hover-white black br-pill mr1 pointer">✘</span>`,o+=r.substring(h,f)+" ",o+="</span>",o+="&nbsp&nbsp"}this.set_span_text(o,"source")}else if(this.span_type=="target"){let r=this.hits_data[this.current_hit-1].target,i=this.selected_state.target_idx;for(let l in i){let h=i[l];if(h[0]==t&&h[1]==n){i.splice(l,1);break}}this.set_span_indices(i,"target");let o="";for(let l=0;l<i.length;l++){let[h,f]=i[l];o.substring(h,f),o+=`<span class="bg-${e}-light"> `,o+=`<span @click="remove_selected('${e}',${h},${f})" class="hover-white black br-pill mr1 pointer">✘</span>`,o+=r.substring(h,f)+" ",o+="</span>",o+="&nbsp&nbsp"}this.set_span_text(o,"target")}},target_exists(){return this.hits_data&&this.hits_data[this.current_hit-1]&&this.hits_data[this.current_hit-1].target},source_exists(){return this.hits_data&&this.hits_data[this.current_hit-1]&&this.hits_data[this.current_hit-1].source},file_download(){kS(this.hits_data)},async file_upload(e){let t=await CS(e);this.set_hits_data(t),this.set_hit(1),this.setup_hit_box()},async submit_crowsource(){if(this.config.database&&this.config.database.type&&this.config.database.type=="firebase"){const t=i0({databaseURL:this.config.database.url,projectId:this.config.database.project_id}),n=this.config.database.collection||"thresh",r=this.config.database.document||"annotations",i=this.config.database.field;var e=null;if(this.config.crowdsource=="prolific"){const h=new URLSearchParams(window.location.search);var e={completion_code:this.config.prolific_completion_code||null,prolific_pid:h.get("PROLIFIC_PID")||null,study_id:h.get("STUDY_ID")||null,session_id:h.get("SESSION_ID")||null}}const o=Kft(t),l=Wft(o,n,r);await odt(l,{[i]:ldt({annotations:JSON.stringify(this.hits_data,null,2),time_submitted:new Date().toLocaleString(),prolific_metadata:JSON.stringify(e,null,2)})})}if(this.config.crowdsource&&this.config.crowdsource=="prolific"){let t=this.config.prolific_completion_code;window.location.href=`https://app.prolific.co/submissions/complete?cc=${t}`}else alert("You have successfully submitted your annotations.")}}},Ndt=Object.assign(Ldt,{__name:"HitBox",setup(e){return(t,n)=>(Ft(),zt("section",cdt,[ot("div",udt,[ot("div",hdt,[ot("button",{onClick:n[0]||(n[0]=r=>t.go_to_hit(e.current_hit-1)),class:"mid-gray br-100 pa1 bw0 bg-near-white pointer prev-next-btns"}," < "),fn(" "+Ut(e.config.interface_text.hit_box.hit_label)+" ",1),ot("span",null,Ut(e.current_hit),1),fn(" / "),ot("span",null,Ut(e.total_hits)+" ",1),e.config.crowdsource&&e.current_hit==e.total_hits?(Ft(),zt("button",{key:1,onClick:n[2]||(n[2]=r=>t.submit_crowsource()),class:"ml2 pa1 ph3 br-pill-ns ba bw1 grow pointer crowdsource-submit"},"Submit")):(Ft(),zt("button",{key:0,onClick:n[1]||(n[1]=r=>t.go_to_hit(e.current_hit+1)),class:"mid-gray br-100 pa1 bw0 bg-near-white pointer prev-next-btns"}," > "))]),ot("div",fdt,[e.config.instructions&&!e.config.prepend_instructions?(Ft(),zt("button",{key:0,onClick:n[3]||(n[3]=r=>e.toggle_instructions()),class:"pa2 ph3 br-pill-ns ba bw1 grow pointer hit-instructions-btn"},[ot("span",ddt,Ut(e.config.interface_text.buttons.instructions_label),1)])):Ae("",!0)]),ot("div",pdt,[ot("div",gdt,[(Ft(!0),zt(_i,null,ps(e.total_hits,r=>(Ft(),zt("span",{key:"circle-"+r,id:"circle-"+r,class:Re([t.get_circle_class(r),"circle pointer"]),onClick:i=>t.go_to_hit_circle(r,t.$e)},[ot("span",mdt,Ut(r),1)],10,_dt))),128))])]),ot("div",vdt,[ot("div",ydt,[ot("input",{type:"button",id:"download-btn",onClick:n[4]||(n[4]=(...r)=>t.file_download&&t.file_download(...r))}),ot("label",{class:Re(["file-upload file-download br-100 w2-5 h2-5 pointer",{disabled:e.config.disable&&Object.values(e.config.disable).includes("download")}]),for:"download-btn"},wdt,2)]),ot("div",xdt,[ot("input",{type:"file",id:"upload-btn",onChange:n[5]||(n[5]=(...r)=>t.file_upload&&t.file_upload(...r))},null,32),ot("label",{class:Re(["file-upload br-100 w2-5 h2-5 pointer",{disabled:e.config.disable&&Object.values(e.config.disable).includes("upload")}]),for:"upload-btn"},Adt,2)])])]),ot("div",null,[ot("div",Sdt,[ot("div",kdt,[ot("i",{onClick:n[6]||(n[6]=(...r)=>t.restart_hit&&t.restart_hit(...r)),class:"fa-solid fa-arrows-rotate fa-lg pointer mr2"}),ot("i",{onClick:n[7]||(n[7]=(...r)=>t.bookmark_hit&&t.bookmark_hit(...r)),class:Re(["bookmark fa-regular fa-bookmark fa-lg pointer ml1",t.get_bookmark_class()])},null,2)]),e.hits_data&&e.hits_data[e.current_hit-1]&&e.hits_data[e.current_hit-1].context?(Ft(),zt("div",Cdt,[e.config.interface_text.typology.context_label!=""?(Ft(),zt("div",Tdt,[ot("p",Idt,[ot("span",Rdt,Ut(e.config.interface_text.typology.context_label)+":",1)])])):Ae("",!0),er(Qh(ua),{source:e.hits_data[e.current_hit-1].context,class:"mt0 mb0"},null,8,["source"])])):Ae("",!0),t.source_exists()?(Ft(),zt("div",Ddt,[ot("p",Odt,[ot("span",Pdt,Ut(e.config.interface_text.typology.source_label)+":",1)])])):Ae("",!0),er(C_,mi({sent_type:"source"},t.$props,{remove_selected:t.remove_selected}),null,16,["remove_selected"]),t.target_exists()?(Ft(),zt("p",{key:2,class:Re(["f3 mb1",{mt0:!t.source_exists()}])},[ot("span",Mdt,Ut(e.config.interface_text.typology.target_label)+":",1)],2)):Ae("",!0),er(C_,mi({sent_type:"target"},t.$props,{remove_selected:t.remove_selected}),null,16,["remove_selected"])])])]))}});const Fdt=ot("div",{class:"custom_style",id:"custom_style"},"Custom style has not loaded!",-1),Vdt={key:0,class:"tc f3 b mb3 mt3 adjudication-highlight"},$dt={data(){return{total_hits:0,current_hit:1,hits_data:null,config:null,edits_dict:{},lines:{},selected_edits:{},editor_open:!1,selected_edits_html:"",annotating_edit_span_category_id:null,hit_box_config:void 0,selected_state:void 0,annotating_edit_span:void 0,set_hit:this.set_hit,set_hits_data:this.set_hits_data,set_edits_dict:this.set_edits_dict,set_lines:this.set_lines,set_span_text:this.set_span_text,set_span_indices:this.set_span_indices,set_span_category:this.set_span_category,set_edit_html:this.set_edit_html,set_selected_edits:this.set_selected_edits,set_hit_box_config:this.set_hit_box_config,set_editor_state:this.set_editor_state,set_annotating_edit_span_category_id:this.set_annotating_edit_span_category_id,set_annotating_edit_span:this.set_annotating_edit_span,refresh_interface_edit:this.refresh_interface_edit,instructions_open:!1,toggle_instructions:this.toggle_instructions}},props:["input_data","consumed_config","highlight"],watch:{input_data(){this.consume_data()},consumed_config(){this.consume_config()}},methods:{consume_data(){let e=tn.cloneDeep(this.input_data.data);this.set_hits_data(e),this.set_hit(1)},consume_config(){let e;this.consumed_config.hasOwnProperty("consumed_config")?e=tn.cloneDeep(this.consumed_config.consumed_config):this.consumed_config.hasOwnProperty("config")?e=tn.cloneDeep(this.consumed_config.config):e=tn.cloneDeep(this.consumed_config),this.config=e,this.config.template_label&&$("title").text(this.config.template_label)},set_hit(e){e!=this.current_hit&&this.config.adjudication&&$(`.circle-${e}`).click(),this.current_hit=e},set_hits_data(e){e.forEach(t=>t.edits=t.edits||[]),e.forEach((t,n)=>{t._thresh_id=n+1}),this.hits_data=e,this.total_hits=e.length},set_edits_dict(e){this.edits_dict=e},set_span_text(e,t){t=="source"?this.selected_state.source_span=e:t=="target"&&(this.selected_state.target_span=e)},set_span_indices(e,t){t=="source"?this.selected_state.source_idx=e:t=="target"&&(this.selected_state.target_idx=e)},set_span_category(e,t){t=="source"?this.selected_state.source_category=e:t=="target"&&(this.selected_state.target_category=e)},set_edit_html(e){this.selected_edits_html=e},set_selected_edits(e){this.selected_edits=e},refresh_interface_edit(){const e={enable_select_source_sentence:!1,enable_select_target_sentence:!1,enable_multi_select_source_sentence:!1,enable_multi_select_target_sentence:!1},t={source_span:"",source_idx:[],source_category:"",target_span:"",target_idx:[],target_category:"",split:"",split_id:null},n={source:"",target:"",composite:""};this.selected_edits=[],this.selected_edits_html="",this.selected_state=t,this.hit_box_config=e,this.annotating_edit_span=n},set_hit_box_config(e){this.hit_box_config=e},set_editor_state(e){this.editor_open=e},set_annotating_edit_span_category_id(e){this.annotating_edit_span_category_id=e},set_annotating_edit_span(e,t=null){t=="source"?this.annotating_edit_span.source=e:t=="target"?this.annotating_edit_span.target=e:t=="composite"?this.annotating_edit_span.composite=e:console.warn(`Invalid sent_type : ${t}`)},set_lines(e){this.lines=e},toggle_instructions(){this.instructions_open=!this.instructions_open},compile_style(){if(!this.config.hasOwnProperty("edits"))return;let e="";for(const t of this.config.edits){let n=t.color;Zl.hasOwnProperty(n)&&(n=Zl[n]);let r=Pt(n).lighten(25).toHexString();e+=`
              :root { --${t.name}: ${n}; --${t.name}-light: ${r}; }
              .border-${t.name} { border-bottom: 3px solid ${n}; }
              .border-${t.name}-all { border: 2px solid ${n}; }
              .bg-${t.name} { background-color: ${n}; }
              .txt-${t.name} { color: ${n}; }
              .bg-${t.name}-light { background-color: ${r}; }
              .border-${t.name}-light { border-bottom: 3px solid ${r}; }
              .border-${t.name}-light-all { border: 2px solid ${r}; }
              .txt-${t.name}-light { color: ${r}; }
              .checkbox-tools-yes-no:checked + label.question-${t.name},
              .checkbox-tools:checked + label.question-${t.name},
              .checkbox-tools:checked + label.txt-${t.name}{
                border: 2px solid var(--${t.name});
              }
              .select-color-${t.name}::selection { background: ${r} !important; }
            `}return this.config.font_size&&(this.config.font_size.source&&(e+=`#source-sentence { font-size: ${this.config.font_size.source}px; }`),this.config.font_size.target&&(e+=`#target-sentence { font-size: ${this.config.font_size.target}px; }`)),e},isAdjacent(){return this.config.hasOwnProperty("display")&&Object.values(this.config.display).includes("side-by-side")}},updated(){$("#custom_style").html(`<style>${this.compile_style()}</style>`),$(`#circle-${this.current_hit}`).addClass("circle-active")},mounted(){this.consume_data(),this.consume_config()},created(){this.consume_config(),this.refresh_interface_edit()}},c_t=Object.assign($dt,{__name:"Interface",setup(e){return(t,n)=>t.config!=null?(Ft(),zt("div",{key:0,class:Re(["container w-65 mb0 card-body",{"w-adjacent":t.isAdjacent()}])},[Fdt,e.highlight?(Ft(),zt("div",Vdt,Ut(t.config.interface_text.adjudication.highlight_label),1)):Ae("",!0),ot("main",{class:Re({adjacent:t.isAdjacent()})},[ot("div",{class:Re({"selection-adjacent":t.isAdjacent()})},[er(Hat,mi(t.$data,{config:t.config}),null,16,["config"]),er(Ndt,mi(t.$data,{config:t.config}),null,16,["config"])],2),ot("div",{class:Re({"annotation-adjacent":t.isAdjacent()})},[er(nC,mi(t.$data,{config:t.config}),null,16,["config"]),er($C,mi(t.$data,{config:t.config}),null,16,["config"])],2)],2)],2)):Ae("",!0)}});/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function ny(e){return typeof e>"u"||e===null}function qdt(e){return typeof e=="object"&&e!==null}function Bdt(e){return Array.isArray(e)?e:ny(e)?[]:[e]}function Udt(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;n<r;n+=1)i=o[n],e[i]=t[i];return e}function zdt(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function Hdt(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Gdt=ny,Wdt=qdt,jdt=Bdt,Kdt=zdt,Ydt=Hdt,Qdt=Udt,dn={isNothing:Gdt,isObject:Wdt,toArray:jdt,repeat:Kdt,isNegativeZero:Ydt,extend:Qdt};function ry(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function Ca(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=ry(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ca.prototype=Object.create(Error.prototype);Ca.prototype.constructor=Ca;Ca.prototype.toString=function(t){return this.name+": "+ry(this,t)};var Yn=Ca;function jh(e,t,n,r,i){var o="",l="",h=Math.floor(i/2)-1;return r-t>h&&(o=" ... ",t=r-h+o.length),n-r>h&&(l=" ...",n=r+h-l.length),{str:o+e.slice(t,n).replace(/\t/g,"→")+l,pos:r-t+o.length}}function Kh(e,t){return dn.repeat(" ",t-e.length)+e}function Zdt(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,l=-1;o=n.exec(e.buffer);)i.push(o.index),r.push(o.index+o[0].length),e.position<=o.index&&l<0&&(l=r.length-2);l<0&&(l=r.length-1);var h="",f,d,v=Math.min(e.line+t.linesAfter,i.length).toString().length,b=t.maxLength-(t.indent+v+3);for(f=1;f<=t.linesBefore&&!(l-f<0);f++)d=jh(e.buffer,r[l-f],i[l-f],e.position-(r[l]-r[l-f]),b),h=dn.repeat(" ",t.indent)+Kh((e.line-f+1).toString(),v)+" | "+d.str+`
`+h;for(d=jh(e.buffer,r[l],i[l],e.position,b),h+=dn.repeat(" ",t.indent)+Kh((e.line+1).toString(),v)+" | "+d.str+`
`,h+=dn.repeat("-",t.indent+v+3+d.pos)+`^
`,f=1;f<=t.linesAfter&&!(l+f>=i.length);f++)d=jh(e.buffer,r[l+f],i[l+f],e.position-(r[l]-r[l+f]),b),h+=dn.repeat(" ",t.indent)+Kh((e.line+f+1).toString(),v)+" | "+d.str+`
`;return h.replace(/\n$/,"")}var Xdt=Zdt,Jdt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],tpt=["scalar","sequence","mapping"];function ept(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function npt(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(Jdt.indexOf(n)===-1)throw new Yn('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=ept(t.styleAliases||null),tpt.indexOf(this.kind)===-1)throw new Yn('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Rn=npt;function ym(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(o,l){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=l)}),n[i]=r}),n}function rpt(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function Sf(e){return this.extend(e)}Sf.prototype.extend=function(t){var n=[],r=[];if(t instanceof Rn)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new Yn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof Rn))throw new Yn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Yn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Yn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof Rn))throw new Yn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Sf.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=ym(i,"implicit"),i.compiledExplicit=ym(i,"explicit"),i.compiledTypeMap=rpt(i.compiledImplicit,i.compiledExplicit),i};var iy=Sf,sy=new Rn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),oy=new Rn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),ay=new Rn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),ly=new iy({explicit:[sy,oy,ay]});function ipt(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function spt(){return null}function opt(e){return e===null}var cy=new Rn("tag:yaml.org,2002:null",{kind:"scalar",resolve:ipt,construct:spt,predicate:opt,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function apt(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function lpt(e){return e==="true"||e==="True"||e==="TRUE"}function cpt(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var uy=new Rn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:apt,construct:lpt,predicate:cpt,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function upt(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function hpt(e){return 48<=e&&e<=55}function fpt(e){return 48<=e&&e<=57}function dpt(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!upt(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!hpt(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!fpt(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function ppt(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function gpt(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!dn.isNegativeZero(e)}var hy=new Rn("tag:yaml.org,2002:int",{kind:"scalar",resolve:dpt,construct:ppt,predicate:gpt,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),_pt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function mpt(e){return!(e===null||!_pt.test(e)||e[e.length-1]==="_")}function vpt(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var ypt=/^[-+]?[0-9]+e/;function bpt(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(dn.isNegativeZero(e))return"-0.0";return n=e.toString(10),ypt.test(n)?n.replace("e",".e"):n}function wpt(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||dn.isNegativeZero(e))}var fy=new Rn("tag:yaml.org,2002:float",{kind:"scalar",resolve:mpt,construct:vpt,predicate:wpt,represent:bpt,defaultStyle:"lowercase"}),dy=ly.extend({implicit:[cy,uy,hy,fy]}),py=dy,gy=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_y=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function xpt(e){return e===null?!1:gy.exec(e)!==null||_y.exec(e)!==null}function Ept(e){var t,n,r,i,o,l,h,f=0,d=null,v,b,k;if(t=gy.exec(e),t===null&&(t=_y.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],l=+t[5],h=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f=+f}return t[9]&&(v=+t[10],b=+(t[11]||0),d=(v*60+b)*6e4,t[9]==="-"&&(d=-d)),k=new Date(Date.UTC(n,r,i,o,l,h,f)),d&&k.setTime(k.getTime()-d),k}function Apt(e){return e.toISOString()}var my=new Rn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:xpt,construct:Ept,instanceOf:Date,represent:Apt});function Spt(e){return e==="<<"||e===null}var vy=new Rn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Spt}),Ed=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function kpt(e){if(e===null)return!1;var t,n,r=0,i=e.length,o=Ed;for(n=0;n<i;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function Cpt(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=Ed,l=0,h=[];for(t=0;t<i;t++)t%4===0&&t&&(h.push(l>>16&255),h.push(l>>8&255),h.push(l&255)),l=l<<6|o.indexOf(r.charAt(t));return n=i%4*6,n===0?(h.push(l>>16&255),h.push(l>>8&255),h.push(l&255)):n===18?(h.push(l>>10&255),h.push(l>>2&255)):n===12&&h.push(l>>4&255),new Uint8Array(h)}function Tpt(e){var t="",n=0,r,i,o=e.length,l=Ed;for(r=0;r<o;r++)r%3===0&&r&&(t+=l[n>>18&63],t+=l[n>>12&63],t+=l[n>>6&63],t+=l[n&63]),n=(n<<8)+e[r];return i=o%3,i===0?(t+=l[n>>18&63],t+=l[n>>12&63],t+=l[n>>6&63],t+=l[n&63]):i===2?(t+=l[n>>10&63],t+=l[n>>4&63],t+=l[n<<2&63],t+=l[64]):i===1&&(t+=l[n>>2&63],t+=l[n<<4&63],t+=l[64],t+=l[64]),t}function Ipt(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var yy=new Rn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:kpt,construct:Cpt,predicate:Ipt,represent:Tpt}),Rpt=Object.prototype.hasOwnProperty,Dpt=Object.prototype.toString;function Opt(e){if(e===null)return!0;var t=[],n,r,i,o,l,h=e;for(n=0,r=h.length;n<r;n+=1){if(i=h[n],l=!1,Dpt.call(i)!=="[object Object]")return!1;for(o in i)if(Rpt.call(i,o))if(!l)l=!0;else return!1;if(!l)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function Ppt(e){return e!==null?e:[]}var by=new Rn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Opt,construct:Ppt}),Mpt=Object.prototype.toString;function Lpt(e){if(e===null)return!0;var t,n,r,i,o,l=e;for(o=new Array(l.length),t=0,n=l.length;t<n;t+=1){if(r=l[t],Mpt.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[t]=[i[0],r[i[0]]]}return!0}function Npt(e){if(e===null)return[];var t,n,r,i,o,l=e;for(o=new Array(l.length),t=0,n=l.length;t<n;t+=1)r=l[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var wy=new Rn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Lpt,construct:Npt}),Fpt=Object.prototype.hasOwnProperty;function Vpt(e){if(e===null)return!0;var t,n=e;for(t in n)if(Fpt.call(n,t)&&n[t]!==null)return!1;return!0}function $pt(e){return e!==null?e:{}}var xy=new Rn("tag:yaml.org,2002:set",{kind:"mapping",resolve:Vpt,construct:$pt}),Ad=py.extend({implicit:[my,vy],explicit:[yy,by,wy,xy]}),Ki=Object.prototype.hasOwnProperty,xc=1,Ey=2,Ay=3,Ec=4,Yh=1,qpt=2,bm=3,Bpt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Upt=/[\x85\u2028\u2029]/,zpt=/[,\[\]\{\}]/,Sy=/^(?:!|!!|![a-z\-]+!)$/i,ky=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function wm(e){return Object.prototype.toString.call(e)}function Kr(e){return e===10||e===13}function xs(e){return e===9||e===32}function nr(e){return e===9||e===32||e===10||e===13}function ao(e){return e===44||e===91||e===93||e===123||e===125}function Hpt(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Gpt(e){return e===120?2:e===117?4:e===85?8:0}function Wpt(e){return 48<=e&&e<=57?e-48:-1}function xm(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function jpt(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Cy=new Array(256),Ty=new Array(256);for(var ro=0;ro<256;ro++)Cy[ro]=xm(ro)?1:0,Ty[ro]=xm(ro);function Kpt(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Ad,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Iy(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=Xdt(n),new Yn(t,n)}function Lt(e,t){throw Iy(e,t)}function Ac(e,t){e.onWarning&&e.onWarning.call(null,Iy(e,t))}var Em={YAML:function(t,n,r){var i,o,l;t.version!==null&&Lt(t,"duplication of %YAML directive"),r.length!==1&&Lt(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&Lt(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),l=parseInt(i[2],10),o!==1&&Lt(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=l<2,l!==1&&l!==2&&Ac(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,o;r.length!==2&&Lt(t,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],Sy.test(i)||Lt(t,"ill-formed tag handle (first argument) of the TAG directive"),Ki.call(t.tagMap,i)&&Lt(t,'there is a previously declared suffix for "'+i+'" tag handle'),ky.test(o)||Lt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Lt(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function Hi(e,t,n,r){var i,o,l,h;if(t<n){if(h=e.input.slice(t,n),r)for(i=0,o=h.length;i<o;i+=1)l=h.charCodeAt(i),l===9||32<=l&&l<=1114111||Lt(e,"expected valid JSON character");else Bpt.test(h)&&Lt(e,"the stream contains non-printable characters");e.result+=h}}function Am(e,t,n,r){var i,o,l,h;for(dn.isObject(n)||Lt(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),l=0,h=i.length;l<h;l+=1)o=i[l],Ki.call(t,o)||(t[o]=n[o],r[o]=!0)}function lo(e,t,n,r,i,o,l,h,f){var d,v;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),d=0,v=i.length;d<v;d+=1)Array.isArray(i[d])&&Lt(e,"nested arrays are not supported inside keys"),typeof i=="object"&&wm(i[d])==="[object Object]"&&(i[d]="[object Object]");if(typeof i=="object"&&wm(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(d=0,v=o.length;d<v;d+=1)Am(e,t,o[d],n);else Am(e,t,o,n);else!e.json&&!Ki.call(n,i)&&Ki.call(t,i)&&(e.line=l||e.line,e.lineStart=h||e.lineStart,e.position=f||e.position,Lt(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function Sd(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Lt(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function sn(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;xs(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Kr(i))for(Sd(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&Ac(e,"deficient indentation"),r}function hu(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||nr(n)))}function kd(e,t){t===1?e.result+=" ":t>1&&(e.result+=dn.repeat(`
`,t-1))}function Ypt(e,t,n){var r,i,o,l,h,f,d,v,b=e.kind,k=e.result,S;if(S=e.input.charCodeAt(e.position),nr(S)||ao(S)||S===35||S===38||S===42||S===33||S===124||S===62||S===39||S===34||S===37||S===64||S===96||(S===63||S===45)&&(i=e.input.charCodeAt(e.position+1),nr(i)||n&&ao(i)))return!1;for(e.kind="scalar",e.result="",o=l=e.position,h=!1;S!==0;){if(S===58){if(i=e.input.charCodeAt(e.position+1),nr(i)||n&&ao(i))break}else if(S===35){if(r=e.input.charCodeAt(e.position-1),nr(r))break}else{if(e.position===e.lineStart&&hu(e)||n&&ao(S))break;if(Kr(S))if(f=e.line,d=e.lineStart,v=e.lineIndent,sn(e,!1,-1),e.lineIndent>=t){h=!0,S=e.input.charCodeAt(e.position);continue}else{e.position=l,e.line=f,e.lineStart=d,e.lineIndent=v;break}}h&&(Hi(e,o,l,!1),kd(e,e.line-f),o=l=e.position,h=!1),xs(S)||(l=e.position+1),S=e.input.charCodeAt(++e.position)}return Hi(e,o,l,!1),e.result?!0:(e.kind=b,e.result=k,!1)}function Qpt(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Hi(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else Kr(n)?(Hi(e,r,i,!0),kd(e,sn(e,!1,t)),r=i=e.position):e.position===e.lineStart&&hu(e)?Lt(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);Lt(e,"unexpected end of the stream within a single quoted scalar")}function Zpt(e,t){var n,r,i,o,l,h;if(h=e.input.charCodeAt(e.position),h!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(h=e.input.charCodeAt(e.position))!==0;){if(h===34)return Hi(e,n,e.position,!0),e.position++,!0;if(h===92){if(Hi(e,n,e.position,!0),h=e.input.charCodeAt(++e.position),Kr(h))sn(e,!1,t);else if(h<256&&Cy[h])e.result+=Ty[h],e.position++;else if((l=Gpt(h))>0){for(i=l,o=0;i>0;i--)h=e.input.charCodeAt(++e.position),(l=Hpt(h))>=0?o=(o<<4)+l:Lt(e,"expected hexadecimal character");e.result+=jpt(o),e.position++}else Lt(e,"unknown escape sequence");n=r=e.position}else Kr(h)?(Hi(e,n,r,!0),kd(e,sn(e,!1,t)),n=r=e.position):e.position===e.lineStart&&hu(e)?Lt(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}Lt(e,"unexpected end of the stream within a double quoted scalar")}function Xpt(e,t){var n=!0,r,i,o,l=e.tag,h,f=e.anchor,d,v,b,k,S,Q=Object.create(null),Z,tt,ut,rt;if(rt=e.input.charCodeAt(e.position),rt===91)v=93,S=!1,h=[];else if(rt===123)v=125,S=!0,h={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=h),rt=e.input.charCodeAt(++e.position);rt!==0;){if(sn(e,!0,t),rt=e.input.charCodeAt(e.position),rt===v)return e.position++,e.tag=l,e.anchor=f,e.kind=S?"mapping":"sequence",e.result=h,!0;n?rt===44&&Lt(e,"expected the node content, but found ','"):Lt(e,"missed comma between flow collection entries"),tt=Z=ut=null,b=k=!1,rt===63&&(d=e.input.charCodeAt(e.position+1),nr(d)&&(b=k=!0,e.position++,sn(e,!0,t))),r=e.line,i=e.lineStart,o=e.position,bo(e,t,xc,!1,!0),tt=e.tag,Z=e.result,sn(e,!0,t),rt=e.input.charCodeAt(e.position),(k||e.line===r)&&rt===58&&(b=!0,rt=e.input.charCodeAt(++e.position),sn(e,!0,t),bo(e,t,xc,!1,!0),ut=e.result),S?lo(e,h,Q,tt,Z,ut,r,i,o):b?h.push(lo(e,null,Q,tt,Z,ut,r,i,o)):h.push(Z),sn(e,!0,t),rt=e.input.charCodeAt(e.position),rt===44?(n=!0,rt=e.input.charCodeAt(++e.position)):n=!1}Lt(e,"unexpected end of the stream within a flow collection")}function Jpt(e,t){var n,r,i=Yh,o=!1,l=!1,h=t,f=0,d=!1,v,b;if(b=e.input.charCodeAt(e.position),b===124)r=!1;else if(b===62)r=!0;else return!1;for(e.kind="scalar",e.result="";b!==0;)if(b=e.input.charCodeAt(++e.position),b===43||b===45)Yh===i?i=b===43?bm:qpt:Lt(e,"repeat of a chomping mode identifier");else if((v=Wpt(b))>=0)v===0?Lt(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?Lt(e,"repeat of an indentation width identifier"):(h=t+v-1,l=!0);else break;if(xs(b)){do b=e.input.charCodeAt(++e.position);while(xs(b));if(b===35)do b=e.input.charCodeAt(++e.position);while(!Kr(b)&&b!==0)}for(;b!==0;){for(Sd(e),e.lineIndent=0,b=e.input.charCodeAt(e.position);(!l||e.lineIndent<h)&&b===32;)e.lineIndent++,b=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>h&&(h=e.lineIndent),Kr(b)){f++;continue}if(e.lineIndent<h){i===bm?e.result+=dn.repeat(`
`,o?1+f:f):i===Yh&&o&&(e.result+=`
`);break}for(r?xs(b)?(d=!0,e.result+=dn.repeat(`
`,o?1+f:f)):d?(d=!1,e.result+=dn.repeat(`
`,f+1)):f===0?o&&(e.result+=" "):e.result+=dn.repeat(`
`,f):e.result+=dn.repeat(`
`,o?1+f:f),o=!0,l=!0,f=0,n=e.position;!Kr(b)&&b!==0;)b=e.input.charCodeAt(++e.position);Hi(e,n,e.position,!1)}return!0}function Sm(e,t){var n,r=e.tag,i=e.anchor,o=[],l,h=!1,f;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),f=e.input.charCodeAt(e.position);f!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Lt(e,"tab characters must not be used in indentation")),!(f!==45||(l=e.input.charCodeAt(e.position+1),!nr(l))));){if(h=!0,e.position++,sn(e,!0,-1)&&e.lineIndent<=t){o.push(null),f=e.input.charCodeAt(e.position);continue}if(n=e.line,bo(e,t,Ay,!1,!0),o.push(e.result),sn(e,!0,-1),f=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&f!==0)Lt(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return h?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function tgt(e,t,n){var r,i,o,l,h,f,d=e.tag,v=e.anchor,b={},k=Object.create(null),S=null,Q=null,Z=null,tt=!1,ut=!1,rt;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=b),rt=e.input.charCodeAt(e.position);rt!==0;){if(!tt&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Lt(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,(rt===63||rt===58)&&nr(r))rt===63?(tt&&(lo(e,b,k,S,Q,null,l,h,f),S=Q=Z=null),ut=!0,tt=!0,i=!0):tt?(tt=!1,i=!0):Lt(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,rt=r;else{if(l=e.line,h=e.lineStart,f=e.position,!bo(e,n,Ey,!1,!0))break;if(e.line===o){for(rt=e.input.charCodeAt(e.position);xs(rt);)rt=e.input.charCodeAt(++e.position);if(rt===58)rt=e.input.charCodeAt(++e.position),nr(rt)||Lt(e,"a whitespace character is expected after the key-value separator within a block mapping"),tt&&(lo(e,b,k,S,Q,null,l,h,f),S=Q=Z=null),ut=!0,tt=!1,i=!1,S=e.tag,Q=e.result;else if(ut)Lt(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=v,!0}else if(ut)Lt(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=v,!0}if((e.line===o||e.lineIndent>t)&&(tt&&(l=e.line,h=e.lineStart,f=e.position),bo(e,t,Ec,!0,i)&&(tt?Q=e.result:Z=e.result),tt||(lo(e,b,k,S,Q,Z,l,h,f),S=Q=Z=null),sn(e,!0,-1),rt=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&rt!==0)Lt(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return tt&&lo(e,b,k,S,Q,null,l,h,f),ut&&(e.tag=d,e.anchor=v,e.kind="mapping",e.result=b),ut}function egt(e){var t,n=!1,r=!1,i,o,l;if(l=e.input.charCodeAt(e.position),l!==33)return!1;if(e.tag!==null&&Lt(e,"duplication of a tag property"),l=e.input.charCodeAt(++e.position),l===60?(n=!0,l=e.input.charCodeAt(++e.position)):l===33?(r=!0,i="!!",l=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do l=e.input.charCodeAt(++e.position);while(l!==0&&l!==62);e.position<e.length?(o=e.input.slice(t,e.position),l=e.input.charCodeAt(++e.position)):Lt(e,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!nr(l);)l===33&&(r?Lt(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),Sy.test(i)||Lt(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),l=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),zpt.test(o)&&Lt(e,"tag suffix cannot contain flow indicator characters")}o&&!ky.test(o)&&Lt(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Lt(e,"tag name is malformed: "+o)}return n?e.tag=o:Ki.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:Lt(e,'undeclared tag handle "'+i+'"'),!0}function ngt(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&Lt(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!nr(n)&&!ao(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Lt(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function rgt(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!nr(r)&&!ao(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Lt(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Ki.call(e.anchorMap,n)||Lt(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],sn(e,!0,-1),!0}function bo(e,t,n,r,i){var o,l,h,f=1,d=!1,v=!1,b,k,S,Q,Z,tt;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=l=h=Ec===n||Ay===n,r&&sn(e,!0,-1)&&(d=!0,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)),f===1)for(;egt(e)||ngt(e);)sn(e,!0,-1)?(d=!0,h=o,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)):h=!1;if(h&&(h=d||i),(f===1||Ec===n)&&(xc===n||Ey===n?Z=t:Z=t+1,tt=e.position-e.lineStart,f===1?h&&(Sm(e,tt)||tgt(e,tt,Z))||Xpt(e,Z)?v=!0:(l&&Jpt(e,Z)||Qpt(e,Z)||Zpt(e,Z)?v=!0:rgt(e)?(v=!0,(e.tag!==null||e.anchor!==null)&&Lt(e,"alias node should not have any properties")):Ypt(e,Z,xc===n)&&(v=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):f===0&&(v=h&&Sm(e,tt))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Lt(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),b=0,k=e.implicitTypes.length;b<k;b+=1)if(Q=e.implicitTypes[b],Q.resolve(e.result)){e.result=Q.construct(e.result),e.tag=Q.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Ki.call(e.typeMap[e.kind||"fallback"],e.tag))Q=e.typeMap[e.kind||"fallback"][e.tag];else for(Q=null,S=e.typeMap.multi[e.kind||"fallback"],b=0,k=S.length;b<k;b+=1)if(e.tag.slice(0,S[b].tag.length)===S[b].tag){Q=S[b];break}Q||Lt(e,"unknown tag !<"+e.tag+">"),e.result!==null&&Q.kind!==e.kind&&Lt(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+Q.kind+'", not "'+e.kind+'"'),Q.resolve(e.result,e.tag)?(e.result=Q.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Lt(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||v}function igt(e){var t=e.position,n,r,i,o=!1,l;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(l=e.input.charCodeAt(e.position))!==0&&(sn(e,!0,-1),l=e.input.charCodeAt(e.position),!(e.lineIndent>0||l!==37));){for(o=!0,l=e.input.charCodeAt(++e.position),n=e.position;l!==0&&!nr(l);)l=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&Lt(e,"directive name must not be less than one character in length");l!==0;){for(;xs(l);)l=e.input.charCodeAt(++e.position);if(l===35){do l=e.input.charCodeAt(++e.position);while(l!==0&&!Kr(l));break}if(Kr(l))break;for(n=e.position;l!==0&&!nr(l);)l=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}l!==0&&Sd(e),Ki.call(Em,r)?Em[r](e,r,i):Ac(e,'unknown document directive "'+r+'"')}if(sn(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,sn(e,!0,-1)):o&&Lt(e,"directives end mark is expected"),bo(e,e.lineIndent-1,Ec,!1,!0),sn(e,!0,-1),e.checkLineBreaks&&Upt.test(e.input.slice(t,e.position))&&Ac(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&hu(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,sn(e,!0,-1));return}if(e.position<e.length-1)Lt(e,"end of the stream or a document separator is expected");else return}function Ry(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new Kpt(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,Lt(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)igt(n);return n.documents}function sgt(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=Ry(e,n);if(typeof t!="function")return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])}function ogt(e,t){var n=Ry(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new Yn("expected a single document in the stream, but found more")}}var agt=sgt,lgt=ogt,Dy={loadAll:agt,load:lgt},Oy=Object.prototype.toString,Py=Object.prototype.hasOwnProperty,Cd=65279,cgt=9,Ta=10,ugt=13,hgt=32,fgt=33,dgt=34,kf=35,pgt=37,ggt=38,_gt=39,mgt=42,My=44,vgt=45,Sc=58,ygt=61,bgt=62,wgt=63,xgt=64,Ly=91,Ny=93,Egt=96,Fy=123,Agt=124,Vy=125,qn={};qn[0]="\\0";qn[7]="\\a";qn[8]="\\b";qn[9]="\\t";qn[10]="\\n";qn[11]="\\v";qn[12]="\\f";qn[13]="\\r";qn[27]="\\e";qn[34]='\\"';qn[92]="\\\\";qn[133]="\\N";qn[160]="\\_";qn[8232]="\\L";qn[8233]="\\P";var Sgt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],kgt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Cgt(e,t){var n,r,i,o,l,h,f;if(t===null)return{};for(n={},r=Object.keys(t),i=0,o=r.length;i<o;i+=1)l=r[i],h=String(t[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),f=e.compiledTypeMap.fallback[l],f&&Py.call(f.styleAliases,h)&&(h=f.styleAliases[h]),n[l]=h;return n}function Tgt(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new Yn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+dn.repeat("0",r-t.length)+t}var Igt=1,Ia=2;function Rgt(e){this.schema=e.schema||Ad,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=dn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Cgt(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Ia:Igt,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function km(e,t){for(var n=dn.repeat(" ",t),r=0,i=-1,o="",l,h=e.length;r<h;)i=e.indexOf(`
`,r),i===-1?(l=e.slice(r),r=h):(l=e.slice(r,i+1),r=i+1),l.length&&l!==`
`&&(o+=n),o+=l;return o}function Cf(e,t){return`
`+dn.repeat(" ",e.indent*t)}function Dgt(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function kc(e){return e===hgt||e===cgt}function Ra(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Cd||65536<=e&&e<=1114111}function Cm(e){return Ra(e)&&e!==Cd&&e!==ugt&&e!==Ta}function Tm(e,t,n){var r=Cm(e),i=r&&!kc(e);return(n?r:r&&e!==My&&e!==Ly&&e!==Ny&&e!==Fy&&e!==Vy)&&e!==kf&&!(t===Sc&&!i)||Cm(t)&&!kc(t)&&e===kf||t===Sc&&i}function Ogt(e){return Ra(e)&&e!==Cd&&!kc(e)&&e!==vgt&&e!==wgt&&e!==Sc&&e!==My&&e!==Ly&&e!==Ny&&e!==Fy&&e!==Vy&&e!==kf&&e!==ggt&&e!==mgt&&e!==fgt&&e!==Agt&&e!==ygt&&e!==bgt&&e!==_gt&&e!==dgt&&e!==pgt&&e!==xgt&&e!==Egt}function Pgt(e){return!kc(e)&&e!==Sc}function ra(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function $y(e){var t=/^\n* /;return t.test(e)}var qy=1,Tf=2,By=3,Uy=4,so=5;function Mgt(e,t,n,r,i,o,l,h){var f,d=0,v=null,b=!1,k=!1,S=r!==-1,Q=-1,Z=Ogt(ra(e,0))&&Pgt(ra(e,e.length-1));if(t||l)for(f=0;f<e.length;d>=65536?f+=2:f++){if(d=ra(e,f),!Ra(d))return so;Z=Z&&Tm(d,v,h),v=d}else{for(f=0;f<e.length;d>=65536?f+=2:f++){if(d=ra(e,f),d===Ta)b=!0,S&&(k=k||f-Q-1>r&&e[Q+1]!==" ",Q=f);else if(!Ra(d))return so;Z=Z&&Tm(d,v,h),v=d}k=k||S&&f-Q-1>r&&e[Q+1]!==" "}return!b&&!k?Z&&!l&&!i(e)?qy:o===Ia?so:Tf:n>9&&$y(e)?so:l?o===Ia?so:Tf:k?Uy:By}function Lgt(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===Ia?'""':"''";if(!e.noCompatMode&&(Sgt.indexOf(t)!==-1||kgt.test(t)))return e.quotingType===Ia?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),l=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),h=r||e.flowLevel>-1&&n>=e.flowLevel;function f(d){return Dgt(e,d)}switch(Mgt(t,h,e.indent,l,f,e.quotingType,e.forceQuotes&&!r,i)){case qy:return t;case Tf:return"'"+t.replace(/'/g,"''")+"'";case By:return"|"+Im(t,e.indent)+Rm(km(t,o));case Uy:return">"+Im(t,e.indent)+Rm(km(Ngt(t,l),o));case so:return'"'+Fgt(t)+'"';default:throw new Yn("impossible error: invalid scalar style")}}()}function Im(e,t){var n=$y(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),o=i?"+":r?"":"-";return n+o+`
`}function Rm(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Ngt(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var d=e.indexOf(`
`);return d=d!==-1?d:e.length,n.lastIndex=d,Dm(e.slice(0,d),t)}(),i=e[0]===`
`||e[0]===" ",o,l;l=n.exec(e);){var h=l[1],f=l[2];o=f[0]===" ",r+=h+(!i&&!o&&f!==""?`
`:"")+Dm(f,t),i=o}return r}function Dm(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,o,l=0,h=0,f="";r=n.exec(e);)h=r.index,h-i>t&&(o=l>i?l:h,f+=`
`+e.slice(i,o),i=o+1),l=h;return f+=`
`,e.length-i>t&&l>i?f+=e.slice(i,l)+`
`+e.slice(l+1):f+=e.slice(i),f.slice(1)}function Fgt(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=ra(e,i),r=qn[n],!r&&Ra(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||Tgt(n);return t}function Vgt(e,t,n){var r="",i=e.tag,o,l,h;for(o=0,l=n.length;o<l;o+=1)h=n[o],e.replacer&&(h=e.replacer.call(n,String(o),h)),(Ei(e,t,h,!1,!1)||typeof h>"u"&&Ei(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function Om(e,t,n,r){var i="",o=e.tag,l,h,f;for(l=0,h=n.length;l<h;l+=1)f=n[l],e.replacer&&(f=e.replacer.call(n,String(l),f)),(Ei(e,t+1,f,!0,!0,!1,!0)||typeof f>"u"&&Ei(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=Cf(e,t)),e.dump&&Ta===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function $gt(e,t,n){var r="",i=e.tag,o=Object.keys(n),l,h,f,d,v;for(l=0,h=o.length;l<h;l+=1)v="",r!==""&&(v+=", "),e.condenseFlow&&(v+='"'),f=o[l],d=n[f],e.replacer&&(d=e.replacer.call(n,f,d)),Ei(e,t,f,!1,!1)&&(e.dump.length>1024&&(v+="? "),v+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ei(e,t,d,!1,!1)&&(v+=e.dump,r+=v));e.tag=i,e.dump="{"+r+"}"}function qgt(e,t,n,r){var i="",o=e.tag,l=Object.keys(n),h,f,d,v,b,k;if(e.sortKeys===!0)l.sort();else if(typeof e.sortKeys=="function")l.sort(e.sortKeys);else if(e.sortKeys)throw new Yn("sortKeys must be a boolean or a function");for(h=0,f=l.length;h<f;h+=1)k="",(!r||i!=="")&&(k+=Cf(e,t)),d=l[h],v=n[d],e.replacer&&(v=e.replacer.call(n,d,v)),Ei(e,t+1,d,!0,!0,!0)&&(b=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,b&&(e.dump&&Ta===e.dump.charCodeAt(0)?k+="?":k+="? "),k+=e.dump,b&&(k+=Cf(e,t)),Ei(e,t+1,v,!0,b)&&(e.dump&&Ta===e.dump.charCodeAt(0)?k+=":":k+=": ",k+=e.dump,i+=k));e.tag=o,e.dump=i||"{}"}function Pm(e,t,n){var r,i,o,l,h,f;for(i=n?e.explicitTypes:e.implicitTypes,o=0,l=i.length;o<l;o+=1)if(h=i[o],(h.instanceOf||h.predicate)&&(!h.instanceOf||typeof t=="object"&&t instanceof h.instanceOf)&&(!h.predicate||h.predicate(t))){if(n?h.multi&&h.representName?e.tag=h.representName(t):e.tag=h.tag:e.tag="?",h.represent){if(f=e.styleMap[h.tag]||h.defaultStyle,Oy.call(h.represent)==="[object Function]")r=h.represent(t,f);else if(Py.call(h.represent,f))r=h.represent[f](t,f);else throw new Yn("!<"+h.tag+'> tag resolver accepts not "'+f+'" style');e.dump=r}return!0}return!1}function Ei(e,t,n,r,i,o,l){e.tag=null,e.dump=n,Pm(e,n,!1)||Pm(e,n,!0);var h=Oy.call(e.dump),f=r,d;r&&(r=e.flowLevel<0||e.flowLevel>t);var v=h==="[object Object]"||h==="[object Array]",b,k;if(v&&(b=e.duplicates.indexOf(n),k=b!==-1),(e.tag!==null&&e.tag!=="?"||k||e.indent!==2&&t>0)&&(i=!1),k&&e.usedDuplicates[b])e.dump="*ref_"+b;else{if(v&&k&&!e.usedDuplicates[b]&&(e.usedDuplicates[b]=!0),h==="[object Object]")r&&Object.keys(e.dump).length!==0?(qgt(e,t,e.dump,i),k&&(e.dump="&ref_"+b+e.dump)):($gt(e,t,e.dump),k&&(e.dump="&ref_"+b+" "+e.dump));else if(h==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!l&&t>0?Om(e,t-1,e.dump,i):Om(e,t,e.dump,i),k&&(e.dump="&ref_"+b+e.dump)):(Vgt(e,t,e.dump),k&&(e.dump="&ref_"+b+" "+e.dump));else if(h==="[object String]")e.tag!=="?"&&Lgt(e,e.dump,t,o,f);else{if(h==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Yn("unacceptable kind of an object to dump "+h)}e.tag!==null&&e.tag!=="?"&&(d=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",e.dump=d+" "+e.dump)}return!0}function Bgt(e,t){var n=[],r=[],i,o;for(If(e,n,r),i=0,o=r.length;i<o;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(o)}function If(e,t,n){var r,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)If(e[i],t,n);else for(r=Object.keys(e),i=0,o=r.length;i<o;i+=1)If(e[r[i]],t,n)}function Ugt(e,t){t=t||{};var n=new Rgt(t);n.noRefs||Bgt(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Ei(n,0,r,!0,!0)?n.dump+`
`:""}var zgt=Ugt,Hgt={dump:zgt};function Td(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Ggt=Rn,Wgt=iy,jgt=ly,Kgt=dy,Ygt=py,Qgt=Ad,Zgt=Dy.load,Xgt=Dy.loadAll,Jgt=Hgt.dump,t_t=Yn,e_t={binary:yy,float:fy,map:ay,null:cy,pairs:wy,set:xy,timestamp:my,bool:uy,int:hy,merge:vy,omap:by,seq:oy,str:sy},n_t=Td("safeLoad","load"),r_t=Td("safeLoadAll","loadAll"),i_t=Td("safeDump","dump"),u_t={Type:Ggt,Schema:Wgt,FAILSAFE_SCHEMA:jgt,JSON_SCHEMA:Kgt,CORE_SCHEMA:Ygt,DEFAULT_SCHEMA:Qgt,load:Zgt,loadAll:Xgt,dump:Jgt,YAMLException:t_t,types:e_t,safeLoad:n_t,safeLoadAll:r_t,safeDump:i_t};export{tn as _,c_t as a,u_t as j};
